{"version":3,"file":"ts-3dtiles.umd.js","sources":["../src/utils/io/writeDefinedProperty.ts","../src/utils/io/writeExtensionsProperty.ts","../src/gltf/core/def/gltf-property-base.ts","../src/gltf/core/def/enum/gltf-version.ts","../src/gltf/core/def/gltf-asset.ts","../src/gltf/core/def/enum/gltf-attribute-type.ts","../src/gltf/core/def/enum/gltf-component-type.ts","../src/gltf/core/def/enum/gltf-alphamode.ts","../src/gltf/core/def/enum/gltf-filter.ts","../src/gltf/core/def/enum/gltf-wrapmode.ts","../src/gltf/core/def/enum/gltf-primitivemode.ts","../src/gltf/core/def/enum/gltf-vertex-attribute-type.ts","../src/gltf/core/def/enum/mime.ts","../src/gltf/core/def/gltf-accessor-sparse-indices.ts","../src/gltf/core/def/gltf-accessor-sparse-values.ts","../src/gltf/core/def/gltf-accessor-sparse.ts","../src/gltf/core/def/gltf-accessor.ts","../node_modules/base64-arraybuffer/lib/base64-arraybuffer.js","../src/gltf/core/def/gltf-buffer.ts","../src/gltf/core/def/enum/gltf-bufferview-target.ts","../src/gltf/core/def/gltf-bufferview.ts","../src/gltf/core/def/gltf-scene.ts","../src/gltf/core/def/gltf-node.ts","../src/gltf/core/def/gltf-primitive-attribute.ts","../src/gltf/core/def/gltf-primitive.ts","../src/gltf/core/def/gltf-mesh.ts","../src/gltf/core/def/gltf-texture-info.ts","../src/gltf/core/def/gltf-normal-texture-info.ts","../src/gltf/core/def/gltf-pbr.ts","../src/gltf/core/def/gltf-material.ts","../src/gltf/core/def/gltf-texture.ts","../node_modules/iobuffer/src/text-encoding-polyfill.js","../node_modules/iobuffer/src/utf8.browser.ts","../node_modules/iobuffer/src/IOBuffer.ts","../src/gltf/core/def/gltf-image.ts","../src/gltf/core/def/gltf-sampler.ts","../src/gltf/core/def/enum/gltf-animation-channel-target-path.ts","../src/gltf/core/def/gltf-animation-channel-target.ts","../src/gltf/core/def/gltf-animation-channel.ts","../src/gltf/core/def/enum/gltf-animation-interpolation.ts","../src/gltf/core/def/gltf-animation-sampler.ts","../src/gltf/core/def/gltf-animation.ts","../src/gltf/core/def/enum/gltf-cameratype.ts","../src/gltf/core/def/gltf-orthographic-camera.ts","../src/gltf/core/def/gltf-perspective-camera.ts","../src/gltf/core/def/gltf-camera.ts","../src/gltf/core/def/gltf-skin.ts","../src/gltf/core/def/gltf-occlusion-texture-info.ts","../src/gltf/core/gltf-document.ts","../src/gltf/ext/gltf-extension-base.ts","../src/gltf/ext/khr/ext-draco.ts","../src/gltf/ext/khr/ext-pbr-specular-glossiness.ts","../src/gltf/ext/vdr/ext-texture-webp.ts","../src/gltf/ext/vdr/ext-texture-dds.ts","../src/gltf/ext/vdr/ext-geometry-metadata.ts","../src/gltf/ext/vdr/ext-primitive-outline.ts","../src/gltf/ext/vdr/ext-meshopt-compression.ts","../src/gltf/ext/vdr/ext-lod.ts","../src/gltf/ext/vdr/ext-materials-thin-transparency.ts","../src/gltf/io/write-action/gltf-add-action.ts","../src/gltf/io/write-action/gltf-drop-action.ts","../src/gltf/io/write-action/gltf-update-action.ts","../src/gltf/io/write-action/action-data/gltf-vertex-attributes.ts","../src/gltf/io/write-action/action-data/gltf-vertex-buffer.ts","../src/gltf/io/write-action/action-data/gltf-vertex-indices.ts","../src/gltf/io/read-util/read-gltf.ts","../src/gltf/io/read-util/read-glb.ts","../src/utils/array-minmax.ts","../src/gltf/io/builder-api/gltf-vertex-buffer-object.ts","../src/gltf/io/builder-api/gltf-primitive-builder.ts","../src/tileset/ext/ext-base.ts","../src/tileset/ext/ext-batchtable-hierarchy.ts","../src/tileset/ext/ext-pnts-draco.ts","../src/tileset/ext/ext-content-gltf.ts","../src/tileset/ext/ext-implicit-tiling.ts","../src/tileset/ext/ext-layers.ts","../src/tileset/ext/ext-metadata.ts","../src/tileset/ext/ext-multiple-content.ts","../src/tileset/core/def/tile.ts","../src/tileset/core/def/tileset.ts","../src/tileset/core/def/tile-bounding-volume.ts","../src/tileset/core/def/tile-content.ts","../src/tileset/core/def/property.ts","../src/tileset/core/def/asset.ts","../src/tileset/core/def/tile-header-base.ts","../src/tileset/core/def/tile-b3dm/header.ts","../src/tileset/core/def/enum/featuretable-type.ts","../src/tileset/core/def/featuretable/featuretable-base.ts","../src/tileset/core/def/featuretable/featuretable-b3dm.ts","../src/tileset/core/def/batchtable/batchtable-base.ts","../src/tileset/core/def/tile-b3dm/index.ts","../src/tileset/core/def/tile-i3dm/header.ts","../src/tileset/core/def/featuretable/featuretable-i3dm.ts","../src/tileset/core/def/tile-i3dm/index.ts","../src/tileset/core/def/tile-pnts/header.ts","../src/tileset/core/def/featuretable/featuretable-pnts.ts","../src/tileset/core/def/tile-pnts/index.ts","../src/tileset/core/def/tile-cmpt/index.ts","../src/tileset/core/def/featuretable/featuretable-vctr.ts","../src/tileset/core/def/enum/tile-refine.ts"],"sourcesContent":["function writeDefinedProperty(obj: any, name: string, data: any) {\r\n  if (data !== undefined)\r\n    Object.defineProperty(obj, name, {\r\n      value: data,\r\n      enumerable: true,\r\n      writable: true,\r\n      configurable: true\r\n    })\r\n}\r\n\r\nexport default writeDefinedProperty","import { GLTFExtensionBase } from \"src/gltf\";\r\n\r\nfunction writeExtensionsProperty(obj: any, exts?: Set<GLTFExtensionBase>) {\r\n  if (exts !== undefined) {\r\n    const extObj = {}\r\n    const _ = [...exts]\r\n    _.forEach(ext => {\r\n      Object.defineProperty(extObj, ext.name, {\r\n        value: ext.json()\r\n      })\r\n    })\r\n    Object.defineProperty(obj, 'extensions', {\r\n      value: extObj\r\n    })\r\n  }\r\n}\r\n\r\nexport default writeExtensionsProperty","import { GLTFExtensionBase } from \"src/gltf/ext\"\r\nimport { ISerializable, IValidate } from \"src/interfaces\"\r\nimport GLTFDocument from \"../gltf-document\"\r\n\r\nexport default class GLTFPropertyBase implements IValidate, ISerializable {\r\n  extensions?: Set<GLTFExtensionBase>\r\n  extras?: any\r\n  protected _doc?: GLTFDocument\r\n  get doc() {\r\n    return this._doc\r\n  }\r\n  set doc(doc) {\r\n    this._doc = doc\r\n  }\r\n  \r\n  validate() {\r\n    return true\r\n  }\r\n\r\n  json() {\r\n    return {}\r\n  }\r\n}","enum GLTFVersion {\r\n  TWO = \"2.0\",\r\n  ONE = \"1.0\"\r\n}\r\n\r\nexport const GLTFVersionValues = Object.freeze(Object.values(GLTFVersion) as Array<string>)\r\n\r\nexport default GLTFVersion","import { IGLTFAsset } from \"src/interfaces/IGLTFObj\"\r\nimport writeDefinedProperty from \"src/utils/io/writeDefinedProperty\"\r\nimport GLTFPropertyBase from \"./gltf-property-base\"\r\nimport GLTFVersion, { GLTFVersionValues } from \"./enum/gltf-version\"\r\n\r\nclass GLTFAsset extends GLTFPropertyBase {\r\n  version: GLTFVersion = GLTFVersion.TWO\r\n  generator?: string\r\n  copyright?: string\r\n  minVersion?: GLTFVersion\r\n\r\n  constructor() {\r\n    super()\r\n  }\r\n\r\n  validate() {\r\n    return true\r\n  }\r\n  json() {\r\n    const asset = {\r\n      version: this.version\r\n    }\r\n    writeDefinedProperty(asset, 'generator', this.generator)\r\n    writeDefinedProperty(asset, 'minVersion', this.minVersion)\r\n    writeDefinedProperty(asset, 'copyright', this.copyright)\r\n    writeDefinedProperty(asset, 'extensions', this.generator)\r\n    writeDefinedProperty(asset, 'extras', this.extras)\r\n\r\n    return asset\r\n  }\r\n\r\n  static readFromJson(json: IGLTFAsset): GLTFAsset {\r\n    const asset = new GLTFAsset()\r\n    if (GLTFVersionValues.includes(json.version)) {\r\n      asset.version = json.version as GLTFVersion\r\n    } else {\r\n      throw new Error(`[GLTFAsset.readFromJson()] 参数 version：${json.version} 不合法，请检查`)\r\n    }\r\n\r\n    if (json.minVersion !== undefined) {\r\n      if (GLTFVersionValues.includes(json.minVersion))\r\n        asset.minVersion = json.version as GLTFVersion\r\n      else\r\n        throw new Error(`[GLTFAsset.readFromJson()] 参数 minVersion: ${json.minVersion} 不合法，请检查`)\r\n    }\r\n    asset.copyright = json.copyright\r\n    asset.generator = json.generator\r\n    asset.extras = json.extras\r\n    return asset\r\n  }\r\n}\r\n\r\nexport default GLTFAsset","enum GLTFAttributeType {\r\n  SCALAR = \"SCALAR\",\r\n  VEC2 = \"VEC2\",\r\n  VEC3 = \"VEC3\",\r\n  VEC4 = \"VEC4\",\r\n  MAT2 = \"MAT2\",\r\n  MAT3 = \"MAT3\",\r\n  MAT4 = \"MAT4\",\r\n}\r\n\r\nexport const GLTFAttributeTypeValues = Object.freeze(Object.values(GLTFAttributeType) as Array<string>)\r\n\r\nexport const getAttributeTypeElementCount = (t: GLTFAttributeType): number => {\r\n  switch (t) {\r\n    case GLTFAttributeType.VEC2:\r\n      return 2\r\n    case GLTFAttributeType.VEC3:\r\n      return 3\r\n    case GLTFAttributeType.VEC4:\r\n    case GLTFAttributeType.MAT2:\r\n      return 4\r\n    case GLTFAttributeType.MAT3:\r\n      return 9\r\n    case GLTFAttributeType.MAT4:\r\n      return 16\r\n    default: // means SCALAR\r\n      return 1\r\n  }\r\n}\r\n\r\nexport default GLTFAttributeType","enum GLTFComponentType {\r\n  BYTE = 5120,\r\n  UNSIGNED_BYTE = 5121,\r\n  SHORT = 5122,\r\n  UNSIGNED_SHORT = 5123,\r\n  UNSIGNED_INT = 5125,\r\n  FLOAT = 5126\r\n}\r\n\r\nexport const GLTFComponentTypeValues = Object.freeze(Object.values(GLTFComponentType) as Array<number>)\r\n\r\nexport const getComponentTypeByteSize = (t: GLTFComponentType): number => {\r\n  switch (t) {\r\n    case GLTFComponentType.BYTE:\r\n    case GLTFComponentType.UNSIGNED_BYTE:\r\n      return 1\r\n    case GLTFComponentType.SHORT:\r\n    case GLTFComponentType.UNSIGNED_SHORT:\r\n      return 2\r\n    case GLTFComponentType.UNSIGNED_INT:\r\n      return 4\r\n    default: // means FLOAT 32bit 5126 - glTF 里没有 8 位浮点数\r\n      return 4\r\n  }\r\n}\r\n\r\nexport default GLTFComponentType","/**\r\n * @enum {GLTFAlphaMode} 透明度模式\r\n */\r\nenum GLTFAlphaMode {\r\n  /** \r\n   * @description 不透明。默认选项。\r\n   */\r\n  OPAQUE = \"OPAQUE\",\r\n  /**\r\n   * @description 透明度取决于 alphaCutOff 值，即半透明\r\n   */\r\n  MASK = \"MASK\",\r\n  /**\r\n   * @description 混合模式\r\n   */\r\n  BLEND = \"BLEND\"\r\n}\r\n\r\nexport const GLTFAlphaModeValues = Object.freeze(Object.values(GLTFAlphaMode) as Array<string>)\r\n\r\nexport default GLTFAlphaMode","enum GLTFFilter {\r\n  NEAREST = 9728,\r\n  LINEAR = 9729,\r\n  NEAREST_MIPMAP_NEAREST = 9984,\r\n  LINEAR_MIPMAP_NEAREST = 9985,\r\n  NEAREST_MIPMAP_LINEAR = 9986,\r\n  LINEAR_MIPMAP_LINEAR = 9987\r\n}\r\n\r\nexport const GLTFFilterValues = Object.freeze(Object.values(GLTFFilter) as Array<number>)\r\n\r\nexport default GLTFFilter","enum GLTFWrapMode {\r\n  REPEAT = 10497,\r\n  CLAMP_TO_EDGE = 33071,\r\n  MIRRORED_REPEAT = 33648,\r\n}\r\n\r\nexport const GLTFWrapModeValues = Object.freeze(Object.values(GLTFWrapMode) as Array<number>)\r\n\r\nexport default GLTFWrapMode","enum GLTFPrimitiveMode {\r\n  POINTS = 0,\r\n  LINES = 1,\r\n  LINE_LOOP = 2,\r\n  LINE_STRIP = 3,\r\n  TRIANGLES = 4,\r\n  TRIANGLE_STRIP = 5,\r\n  TRIANGLE_FAN = 6\r\n}\r\n\r\nexport const GLTFPrimitiveModeValues = Object.freeze(Object.values(GLTFPrimitiveMode) as Array<number>)\r\n\r\nexport default GLTFPrimitiveMode","enum GLTFVertexAttributeType {\r\n  POSITION = \"position\",\r\n  UV0 = \"uv0\",\r\n  UV1 = \"uv1\",\r\n  COLOR0 = \"color0\",\r\n  TANGENT = \"tangent\",\r\n  NORMAL = \"normal\",\r\n  JOINTS0 = \"joints0\",\r\n  WEIGHTS0 = \"weights0\",\r\n  BATCHID = \"batchid\"\r\n}\r\n\r\nexport default GLTFVertexAttributeType","enum MIME {\r\n  JPG = \"image/jpg\",\r\n  JPEG = \"image/jpeg\",\r\n  PNG = \"image/png\",\r\n  WEBP = \"image/webp\",\r\n  DDS = \"image/vnd-ms.dds\",\r\n}\r\n\r\nexport const MIMEValues = Object.freeze(Object.values(MIME) as string[])\r\n\r\nexport default MIME","import { IGLTFAccessorSparseIndices } from \"src/interfaces/IGLTFObj\"\r\nimport writeDefinedProperty from \"src/utils/io/writeDefinedProperty\"\r\nimport writeExtensionsProperty from \"src/utils/io/writeExtensionsProperty\"\r\nimport GLTFPropertyBase from \"./gltf-property-base\"\r\nimport { GLTFComponentType } from \"./enum\"\r\nimport { GLTFComponentTypeValues } from \"./enum/gltf-component-type\"\r\n\r\nclass GLTFAccessorSparseIndices extends GLTFPropertyBase {\r\n  bufferView: number\r\n  byteOffset: number\r\n  componentType: GLTFComponentType\r\n\r\n  constructor() {\r\n    super()\r\n  }\r\n  \r\n  validate() {\r\n    if (\r\n      this.componentType !== GLTFComponentType.UNSIGNED_BYTE &&\r\n      this.componentType !== GLTFComponentType.UNSIGNED_INT &&\r\n      this.componentType !== GLTFComponentType.UNSIGNED_SHORT\r\n    ) {\r\n      return false\r\n    }\r\n    return true\r\n  }\r\n\r\n  json() {\r\n    if (!this.validate()) {\r\n      throw new Error('[GLTFAccessorSparseIndices json()] 此 accessor.sparse.indices 的属性不合法，请检查')\r\n    }\r\n\r\n    const i = {\r\n      bufferView: this.bufferView,\r\n      byteOffset: this.byteOffset,\r\n      componentType: this.componentType,\r\n    }\r\n\r\n    writeExtensionsProperty(i, this.extensions)\r\n    writeDefinedProperty(i, 'extras', this.extras)\r\n\r\n    return i\r\n  }\r\n\r\n  static readFromJson(json: IGLTFAccessorSparseIndices) {\r\n    const accSparseIndices = new GLTFAccessorSparseIndices()\r\n\r\n    accSparseIndices.extras = json.extras\r\n    accSparseIndices.bufferView = json.bufferView\r\n    accSparseIndices.byteOffset = json.byteOffset\r\n    if (GLTFComponentTypeValues.includes(json.componentType)) {\r\n      accSparseIndices.componentType = json.componentType as GLTFComponentType\r\n    }\r\n\r\n    return accSparseIndices\r\n  }\r\n}\r\n\r\nexport default GLTFAccessorSparseIndices","import { IGLTFAccessorSparseValues } from \"src/interfaces/IGLTFObj\"\r\nimport writeDefinedProperty from \"src/utils/io/writeDefinedProperty\"\r\nimport writeExtensionsProperty from \"src/utils/io/writeExtensionsProperty\"\r\nimport GLTFPropertyBase from \"./gltf-property-base\"\r\n\r\nclass GLTFAccessorSparseValues extends GLTFPropertyBase {\r\n  bufferView: number\r\n  byteOffset?: number\r\n\r\n  constructor() {\r\n    super()\r\n  }\r\n  \r\n  validate() {\r\n    if (this.byteOffset && this.byteOffset < 0) {\r\n      return false\r\n    }\r\n    return true\r\n  }\r\n\r\n  json() {\r\n    if (!this.validate()) {\r\n      throw new Error('[GLTFAccessorSparseValues json()] 此 accessor.sparse.values 的属性不合法，请检查')\r\n    }\r\n\r\n    const v = {\r\n      bufferView: this.bufferView\r\n    }\r\n\r\n    writeDefinedProperty(v, 'byteOffset', this.byteOffset)\r\n    writeExtensionsProperty(v, this.extensions)\r\n    writeDefinedProperty(v, 'extras', this.extras)\r\n\r\n    return v\r\n  }\r\n\r\n  static readFromJson(json: IGLTFAccessorSparseValues) {\r\n    const vals = new GLTFAccessorSparseValues()\r\n\r\n    vals.bufferView = json.bufferView\r\n    vals.byteOffset = json.byteOffset\r\n    vals.extras = json.extras\r\n\r\n    return vals\r\n  }\r\n}\r\n\r\nexport default GLTFAccessorSparseValues","import { IGLTFAccessorSparse } from \"src/interfaces/IGLTFObj\"\r\nimport GLTFPropertyBase from \"./gltf-property-base\"\r\nimport GLTFAccessorSparseIndices from \"./gltf-accessor-sparse-indices\"\r\nimport GLTFAccessorSparseValues from \"./gltf-accessor-sparse-values\"\r\n\r\nclass GLTFAccessorSparse extends GLTFPropertyBase {\r\n  count: number\r\n  indices: GLTFAccessorSparseIndices\r\n  values: GLTFAccessorSparseValues\r\n\r\n  constructor() {\r\n    super()\r\n  }\r\n  \r\n  validate() {\r\n    return this.count > 0 && this.values.validate() && this.indices.validate()\r\n  }\r\n\r\n  json() {\r\n    if (!this.validate()) {\r\n      throw new Error('[GLTFAccessorSparse json()] 此 sparse 对象属性不合法，请检查属性')\r\n    }\r\n\r\n    const spr = {\r\n      count: this.count,\r\n      indices: this.indices.json(),\r\n      values: this.values.json()\r\n    }\r\n\r\n    return spr\r\n  }\r\n\r\n  static readFromJson(json: IGLTFAccessorSparse) {\r\n    const sparse = new GLTFAccessorSparse()\r\n    sparse.indices = GLTFAccessorSparseIndices.readFromJson(json.indices)\r\n    sparse.values = GLTFAccessorSparseValues.readFromJson(json.values)\r\n    sparse.extras = json.extras\r\n\r\n    return sparse\r\n  }\r\n}\r\n\r\nexport default GLTFAccessorSparse","import { IGLTFAccessor } from \"src/interfaces/IGLTFObj\"\r\nimport writeDefinedProperty from \"src/utils/io/writeDefinedProperty\"\r\nimport writeExtensionsProperty from \"src/utils/io/writeExtensionsProperty\"\r\nimport GLTFPropertyBase from \"./gltf-property-base\"\r\nimport { GLTFAttributeType, GLTFComponentType } from \"./enum\"\r\nimport { GLTFAttributeTypeValues } from \"./enum/gltf-attribute-type\"\r\nimport { GLTFComponentTypeValues } from \"./enum/gltf-component-type\"\r\nimport GLTFAccessorSparse from \"./gltf-accessor-sparse\"\r\n\r\nclass GLTFAccessor extends GLTFPropertyBase {\r\n  componentType: GLTFComponentType\r\n  count: number\r\n  type: GLTFAttributeType\r\n  max?: number[]\r\n  min?: number[]\r\n  sparse?: GLTFAccessorSparse\r\n  name?: string\r\n  normalized?: boolean\r\n  bufferView?: number\r\n  byteOffset?: number\r\n\r\n  constructor() {\r\n    super()\r\n  }\r\n  \r\n  validate() {\r\n    /** byteOffset 和 bufferView 必须同时存在 */\r\n    const offsetExist = this.byteOffset === undefined ? 1 : 0\r\n    const viewExist = this.bufferView === undefined ? 1 : 0\r\n    if (offsetExist + viewExist === 1) {\r\n      return false\r\n    }\r\n    if (this.byteOffset && this.byteOffset < 0) {\r\n      return false\r\n    }\r\n    return true\r\n  }\r\n\r\n  json() {\r\n    if (!this.validate()) {\r\n      throw new Error('[GLTFAccessor json()] 当前 accessor 属性不合法，请检查')\r\n    }\r\n\r\n    const acc = {\r\n      componentType: this.componentType,\r\n      type: this.type,\r\n      count: this.count,\r\n    }\r\n\r\n    writeDefinedProperty(acc, 'max', this.max)\r\n    writeDefinedProperty(acc, 'min', this.min)\r\n    writeDefinedProperty(acc, 'name', this.name)\r\n    writeDefinedProperty(acc, 'normalized', this.normalized)\r\n    writeDefinedProperty(acc, 'sparse', this.sparse !== undefined ? this.sparse.json() : undefined)\r\n    writeDefinedProperty(acc, 'bufferView', this.bufferView)\r\n    writeDefinedProperty(acc, 'byteOffset', this.byteOffset)\r\n    writeExtensionsProperty(acc, this.extensions)\r\n    writeDefinedProperty(acc, 'extras', this.extras)\r\n    \r\n    return acc\r\n  }\r\n\r\n  static fromJson(json: IGLTFAccessor) {\r\n    const acc = new GLTFAccessor()\r\n    if (GLTFComponentTypeValues.includes(json.componentType)) {\r\n      acc.componentType = json.componentType as GLTFComponentType\r\n    } else {\r\n      throw new Error('[GLTFAccessor.readFromJson()] 属性 componentType 非法')\r\n    }\r\n    acc.count = json.count\r\n    if (GLTFAttributeTypeValues.includes(json.type)) {\r\n      acc.type = json['type'] as GLTFAttributeType\r\n    } else {\r\n      throw new Error('[readGLTF() readAccessors()] 属性 type 非法')\r\n    }\r\n    acc.max = json.max\r\n    acc.min = json.min\r\n    if (json.sparse !== undefined) {\r\n      acc.sparse = GLTFAccessorSparse.readFromJson(json.sparse)\r\n    }\r\n    acc.normalized = json.normalized\r\n    acc.bufferView = json.bufferView\r\n    acc.byteOffset = json.byteOffset\r\n    acc.name = json.name\r\n    acc.extras = json.extras\r\n    return acc\r\n  }\r\n}\r\n\r\nexport default GLTFAccessor","/*\n * base64-arraybuffer\n * https://github.com/niklasvh/base64-arraybuffer\n *\n * Copyright (c) 2012 Niklas von Hertzen\n * Licensed under the MIT license.\n */\n(function(){\n  \"use strict\";\n\n  var chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\n\n  // Use a lookup table to find the index.\n  var lookup = new Uint8Array(256);\n  for (var i = 0; i < chars.length; i++) {\n    lookup[chars.charCodeAt(i)] = i;\n  }\n\n  exports.encode = function(arraybuffer) {\n    var bytes = new Uint8Array(arraybuffer),\n    i, len = bytes.length, base64 = \"\";\n\n    for (i = 0; i < len; i+=3) {\n      base64 += chars[bytes[i] >> 2];\n      base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];\n      base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];\n      base64 += chars[bytes[i + 2] & 63];\n    }\n\n    if ((len % 3) === 2) {\n      base64 = base64.substring(0, base64.length - 1) + \"=\";\n    } else if (len % 3 === 1) {\n      base64 = base64.substring(0, base64.length - 2) + \"==\";\n    }\n\n    return base64;\n  };\n\n  exports.decode =  function(base64) {\n    var bufferLength = base64.length * 0.75,\n    len = base64.length, i, p = 0,\n    encoded1, encoded2, encoded3, encoded4;\n\n    if (base64[base64.length - 1] === \"=\") {\n      bufferLength--;\n      if (base64[base64.length - 2] === \"=\") {\n        bufferLength--;\n      }\n    }\n\n    var arraybuffer = new ArrayBuffer(bufferLength),\n    bytes = new Uint8Array(arraybuffer);\n\n    for (i = 0; i < len; i+=4) {\n      encoded1 = lookup[base64.charCodeAt(i)];\n      encoded2 = lookup[base64.charCodeAt(i+1)];\n      encoded3 = lookup[base64.charCodeAt(i+2)];\n      encoded4 = lookup[base64.charCodeAt(i+3)];\n\n      bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n      bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n      bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n    }\n\n    return arraybuffer;\n  };\n})();\n","import { decode } from 'base64-arraybuffer'\r\nimport { IGLTFBuffer } from \"src/interfaces/IGLTFObj\"\r\nimport writeDefinedProperty from \"src/utils/io/writeDefinedProperty\"\r\nimport writeExtensionsProperty from \"src/utils/io/writeExtensionsProperty\"\r\nimport GLTFPropertyBase from \"./gltf-property-base\"\r\n\r\nfunction isDataUrl(str: string) {\r\n  return str.startsWith('data:')\r\n}\r\n\r\nclass GLTFBuffer extends GLTFPropertyBase {\r\n  byteLength: number = 0\r\n  uri?: string\r\n  bufferData?: ArrayBuffer\r\n\r\n  constructor() {\r\n    super()\r\n  }\r\n  \r\n  /** @deprecated */\r\n  get url() {\r\n    return this.uri\r\n  }\r\n\r\n  validate() {\r\n    return this.byteLength > 0\r\n  }\r\n\r\n  json() {\r\n    const bf = {\r\n      byteLength: this.byteLength\r\n    }\r\n    writeDefinedProperty(bf, 'uri', this.uri)\r\n    writeExtensionsProperty(bf, this.extensions)\r\n    writeDefinedProperty(bf, 'extras', this.extras)\r\n\r\n    return bf\r\n  }\r\n\r\n  static fromJson(json: IGLTFBuffer) {\r\n    const bf = new GLTFBuffer()\r\n    bf.uri = json.uri\r\n    if (bf.uri && isDataUrl(bf.uri)) {\r\n      bf.bufferData = decode(bf.uri.substr(bf.uri.indexOf(',') + 1))\r\n    }\r\n    bf.byteLength = json.byteLength\r\n    bf.extras = json.extras\r\n    // extensions 单独处理\r\n    return bf\r\n  }\r\n}\r\n\r\nexport default GLTFBuffer","enum GLTFBufferViewTarget {\r\n  ARRAY_BUFFER = 34962,\r\n  ELEMENT_ARRAY_BUFFER = 34963\r\n}\r\n\r\nexport const GLTFBufferViewTargetValues = Object.freeze(Object.values(GLTFBufferViewTarget) as Array<number>)\r\n\r\nexport default GLTFBufferViewTarget","import { IGLTFBufferView } from \"src/interfaces/IGLTFObj\"\r\nimport writeDefinedProperty from \"src/utils/io/writeDefinedProperty\"\r\nimport writeExtensionsProperty from \"src/utils/io/writeExtensionsProperty\"\r\nimport GLTFPropertyBase from \"./gltf-property-base\"\r\nimport GLTFBufferViewTarget, { GLTFBufferViewTargetValues } from \"./enum/gltf-bufferview-target\"\r\n\r\nclass GLTFBufferView extends GLTFPropertyBase {\r\n  buffer: number = 0\r\n  byteLength: number = 1\r\n  byteOffset?: number = 0\r\n  byteStride?: number = 4\r\n  target?: GLTFBufferViewTarget\r\n\r\n  constructor() {\r\n    super()\r\n  }\r\n  \r\n  validate() {\r\n    if (this.buffer < 0) {\r\n      return false\r\n    }\r\n    if (this.byteLength < 1) {\r\n      return false\r\n    }\r\n    if (this.byteOffset && this.byteOffset < 0) {\r\n      return false\r\n    }\r\n    if (this.byteStride && (this.byteStride % 4 !== 0 || this.byteStride > 252 || this.byteStride < 4)) {\r\n      return false\r\n    }\r\n    return true\r\n  }\r\n\r\n  json() {\r\n    if (!this.validate()) {\r\n      throw new Error('[GLTFBufferView json()] 当前 bufferView 属性不合法，请检查')\r\n    }\r\n\r\n    const bv = {\r\n      buffer: this.buffer,\r\n      byteLength: this.byteLength,\r\n    }\r\n\r\n    if (this.target === GLTFBufferViewTarget.ARRAY_BUFFER || this.target === GLTFBufferViewTarget.ELEMENT_ARRAY_BUFFER) {\r\n      writeDefinedProperty(bv, 'target', this.target)\r\n    }\r\n    writeDefinedProperty(bv, 'byteOffset', this.byteOffset)\r\n    if (this.byteStride !== 4) {\r\n      writeDefinedProperty(bv, 'byteStride', this.byteStride)\r\n    }\r\n    writeExtensionsProperty(bv, this.extensions)\r\n    writeDefinedProperty(bv, 'extras', this.extras)\r\n\r\n    return bv\r\n  }\r\n\r\n  static fromJson(json: IGLTFBufferView) {\r\n    const bv = new GLTFBufferView()\r\n    bv.buffer = json.buffer\r\n    bv.byteLength = json.byteLength\r\n    bv.byteOffset = json.byteOffset\r\n    bv.extras = json.extras\r\n    if (json.target !== undefined && GLTFBufferViewTargetValues.includes(json.target)) {\r\n      bv.target = json.target as GLTFBufferViewTarget\r\n    }\r\n    return bv\r\n  }\r\n}\r\n\r\nexport default GLTFBufferView","import { IGLTFScene } from \"src/interfaces/IGLTFObj\"\r\nimport writeDefinedProperty from \"src/utils/io/writeDefinedProperty\"\r\nimport writeExtensionsProperty from \"src/utils/io/writeExtensionsProperty\"\r\nimport GLTFPropertyBase from \"./gltf-property-base\"\r\n\r\nclass GLTFScene extends GLTFPropertyBase {\r\n  nodes: number[] = []\r\n  name?: string\r\n\r\n  constructor() {\r\n    super()\r\n  }\r\n  \r\n  validate() {\r\n    return this.nodes.length > 1\r\n  }\r\n\r\n  json() {\r\n    const s = {\r\n      nodes: this.nodes\r\n    }\r\n    writeDefinedProperty(s, 'name', this.name)\r\n    writeExtensionsProperty(s, this.extensions)\r\n    return s\r\n  }\r\n\r\n  static fromJson(json: IGLTFScene) {\r\n    const scene = new GLTFScene()\r\n    scene.name = json.name\r\n    scene.nodes = json.nodes\r\n    scene.extras = json.extras\r\n    return scene\r\n  }\r\n}\r\n\r\nexport default GLTFScene","import { IGLTFNode } from \"src/interfaces/IGLTFObj\"\r\nimport writeDefinedProperty from \"src/utils/io/writeDefinedProperty\"\r\nimport writeExtensionsProperty from \"src/utils/io/writeExtensionsProperty\"\r\nimport GLTFPropertyBase from \"./gltf-property-base\"\r\n\r\nfunction validateTransforms(nd: GLTFNode) {\r\n  let flag = true\r\n  if (nd.matrix !== undefined) {\r\n    if (nd.rotation !== undefined || nd.scale !== undefined || nd.translation !== undefined) {\r\n      flag = false\r\n    }\r\n  } else if (nd.rotation === undefined && nd.scale === undefined && nd.translation === undefined) {\r\n    flag = false\r\n  }\r\n\r\n  if (nd.rotation) {\r\n    flag = nd.rotation.every(r => r > 1 || r < -1)\r\n  }\r\n\r\n  return flag\r\n}\r\n\r\nclass GLTFNode extends GLTFPropertyBase {\r\n  children: number[] = []\r\n  mesh?: number\r\n  rotation?: [number, number, number, number]\r\n  translation?: [number, number, number]\r\n  weights?: number[]\r\n  name?: string\r\n  skin?: number\r\n  camera?: number\r\n  matrix?: [\r\n    number, number, number, number,\r\n    number, number, number, number,\r\n    number, number, number, number,\r\n    number, number, number, number\r\n  ]\r\n  scale?: [number, number, number]\r\n\r\n  constructor() {\r\n    super()\r\n  }\r\n\r\n  getMesh() {\r\n    if (this.doc === undefined) {\r\n      return null\r\n    }\r\n    if (this.mesh === undefined) {\r\n      return null\r\n    } else if (this.doc.meshes.length < this.mesh) {\r\n      return null\r\n    }\r\n    \r\n    return this.doc.meshes[this.mesh]\r\n  }\r\n\r\n  validate() {\r\n    if (!validateTransforms(this)) {\r\n      return false\r\n    }\r\n    if (this.weights && this.weights.length < 1) {\r\n      return false\r\n    } else if (this.weights !== undefined && this.mesh === undefined) {\r\n      return false\r\n    }\r\n    if (this.skin !== undefined && this.mesh === undefined) {\r\n      return false\r\n    }\r\n\r\n    if (this.children && this.children.length > 1) {\r\n      if (new Set(this.children).size !== this.children.length)\r\n        return false\r\n    }\r\n    return true\r\n  }\r\n\r\n  json() {\r\n    if (!this.validate()) {\r\n      throw new Error('[GLTFNode json()] 当前 node 属性不合法，请检查属性')\r\n    }\r\n\r\n    const n = {}\r\n\r\n    writeDefinedProperty(n, 'mesh', this.mesh)\r\n    writeDefinedProperty(n, 'rotation', this.rotation)\r\n    writeDefinedProperty(n, 'translation', this.translation)\r\n    writeDefinedProperty(n, 'scale', this.scale)\r\n    const m = this.matrix\r\n    if (m) {\r\n      if (!(m[0] === 1 && m[5] === 1 && m[10] === 1 && m[15] === 1)) {\r\n        writeDefinedProperty(n, 'matrix', this.matrix)\r\n      }\r\n    }\r\n    writeDefinedProperty(n, 'weights', this.weights)\r\n    writeDefinedProperty(n, 'skin', this.skin)\r\n    writeDefinedProperty(n, 'camera', this.camera)\r\n    writeDefinedProperty(n, 'name', this.name)\r\n\r\n    if (this.children && this.children.length !== 0) {\r\n      writeDefinedProperty(n, 'children', this.children)\r\n    }\r\n    writeExtensionsProperty(n, this.extensions)\r\n    writeDefinedProperty(n, 'extras', this.extras)\r\n\r\n    return n\r\n  }\r\n\r\n  static fromJson(json: IGLTFNode) {\r\n    const node = new GLTFNode()\r\n    node.name = json.name\r\n    node.mesh = json.mesh\r\n    node.matrix = json.matrix\r\n    node.rotation = json.rotation\r\n    node.scale = json.scale\r\n    node.skin = json.skin\r\n    node.children = json.children\r\n    node.weights = json.weights\r\n    node.translation = json.translation\r\n    node.camera = json.camera\r\n    node.extras = json.extras\r\n    return node\r\n  }\r\n}\r\n\r\nexport default GLTFNode","import { IGLTFPrimitiveAttribute } from \"src/interfaces/IGLTFObj\"\r\nimport ISerializable from \"src/interfaces/ISerializable\"\r\nimport writeDefinedProperty from \"src/utils/io/writeDefinedProperty\"\r\nimport IValidate from \"../../../interfaces/IValidate\"\r\n\r\nclass GLTFPrimitiveAttribute implements IValidate, ISerializable {\r\n\r\n  position: number\r\n  uv0?: number\r\n  uv1?: number\r\n  color0?: number\r\n  normal?: number\r\n  tangent?: number\r\n  joints0?: number\r\n  weights0?: number\r\n  /** 3rd */\r\n  _batchid?: number\r\n\r\n  static fromJson(json: IGLTFPrimitiveAttribute): GLTFPrimitiveAttribute {\r\n    const attr = new GLTFPrimitiveAttribute()\r\n    attr.position = json.POSITION\r\n    attr.uv0 = json.TEXCOORD_0\r\n    attr.uv1 = json.TEXCOORD_1\r\n    attr.color0 = json.COLOR_0\r\n    attr.normal = json.NORMAL\r\n    attr.tangent = json.TANGENT\r\n    attr.joints0 = json.JOINTS_0\r\n    attr.weights0 = json.WEIGHTS_0\r\n    attr._batchid = json._BATCHID\r\n    return attr\r\n  }\r\n\r\n  validate() {\r\n    return Object.values(this).every(k => k! < 0)\r\n  }\r\n\r\n  json() {\r\n    const attr = {\r\n      POSITION: this.position,\r\n    }\r\n    writeDefinedProperty(attr, 'NORMAL', this.normal)\r\n    writeDefinedProperty(attr, 'TANGENT', this.tangent)\r\n    writeDefinedProperty(attr, 'TEXCOORD_0', this.uv0)\r\n    writeDefinedProperty(attr, 'TEXCOORD_1', this.uv1)\r\n    writeDefinedProperty(attr, 'COLOR_0', this.color0)\r\n    writeDefinedProperty(attr, 'JOINTS_0', this.joints0)\r\n    writeDefinedProperty(attr, 'WEIGHTS_0', this.weights0)\r\n    writeDefinedProperty(attr, '_BATCHID', this._batchid)\r\n\r\n    return attr\r\n  }\r\n}\r\n\r\nexport default GLTFPrimitiveAttribute","import { IGLTFPrimitive } from \"src/interfaces/IGLTFObj\"\r\nimport writeDefinedProperty from \"src/utils/io/writeDefinedProperty\"\r\nimport writeExtensionsProperty from \"src/utils/io/writeExtensionsProperty\"\r\nimport GLTFPropertyBase from \"./gltf-property-base\"\r\nimport GLTFPrimitiveMode, { GLTFPrimitiveModeValues } from \"./enum/gltf-primitivemode\"\r\nimport GLTFPrimitiveAttribute from \"./gltf-primitive-attribute\"\r\n\r\nclass GLTFPrimitive extends GLTFPropertyBase {\r\n\r\n  attributes: GLTFPrimitiveAttribute = new GLTFPrimitiveAttribute()\r\n  indices?: number\r\n  material?: number\r\n  mode?: GLTFPrimitiveMode = GLTFPrimitiveMode.TRIANGLES\r\n\r\n  constructor() {\r\n    super()\r\n  }\r\n\r\n  /**\r\n   * 获取对应顶点属性的访问器\r\n   * @param {string} attrName 顶点属性名，允许值是：\r\n   * `'uv0'` | `'uv'`(等同uv0) | `'uv1'` | `'color0'` | `'color'` |\r\n   * `'normal'` | `'tangent'` | `'joints0'` | `'joints'` | `'weights0'` | \r\n   * `'weights'` | `'_batchid'` | `'batchid'`\r\n   * \r\n   * 大写小写均可，例如 `'UV0'` 和 `'uv'`、`'uv0'` 是一样的\r\n   * @returns {GLTFAccessor | undefined}\r\n   */\r\n  getAccessor(attrName: string) {\r\n    switch (attrName.toLowerCase()) {\r\n      case 'uv0':\r\n      case 'uv':\r\n        if (this.attributes.uv0 !== undefined) {\r\n          return this.doc?.accessors[this.attributes.uv0]\r\n        }\r\n        return undefined\r\n      case 'uv1':\r\n        if (this.attributes.uv1 !== undefined) {\r\n          return this.doc?.accessors[this.attributes.uv1]\r\n        }\r\n        return undefined\r\n      case 'color0':\r\n      case 'color':\r\n        if (this.attributes.color0 !== undefined) {\r\n          return this.doc?.accessors[this.attributes.color0]\r\n        }\r\n        return undefined\r\n      case 'normal':\r\n        if (this.attributes.normal !== undefined) {\r\n          return this.doc?.accessors[this.attributes.normal]\r\n        }\r\n        return undefined\r\n      case 'tangent':\r\n        if (this.attributes.tangent !== undefined) {\r\n          return this.doc?.accessors[this.attributes.tangent]\r\n        }\r\n        return undefined\r\n      case 'joints0':\r\n      case 'joints':\r\n        if (this.attributes.joints0 !== undefined) {\r\n          return this.doc?.accessors[this.attributes.joints0]\r\n        }\r\n        return undefined\r\n      case 'weights0':\r\n      case 'weights':\r\n        if (this.attributes.weights0 !== undefined) {\r\n          return this.doc?.accessors[this.attributes.weights0]\r\n        }\r\n        return undefined\r\n      case '_batchid':\r\n      case 'batchid':\r\n        if (this.attributes._batchid !== undefined) {\r\n          return this.doc?.accessors[this.attributes._batchid]\r\n        }\r\n        return undefined\r\n      default:\r\n        return this.doc?.accessors[this.attributes.position]\r\n    }\r\n  }\r\n\r\n  validate() {\r\n    if (this.attributes.validate() === false) {\r\n      return false\r\n    }\r\n    if (this.indices! < 0) {\r\n      return false\r\n    }\r\n    if (this.material! < 0) {\r\n      return false\r\n    }\r\n    return true\r\n  }\r\n\r\n  json() {\r\n    const prmt = {\r\n      attributes: this.attributes.json()\r\n    }\r\n    if (this.mode !== GLTFPrimitiveMode.TRIANGLES && this.mode !== undefined) {\r\n      writeDefinedProperty(prmt, 'mode', this.mode)\r\n    }\r\n    writeDefinedProperty(prmt, 'indices', this.indices)\r\n    writeDefinedProperty(prmt, 'material', this.material)\r\n    writeExtensionsProperty(prmt, this.extensions)\r\n    writeDefinedProperty(prmt, 'extras', this.extras)\r\n\r\n    return prmt\r\n  }\r\n\r\n  static fromJson(json: IGLTFPrimitive) {\r\n    const prmt = new GLTFPrimitive()\r\n    prmt.indices = json.indices\r\n    prmt.material = json.material\r\n    if (json.mode !== undefined && json.mode !== 4) {\r\n      if (GLTFPrimitiveModeValues.includes(json.mode)) {\r\n        prmt.mode = json.mode as GLTFPrimitiveMode\r\n      } else {\r\n        throw new Error(`[GLTFPrimitive.readFromJson()] mode：${json.mode} 不合法，请检查`)\r\n      }\r\n    }\r\n    prmt.attributes = GLTFPrimitiveAttribute.fromJson(json.attributes)\r\n    return prmt\r\n  }\r\n}\r\n\r\nexport default GLTFPrimitive","import { IGLTFMesh } from \"src/interfaces/IGLTFObj\"\r\nimport writeDefinedProperty from \"src/utils/io/writeDefinedProperty\"\r\nimport writeExtensionsProperty from \"src/utils/io/writeExtensionsProperty\"\r\nimport GLTFPropertyBase from \"./gltf-property-base\"\r\nimport GLTFPrimitive from \"./gltf-primitive\"\r\nimport { GLTFDocument } from \"..\"\r\n\r\nclass GLTFMesh extends GLTFPropertyBase {\r\n  primitives: GLTFPrimitive[] = []\r\n  weights?: number[]\r\n  name?: string\r\n  \r\n  constructor() {\r\n    super()\r\n  }\r\n  \r\n  set doc(value: GLTFDocument) {\r\n    this._doc = value\r\n    this.primitives.forEach(p => p.doc = value)\r\n  }\r\n\r\n  validate() {\r\n    let flag = false\r\n    if (this.primitives.every(primitive => primitive.validate())) {\r\n      flag = true\r\n    }\r\n    return flag\r\n  }\r\n\r\n  json() {\r\n    const mesh = {\r\n      primitives: this.primitives.map(prmt => prmt.json())\r\n    }\r\n    writeDefinedProperty(mesh, 'weights', this.weights)\r\n    writeDefinedProperty(mesh, 'name', this.name)\r\n    writeExtensionsProperty(mesh, this.extensions)\r\n\r\n    return mesh\r\n  }\r\n\r\n  static fromJson(json: IGLTFMesh) {\r\n    const mesh = new GLTFMesh()\r\n    mesh.name = json.name\r\n    mesh.primitives = json.primitives.map(priJson => GLTFPrimitive.fromJson(priJson))\r\n    mesh.weights = json.weights\r\n    mesh.extras = json.extras\r\n    return mesh\r\n  }\r\n}\r\n\r\nexport default GLTFMesh","import { IGLTFTextureInfo } from \"src/interfaces/IGLTFObj\"\r\nimport GLTFPropertyBase from \"./gltf-property-base\"\r\n\r\nclass GLTFTextureInfo extends GLTFPropertyBase {\r\n  index: number\r\n  texCoord: number\r\n\r\n  constructor(index: number, texCoord: number) {\r\n    super()\r\n    this.index = index\r\n    this.texCoord = texCoord\r\n  }\r\n\r\n  validate() {\r\n    return (this.index < 0 || this.texCoord < 0)\r\n  }\r\n\r\n  json() {\r\n    if (!this.validate()) {\r\n      throw new Error('[GLTFTextureInfo json()] 当前 textureinfo 对象属性不合法，请检查')\r\n    }\r\n\r\n    const tinfo = {\r\n      index: this.index,\r\n      texCoord: this.texCoord\r\n    }\r\n\r\n    return tinfo\r\n  }\r\n\r\n  static fromJson(json: IGLTFTextureInfo) {\r\n    const textureInfo = new GLTFTextureInfo(json.index, json.texCoord)\r\n    textureInfo.extras = json.extras\r\n\r\n    return textureInfo\r\n  }\r\n}\r\n\r\nexport default GLTFTextureInfo","import { IGLTFNormalTextureInfo } from \"src/interfaces/IGLTFObj\"\r\nimport writeDefinedProperty from \"src/utils/io/writeDefinedProperty\"\r\nimport writeExtensionsProperty from \"src/utils/io/writeExtensionsProperty\"\r\nimport GLTFTextureInfo from \"./gltf-texture-info\"\r\n\r\nclass GLTFNormalTextureInfo \r\nextends GLTFTextureInfo  {\r\n  scale: number\r\n\r\n  constructor(index: number, texCoord: number, scale: number) {\r\n    super(index, texCoord)\r\n    this.scale = scale\r\n  }\r\n\r\n  validate() {\r\n    return true\r\n  }\r\n\r\n  json() {\r\n    if (!this.validate()) {\r\n      throw new Error('[GLTFNormalTextureInfo json()] 当前 normal textureinfo 属性不合法，请检查')\r\n    }\r\n\r\n    const st = super.json()\r\n    writeDefinedProperty(st, 'scale', this.scale)\r\n    writeExtensionsProperty(st, this.extensions)\r\n    writeDefinedProperty(st, 'extras', this.extras)\r\n\r\n    return st\r\n  }\r\n\r\n  static fromJson(json: IGLTFNormalTextureInfo) {\r\n    const normalTextureInfo = new GLTFNormalTextureInfo(json.index, json.texCoord, json.scale)\r\n    normalTextureInfo.extras = json.extras\r\n    return normalTextureInfo\r\n  }\r\n}\r\n\r\nexport default GLTFNormalTextureInfo","import { IGLTFPbr } from \"src/interfaces/IGLTFObj\"\r\nimport writeDefinedProperty from \"src/utils/io/writeDefinedProperty\"\r\nimport writeExtensionsProperty from \"src/utils/io/writeExtensionsProperty\"\r\nimport GLTFPropertyBase from \"./gltf-property-base\"\r\nimport GLTFTextureInfo from \"./gltf-texture-info\"\r\n\r\nclass GLTFPbr extends GLTFPropertyBase {\r\n  baseColorFactor?: [number, number, number, number] = [1, 1, 1, 1]\r\n  baseColorTexture?: GLTFTextureInfo\r\n  metallicFactor?: number\r\n  roughnessFactor?: number\r\n  metallicRoughnessTexture?: GLTFTextureInfo\r\n\r\n  constructor() {\r\n    super()\r\n  }\r\n\r\n  validate() {\r\n    if (this.baseColorFactor && this.baseColorFactor.every(v => v < 0 || v > 1)) {\r\n      return false\r\n    }\r\n    if (this.roughnessFactor !== undefined) {\r\n      if (this.roughnessFactor > 1 || this.roughnessFactor < 0)\r\n        return false\r\n    }\r\n    if ((this.metallicFactor !== undefined && this.metallicFactor > 1)\r\n      || (this.metallicFactor !== undefined && this.metallicFactor < 0)) {\r\n      return false\r\n    }\r\n    if (this.baseColorTexture?.validate() === false || this.metallicRoughnessTexture?.validate() === false) {\r\n      return false\r\n    }\r\n    return true\r\n  }\r\n\r\n  json() {\r\n    if (this.validate() === false) {\r\n      throw new Error('[GLTFPbr json()] 此 pbr 对象属性有误，请检查')\r\n    }\r\n\r\n    const pbr = {}\r\n\r\n    if (this.baseColorFactor !== undefined && this.baseColorFactor.every(v => v !== 1.0)) {\r\n      writeDefinedProperty(pbr, 'baseColorFactor', this.baseColorFactor)\r\n    }\r\n    writeDefinedProperty(pbr, 'baseColorTexture', this.baseColorTexture !== undefined ? this.baseColorTexture.json() : undefined)\r\n    writeDefinedProperty(pbr, 'metallicFactor', this.metallicFactor && this.metallicFactor === 1 ? undefined : this.metallicFactor)\r\n    writeDefinedProperty(pbr, 'roughnessFactor', this.roughnessFactor && this.roughnessFactor === 1 ? undefined : this.roughnessFactor)\r\n    writeDefinedProperty(pbr, 'metallicRoughnessTexture', this.metallicRoughnessTexture !== undefined ? this.metallicRoughnessTexture.json() : undefined)\r\n    writeExtensionsProperty(pbr, this.extensions)\r\n    writeDefinedProperty(pbr, 'extras', this.extras)\r\n\r\n    return pbr\r\n  }\r\n\r\n  static fromJson(json: IGLTFPbr) {\r\n    const pbr = new GLTFPbr()\r\n\r\n    pbr.extras = json.extras\r\n    pbr.metallicFactor = json.metallicFactor\r\n    pbr.roughnessFactor = json.roughnessFactor\r\n    pbr.baseColorFactor = json.baseColorFactor\r\n    if (json.baseColorTexture !== undefined) {\r\n      pbr.baseColorTexture = GLTFTextureInfo.fromJson(json.baseColorTexture)\r\n    }\r\n    if (json.metallicRoughnessTexture !== undefined) {\r\n      pbr.metallicRoughnessTexture = GLTFTextureInfo.fromJson(json.metallicRoughnessTexture)\r\n    }\r\n\r\n    return pbr\r\n  }\r\n}\r\n\r\nexport default GLTFPbr","import { IGLTFMaterial } from \"src/interfaces/IGLTFObj\"\r\nimport writeDefinedProperty from \"src/utils/io/writeDefinedProperty\"\r\nimport writeExtensionsProperty from \"src/utils/io/writeExtensionsProperty\"\r\nimport GLTFPropertyBase from \"./gltf-property-base\"\r\nimport { GLTFAlphaMode } from \"./enum\"\r\nimport { GLTFAlphaModeValues } from \"./enum/gltf-alphamode\"\r\nimport GLTFNormalTextureInfo from \"./gltf-normal-texture-info\"\r\nimport GLTFOcclusionTextureInfo from \"./gltf-occlusion-texture-info\"\r\nimport GLTFPbr from \"./gltf-pbr\"\r\nimport GLTFTextureInfo from \"./gltf-texture-info\"\r\nimport { GLTFDocument } from \"..\"\r\n\r\nclass GLTFMaterial extends GLTFPropertyBase {\r\n  name?: string\r\n  pbrMetallicRoughness?: GLTFPbr\r\n  normalTexture?: GLTFNormalTextureInfo\r\n  occlusionTexture?: GLTFOcclusionTextureInfo\r\n  emissiveTexture?: GLTFTextureInfo\r\n  emissiveFactor?: [number, number, number] = [0, 0, 0]\r\n  alphaMode?: GLTFAlphaMode = GLTFAlphaMode.OPAQUE\r\n  alphaCutoff?: number = 0.5\r\n  doubleSided?: boolean = false\r\n\r\n  constructor() {\r\n    super()\r\n  }\r\n  \r\n  set doc(value: GLTFDocument) {\r\n    this._doc = value\r\n    if (this.pbrMetallicRoughness !== undefined) {\r\n      this.pbrMetallicRoughness.doc = value\r\n    }\r\n    if (this.normalTexture !== undefined) {\r\n      this.normalTexture.doc = value\r\n    }\r\n    if (this.emissiveTexture !== undefined) {\r\n      this.emissiveTexture.doc = value\r\n    }\r\n    if (this.occlusionTexture !== undefined) {\r\n      this.occlusionTexture.doc = value\r\n    }\r\n  }\r\n\r\n  validate() {\r\n    if (this.pbrMetallicRoughness?.validate() === false) {\r\n      return false\r\n    }\r\n    if (this.normalTexture?.validate() === false) {\r\n      return false\r\n    }\r\n    if (this.occlusionTexture?.validate() === false) {\r\n      return false\r\n    }\r\n    if (this.alphaMode === GLTFAlphaMode.MASK && this.alphaCutoff === undefined) {\r\n      return false\r\n    }\r\n    if (this.emissiveFactor?.every(v => v < 0 || v > 1)) {\r\n      return false\r\n    }\r\n    return true\r\n  }\r\n\r\n  json() {\r\n    if (!this.validate()) {\r\n      throw new Error('[GLTFMaterial json()] 此 material 对象的属性不合法，请检查')\r\n    }\r\n\r\n    const m = {}\r\n\r\n    writeDefinedProperty(m, 'name', this.name)\r\n    writeDefinedProperty(m, 'pbrMetallicRoughness', this.pbrMetallicRoughness !== undefined ? this.pbrMetallicRoughness.json() : undefined)\r\n    writeDefinedProperty(m, 'normalTexture', this.normalTexture !== undefined ? this.normalTexture.json() : undefined)\r\n    writeDefinedProperty(m, 'emissiveTexture', this.emissiveTexture !== undefined ? this.emissiveTexture.json() : undefined)\r\n    writeDefinedProperty(m, 'emissiveFactor', this.emissiveFactor)\r\n    writeDefinedProperty(m, 'alphaMode', this.alphaMode !== undefined && this.alphaMode !== GLTFAlphaMode.OPAQUE ? this.alphaMode : undefined)\r\n    writeDefinedProperty(m, 'alphaCutoff', this.alphaCutoff !== 0.5 && this.alphaCutoff !== undefined ? this.alphaCutoff : undefined)\r\n    writeDefinedProperty(m, 'alphaCutoff', this.doubleSided !== false && this.doubleSided !== undefined ? this.doubleSided : undefined)\r\n    writeExtensionsProperty(m, this.extensions)\r\n    writeDefinedProperty(m, 'extras', this.extras)\r\n    \r\n    return m\r\n  }\r\n\r\n  static fromJson(json: IGLTFMaterial) {\r\n    const mtl = new GLTFMaterial()\r\n    mtl.name = json.name\r\n    if (json.pbrMetallicRoughness !== undefined) {\r\n      mtl.pbrMetallicRoughness = GLTFPbr.fromJson(json.pbrMetallicRoughness)\r\n    }\r\n    if (json.normalTexture !== undefined) {\r\n      mtl.normalTexture = GLTFNormalTextureInfo.fromJson(json.normalTexture)\r\n    }\r\n    if (json.emissiveTexture !== undefined) {\r\n      mtl.emissiveTexture = GLTFTextureInfo.fromJson(json.emissiveTexture)\r\n    }\r\n    if (json.alphaMode !== undefined && GLTFAlphaModeValues.includes(json.alphaMode)) {\r\n      mtl.alphaMode = json.alphaMode as GLTFAlphaMode\r\n    }\r\n    mtl.doubleSided = json.doubleSided\r\n    mtl.emissiveFactor = json.emissiveFactor\r\n    mtl.alphaCutoff = json.alphaCutoff\r\n    mtl.extras = json.extras\r\n    return mtl\r\n  }\r\n}\r\n\r\nexport default GLTFMaterial","import { IGLTFTexture } from \"src/interfaces/IGLTFObj\"\r\nimport writeDefinedProperty from \"src/utils/io/writeDefinedProperty\"\r\nimport writeExtensionsProperty from \"src/utils/io/writeExtensionsProperty\"\r\nimport GLTFPropertyBase from \"./gltf-property-base\"\r\n\r\nclass GLTFTexture extends GLTFPropertyBase {\r\n  sampler?: number\r\n  source?: number\r\n  name?: string\r\n\r\n  constructor() {\r\n    super()\r\n  }\r\n  \r\n  validate() {\r\n    if (this.sampler === undefined && this.source === undefined && this.name === undefined)\r\n      return false\r\n    return true\r\n  }\r\n\r\n  json() {\r\n    const tx = {}\r\n    writeDefinedProperty(tx, 'name', this.name)\r\n    writeDefinedProperty(tx, 'source', this.source)\r\n    writeDefinedProperty(tx, 'sampler', this.sampler)\r\n    writeExtensionsProperty(tx, this.extensions)\r\n    writeDefinedProperty(tx, 'extras', this.extras)\r\n\r\n    return tx\r\n  }\r\n\r\n  static fromJson(json: IGLTFTexture) {\r\n    const tx = new GLTFTexture()\r\n    tx.name = json.name\r\n    tx.source = json.source\r\n    tx.sampler = json.sampler\r\n    tx.extras = json.extras\r\n    return tx\r\n  }\r\n}\r\n\r\nexport default GLTFTexture","/*\n * Copyright 2017 Sam Thorogood. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not\n * use this file except in compliance with the License. You may obtain a copy of\n * the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n * License for the specific language governing permissions and limitations under\n * the License.\n */\n\n(function(scope) {\n  'use strict';\n\n  // fail early\n  if (scope['TextEncoder'] && scope['TextDecoder']) {\n    return false;\n  }\n\n  /**\n   * @constructor\n   * @param {string=} utfLabel\n   */\n  function FastTextEncoder(utfLabel = 'utf-8') {\n    if (utfLabel !== 'utf-8') {\n      throw new RangeError(\n        `Failed to construct 'TextEncoder': The encoding label provided ('${utfLabel}') is invalid.`,\n      );\n    }\n  }\n\n  Object.defineProperty(FastTextEncoder.prototype, 'encoding', {\n    value: 'utf-8',\n  });\n\n  /**\n   * @param {string} string\n   * @param {{stream: boolean}=} options\n   * @return {!Uint8Array}\n   */\n  FastTextEncoder.prototype.encode = function(\n    string,\n    options = { stream: false },\n  ) {\n    if (options.stream) {\n      throw new Error(`Failed to encode: the 'stream' option is unsupported.`);\n    }\n\n    let pos = 0;\n    const len = string.length;\n    const out = [];\n\n    let at = 0; // output position\n    let tlen = Math.max(32, len + (len >> 1) + 7); // 1.5x size\n    let target = new Uint8Array((tlen >> 3) << 3); // ... but at 8 byte offset\n\n    while (pos < len) {\n      let value = string.charCodeAt(pos++);\n      if (value >= 0xd800 && value <= 0xdbff) {\n        // high surrogate\n        if (pos < len) {\n          const extra = string.charCodeAt(pos);\n          if ((extra & 0xfc00) === 0xdc00) {\n            ++pos;\n            value = ((value & 0x3ff) << 10) + (extra & 0x3ff) + 0x10000;\n          }\n        }\n        if (value >= 0xd800 && value <= 0xdbff) {\n          continue; // drop lone surrogate\n        }\n      }\n\n      // expand the buffer if we couldn't write 4 bytes\n      if (at + 4 > target.length) {\n        tlen += 8; // minimum extra\n        tlen *= 1.0 + (pos / string.length) * 2; // take 2x the remaining\n        tlen = (tlen >> 3) << 3; // 8 byte offset\n\n        const update = new Uint8Array(tlen);\n        update.set(target);\n        target = update;\n      }\n\n      if ((value & 0xffffff80) === 0) {\n        // 1-byte\n        target[at++] = value; // ASCII\n        continue;\n      } else if ((value & 0xfffff800) === 0) {\n        // 2-byte\n        target[at++] = ((value >> 6) & 0x1f) | 0xc0;\n      } else if ((value & 0xffff0000) === 0) {\n        // 3-byte\n        target[at++] = ((value >> 12) & 0x0f) | 0xe0;\n        target[at++] = ((value >> 6) & 0x3f) | 0x80;\n      } else if ((value & 0xffe00000) === 0) {\n        // 4-byte\n        target[at++] = ((value >> 18) & 0x07) | 0xf0;\n        target[at++] = ((value >> 12) & 0x3f) | 0x80;\n        target[at++] = ((value >> 6) & 0x3f) | 0x80;\n      } else {\n        // FIXME: do we care\n        continue;\n      }\n\n      target[at++] = (value & 0x3f) | 0x80;\n    }\n\n    return target.slice(0, at);\n  };\n\n  /**\n   * @constructor\n   * @param {string=} utfLabel\n   * @param {{fatal: boolean}=} options\n   */\n  function FastTextDecoder(utfLabel = 'utf-8', options = { fatal: false }) {\n    if (utfLabel !== 'utf-8') {\n      throw new RangeError(\n        `Failed to construct 'TextDecoder': The encoding label provided ('${utfLabel}') is invalid.`,\n      );\n    }\n    if (options.fatal) {\n      throw new Error(\n        `Failed to construct 'TextDecoder': the 'fatal' option is unsupported.`,\n      );\n    }\n  }\n\n  Object.defineProperty(FastTextDecoder.prototype, 'encoding', {\n    value: 'utf-8',\n  });\n\n  Object.defineProperty(FastTextDecoder.prototype, 'fatal', { value: false });\n\n  Object.defineProperty(FastTextDecoder.prototype, 'ignoreBOM', {\n    value: false,\n  });\n\n  /**\n   * @param {(!ArrayBuffer|!ArrayBufferView)} buffer\n   * @param {{stream: boolean}=} options\n   */\n  FastTextDecoder.prototype.decode = function(\n    buffer,\n    options = { stream: false },\n  ) {\n    if (options['stream']) {\n      throw new Error(`Failed to decode: the 'stream' option is unsupported.`);\n    }\n\n    const bytes = new Uint8Array(buffer);\n    let pos = 0;\n    const len = bytes.length;\n    const out = [];\n\n    while (pos < len) {\n      const byte1 = bytes[pos++];\n      if (byte1 === 0) {\n        break; // NULL\n      }\n\n      if ((byte1 & 0x80) === 0) {\n        // 1-byte\n        out.push(byte1);\n      } else if ((byte1 & 0xe0) === 0xc0) {\n        // 2-byte\n        const byte2 = bytes[pos++] & 0x3f;\n        out.push(((byte1 & 0x1f) << 6) | byte2);\n      } else if ((byte1 & 0xf0) === 0xe0) {\n        const byte2 = bytes[pos++] & 0x3f;\n        const byte3 = bytes[pos++] & 0x3f;\n        out.push(((byte1 & 0x1f) << 12) | (byte2 << 6) | byte3);\n      } else if ((byte1 & 0xf8) === 0xf0) {\n        const byte2 = bytes[pos++] & 0x3f;\n        const byte3 = bytes[pos++] & 0x3f;\n        const byte4 = bytes[pos++] & 0x3f;\n\n        // this can be > 0xffff, so possibly generate surrogates\n        let codepoint =\n          ((byte1 & 0x07) << 0x12) | (byte2 << 0x0c) | (byte3 << 0x06) | byte4;\n        if (codepoint > 0xffff) {\n          // codepoint &= ~0x10000;\n          codepoint -= 0x10000;\n          out.push(((codepoint >>> 10) & 0x3ff) | 0xd800);\n          codepoint = 0xdc00 | (codepoint & 0x3ff);\n        }\n        out.push(codepoint);\n      } else {\n        // FIXME: we're ignoring this\n      }\n    }\n\n    return String.fromCharCode.apply(null, out);\n  };\n\n  scope['TextEncoder'] = FastTextEncoder;\n  scope['TextDecoder'] = FastTextDecoder;\n})(\n  typeof window !== 'undefined'\n    ? window\n    : typeof self !== 'undefined'\n    ? self\n    : this,\n);\n","// eslint-disable-next-line import/no-unassigned-import\nimport './text-encoding-polyfill';\n\nconst decoder = new TextDecoder('utf-8');\n\nexport function decode(bytes: Uint8Array): string {\n  return decoder.decode(bytes);\n}\n\nconst encoder = new TextEncoder();\n\nexport function encode(str: string): Uint8Array {\n  return encoder.encode(str);\n}\n","import { decode, encode } from './utf8';\n\nconst defaultByteLength = 1024 * 8;\n\ntype InputData = number | ArrayBufferLike | ArrayBufferView | IOBuffer | Buffer;\n\ninterface IOBufferOptions {\n  /**\n   * Ignore the first n bytes of the ArrayBuffer.\n   */\n  offset?: number;\n}\n\nexport class IOBuffer {\n  /**\n   * Reference to the internal ArrayBuffer object.\n   */\n  public buffer: ArrayBufferLike;\n\n  /**\n   * Byte length of the internal ArrayBuffer.\n   */\n  public byteLength: number;\n\n  /**\n   * Byte offset of the internal ArrayBuffer.\n   */\n  public byteOffset: number;\n\n  /**\n   * Byte length of the internal ArrayBuffer.\n   */\n  public length: number;\n\n  /**\n   * The current offset of the buffer's pointer.\n   */\n  public offset: number;\n\n  private lastWrittenByte: number;\n  private littleEndian: boolean;\n\n  private _data: DataView;\n  private _mark: number;\n  private _marks: number[];\n\n  /**\n   * @param data - The data to construct the IOBuffer with.\n   * If data is a number, it will be the new buffer's length<br>\n   * If data is `undefined`, the buffer will be initialized with a default length of 8Kb<br>\n   * If data is an ArrayBuffer, SharedArrayBuffer, an ArrayBufferView (Typed Array), an IOBuffer instance,\n   * or a Node.js Buffer, a view will be created over the underlying ArrayBuffer.\n   * @param options\n   */\n  public constructor(\n    data: InputData = defaultByteLength,\n    options: IOBufferOptions = {},\n  ) {\n    let dataIsGiven = false;\n    if (typeof data === 'number') {\n      data = new ArrayBuffer(data);\n    } else {\n      dataIsGiven = true;\n      this.lastWrittenByte = data.byteLength;\n    }\n\n    const offset = options.offset ? options.offset >>> 0 : 0;\n    const byteLength = data.byteLength - offset;\n    let dvOffset = offset;\n    if (ArrayBuffer.isView(data) || data instanceof IOBuffer) {\n      if (data.byteLength !== data.buffer.byteLength) {\n        dvOffset = data.byteOffset + offset;\n      }\n      data = data.buffer;\n    }\n    if (dataIsGiven) {\n      this.lastWrittenByte = byteLength;\n    } else {\n      this.lastWrittenByte = 0;\n    }\n    this.buffer = data;\n    this.length = byteLength;\n    this.byteLength = byteLength;\n    this.byteOffset = dvOffset;\n    this.offset = 0;\n    this.littleEndian = true;\n    this._data = new DataView(this.buffer, dvOffset, byteLength);\n    this._mark = 0;\n    this._marks = [];\n  }\n\n  /**\n   * Checks if the memory allocated to the buffer is sufficient to store more\n   * bytes after the offset.\n   * @param byteLength - The needed memory in bytes.\n   * @returns `true` if there is sufficient space and `false` otherwise.\n   */\n  public available(byteLength = 1): boolean {\n    return this.offset + byteLength <= this.length;\n  }\n\n  /**\n   * Check if little-endian mode is used for reading and writing multi-byte\n   * values.\n   * @returns `true` if little-endian mode is used, `false` otherwise.\n   */\n  public isLittleEndian(): boolean {\n    return this.littleEndian;\n  }\n\n  /**\n   * Set little-endian mode for reading and writing multi-byte values.\n   */\n  public setLittleEndian(): this {\n    this.littleEndian = true;\n    return this;\n  }\n\n  /**\n   * Check if big-endian mode is used for reading and writing multi-byte values.\n   * @returns `true` if big-endian mode is used, `false` otherwise.\n   */\n  public isBigEndian(): boolean {\n    return !this.littleEndian;\n  }\n\n  /**\n   * Switches to big-endian mode for reading and writing multi-byte values.\n   */\n  public setBigEndian(): this {\n    this.littleEndian = false;\n    return this;\n  }\n\n  /**\n   * Move the pointer n bytes forward.\n   * @param n - Number of bytes to skip.\n   */\n  public skip(n = 1): this {\n    this.offset += n;\n    return this;\n  }\n\n  /**\n   * Move the pointer to the given offset.\n   * @param offset\n   */\n  public seek(offset: number): this {\n    this.offset = offset;\n    return this;\n  }\n\n  /**\n   * Store the current pointer offset.\n   * @see {@link IOBuffer#reset}\n   */\n  public mark(): this {\n    this._mark = this.offset;\n    return this;\n  }\n\n  /**\n   * Move the pointer back to the last pointer offset set by mark.\n   * @see {@link IOBuffer#mark}\n   */\n  public reset(): this {\n    this.offset = this._mark;\n    return this;\n  }\n\n  /**\n   * Push the current pointer offset to the mark stack.\n   * @see {@link IOBuffer#popMark}\n   */\n  public pushMark(): this {\n    this._marks.push(this.offset);\n    return this;\n  }\n\n  /**\n   * Pop the last pointer offset from the mark stack, and set the current\n   * pointer offset to the popped value.\n   * @see {@link IOBuffer#pushMark}\n   */\n  public popMark(): this {\n    const offset = this._marks.pop();\n    if (offset === undefined) {\n      throw new Error('Mark stack empty');\n    }\n    this.seek(offset);\n    return this;\n  }\n\n  /**\n   * Move the pointer offset back to 0.\n   */\n  public rewind(): this {\n    this.offset = 0;\n    return this;\n  }\n\n  /**\n   * Make sure the buffer has sufficient memory to write a given byteLength at\n   * the current pointer offset.\n   * If the buffer's memory is insufficient, this method will create a new\n   * buffer (a copy) with a length that is twice (byteLength + current offset).\n   * @param byteLength\n   */\n  public ensureAvailable(byteLength = 1): this {\n    if (!this.available(byteLength)) {\n      const lengthNeeded = this.offset + byteLength;\n      const newLength = lengthNeeded * 2;\n      const newArray = new Uint8Array(newLength);\n      newArray.set(new Uint8Array(this.buffer));\n      this.buffer = newArray.buffer;\n      this.length = this.byteLength = newLength;\n      this._data = new DataView(this.buffer);\n    }\n    return this;\n  }\n\n  /**\n   * Read a byte and return false if the byte's value is 0, or true otherwise.\n   * Moves pointer forward by one byte.\n   */\n  public readBoolean(): boolean {\n    return this.readUint8() !== 0;\n  }\n\n  /**\n   * Read a signed 8-bit integer and move pointer forward by 1 byte.\n   */\n  public readInt8(): number {\n    return this._data.getInt8(this.offset++);\n  }\n\n  /**\n   * Read an unsigned 8-bit integer and move pointer forward by 1 byte.\n   */\n  public readUint8(): number {\n    return this._data.getUint8(this.offset++);\n  }\n\n  /**\n   * Alias for {@link IOBuffer#readUint8}.\n   */\n  public readByte(): number {\n    return this.readUint8();\n  }\n\n  /**\n   * Read `n` bytes and move pointer forward by `n` bytes.\n   */\n  public readBytes(n = 1): Uint8Array {\n    const bytes = new Uint8Array(n);\n    for (let i = 0; i < n; i++) {\n      bytes[i] = this.readByte();\n    }\n    return bytes;\n  }\n\n  /**\n   * Read a 16-bit signed integer and move pointer forward by 2 bytes.\n   */\n  public readInt16(): number {\n    const value = this._data.getInt16(this.offset, this.littleEndian);\n    this.offset += 2;\n    return value;\n  }\n\n  /**\n   * Read a 16-bit unsigned integer and move pointer forward by 2 bytes.\n   */\n  public readUint16(): number {\n    const value = this._data.getUint16(this.offset, this.littleEndian);\n    this.offset += 2;\n    return value;\n  }\n\n  /**\n   * Read a 32-bit signed integer and move pointer forward by 4 bytes.\n   */\n  public readInt32(): number {\n    const value = this._data.getInt32(this.offset, this.littleEndian);\n    this.offset += 4;\n    return value;\n  }\n\n  /**\n   * Read a 32-bit unsigned integer and move pointer forward by 4 bytes.\n   */\n  public readUint32(): number {\n    const value = this._data.getUint32(this.offset, this.littleEndian);\n    this.offset += 4;\n    return value;\n  }\n\n  /**\n   * Read a 32-bit floating number and move pointer forward by 4 bytes.\n   */\n  public readFloat32(): number {\n    const value = this._data.getFloat32(this.offset, this.littleEndian);\n    this.offset += 4;\n    return value;\n  }\n\n  /**\n   * Read a 64-bit floating number and move pointer forward by 8 bytes.\n   */\n  public readFloat64(): number {\n    const value = this._data.getFloat64(this.offset, this.littleEndian);\n    this.offset += 8;\n    return value;\n  }\n\n  /**\n   * Read a 1-byte ASCII character and move pointer forward by 1 byte.\n   */\n  public readChar(): string {\n    return String.fromCharCode(this.readInt8());\n  }\n\n  /**\n   * Read `n` 1-byte ASCII characters and move pointer forward by `n` bytes.\n   */\n  public readChars(n = 1): string {\n    let result = '';\n    for (let i = 0; i < n; i++) {\n      result += this.readChar();\n    }\n    return result;\n  }\n\n  /**\n   * Read the next `n` bytes, return a UTF-8 decoded string and move pointer\n   * forward by `n` bytes.\n   */\n  public readUtf8(n = 1): string {\n    return decode(this.readBytes(n));\n  }\n\n  /**\n   * Write 0xff if the passed value is truthy, 0x00 otherwise and move pointer\n   * forward by 1 byte.\n   */\n  public writeBoolean(value: unknown): this {\n    this.writeUint8(value ? 0xff : 0x00);\n    return this;\n  }\n\n  /**\n   * Write `value` as an 8-bit signed integer and move pointer forward by 1 byte.\n   */\n  public writeInt8(value: number): this {\n    this.ensureAvailable(1);\n    this._data.setInt8(this.offset++, value);\n    this._updateLastWrittenByte();\n    return this;\n  }\n\n  /**\n   * Write `value` as an 8-bit unsigned integer and move pointer forward by 1\n   * byte.\n   */\n  public writeUint8(value: number): this {\n    this.ensureAvailable(1);\n    this._data.setUint8(this.offset++, value);\n    this._updateLastWrittenByte();\n    return this;\n  }\n\n  /**\n   * An alias for {@link IOBuffer#writeUint8}.\n   */\n  public writeByte(value: number): this {\n    return this.writeUint8(value);\n  }\n\n  /**\n   * Write all elements of `bytes` as uint8 values and move pointer forward by\n   * `bytes.length` bytes.\n   */\n  public writeBytes(bytes: ArrayLike<number>): this {\n    this.ensureAvailable(bytes.length);\n    for (let i = 0; i < bytes.length; i++) {\n      this._data.setUint8(this.offset++, bytes[i]);\n    }\n    this._updateLastWrittenByte();\n    return this;\n  }\n\n  /**\n   * Write `value` as a 16-bit signed integer and move pointer forward by 2\n   * bytes.\n   */\n  public writeInt16(value: number): this {\n    this.ensureAvailable(2);\n    this._data.setInt16(this.offset, value, this.littleEndian);\n    this.offset += 2;\n    this._updateLastWrittenByte();\n    return this;\n  }\n\n  /**\n   * Write `value` as a 16-bit unsigned integer and move pointer forward by 2\n   * bytes.\n   */\n  public writeUint16(value: number): this {\n    this.ensureAvailable(2);\n    this._data.setUint16(this.offset, value, this.littleEndian);\n    this.offset += 2;\n    this._updateLastWrittenByte();\n    return this;\n  }\n\n  /**\n   * Write `value` as a 32-bit signed integer and move pointer forward by 4\n   * bytes.\n   */\n  public writeInt32(value: number): this {\n    this.ensureAvailable(4);\n    this._data.setInt32(this.offset, value, this.littleEndian);\n    this.offset += 4;\n    this._updateLastWrittenByte();\n    return this;\n  }\n\n  /**\n   * Write `value` as a 32-bit unsigned integer and move pointer forward by 4\n   * bytes.\n   */\n  public writeUint32(value: number): this {\n    this.ensureAvailable(4);\n    this._data.setUint32(this.offset, value, this.littleEndian);\n    this.offset += 4;\n    this._updateLastWrittenByte();\n    return this;\n  }\n\n  /**\n   * Write `value` as a 32-bit floating number and move pointer forward by 4\n   * bytes.\n   */\n  public writeFloat32(value: number): this {\n    this.ensureAvailable(4);\n    this._data.setFloat32(this.offset, value, this.littleEndian);\n    this.offset += 4;\n    this._updateLastWrittenByte();\n    return this;\n  }\n\n  /**\n   * Write `value` as a 64-bit floating number and move pointer forward by 8\n   * bytes.\n   */\n  public writeFloat64(value: number): this {\n    this.ensureAvailable(8);\n    this._data.setFloat64(this.offset, value, this.littleEndian);\n    this.offset += 8;\n    this._updateLastWrittenByte();\n    return this;\n  }\n\n  /**\n   * Write the charCode of `str`'s first character as an 8-bit unsigned integer\n   * and move pointer forward by 1 byte.\n   */\n  public writeChar(str: string): this {\n    return this.writeUint8(str.charCodeAt(0));\n  }\n\n  /**\n   * Write the charCodes of all `str`'s characters as 8-bit unsigned integers\n   * and move pointer forward by `str.length` bytes.\n   */\n  public writeChars(str: string): this {\n    for (let i = 0; i < str.length; i++) {\n      this.writeUint8(str.charCodeAt(i));\n    }\n    return this;\n  }\n\n  /**\n   * UTF-8 encode and write `str` to the current pointer offset and move pointer\n   * forward according to the encoded length.\n   */\n  public writeUtf8(str: string): this {\n    return this.writeBytes(encode(str));\n  }\n\n  /**\n   * Export a Uint8Array view of the internal buffer.\n   * The view starts at the byte offset and its length\n   * is calculated to stop at the last written byte or the original length.\n   */\n  public toArray(): Uint8Array {\n    return new Uint8Array(this.buffer, this.byteOffset, this.lastWrittenByte);\n  }\n\n  /**\n   * Update the last written byte offset\n   * @private\n   */\n  private _updateLastWrittenByte(): void {\n    if (this.offset > this.lastWrittenByte) {\n      this.lastWrittenByte = this.offset;\n    }\n  }\n}\n","import { decode } from 'base64-arraybuffer'\r\nimport { IGLTFImage } from \"src/interfaces/IGLTFObj\"\r\nimport writeDefinedProperty from \"src/utils/io/writeDefinedProperty\"\r\nimport writeExtensionsProperty from \"src/utils/io/writeExtensionsProperty\"\r\nimport GLTFPropertyBase from \"./gltf-property-base\"\r\nimport MIME from \"./enum/mime\"\r\nimport { IOBuffer } from 'iobuffer'\r\n\r\nclass GLTFImage extends GLTFPropertyBase {\r\n  uri?: string\r\n  bufferView?: number\r\n  mimeType?: MIME\r\n  name?: string\r\n\r\n  constructor() {\r\n    super()\r\n  }\r\n\r\n  get isEncodeWithUri() {\r\n    return this.uri === undefined && this.bufferView !== undefined\r\n  }\r\n  \r\n  get getImageData() {\r\n    if (this.validate() === false) {\r\n      throw new Error('[GLTFImage getImageData()] 当前 image 对象属性有问题，请检查')\r\n    }\r\n    if (this.uri && this.isEncodeWithUri) {\r\n      return decode(this.uri)\r\n    }\r\n\r\n    if (this.doc === undefined) {\r\n      throw new Error('')\r\n    } else {\r\n      if (this.doc.buffers.length === 0 || this.doc.bufferViews.length === 0) {\r\n        throw new Error('')\r\n      } else {        \r\n        const bv = this.doc.bufferViews[this.bufferView!]\r\n        const bf = this.doc.buffers[bv.buffer]\r\n        // 有的时候 byteOffset 并不会指明，那么 bufferView 的 buffer 索引即它自己的索引\r\n        const begin = bv.byteOffset === undefined ? this.doc.bufferViews.indexOf(bv) : bv.byteOffset\r\n        const length = bv.byteLength\r\n        const bufferdata = bf.bufferData\r\n        if (bufferdata !== undefined) {\r\n          return new IOBuffer(bufferdata)\r\n          .skip(begin)\r\n          .readBytes(length)\r\n          .buffer\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  validate() {\r\n    if (this.uri !== undefined && this.bufferView !== undefined) {\r\n      return false\r\n    }\r\n    if (this.bufferView !== undefined) {\r\n      if (this.mimeType === undefined) {\r\n        return false\r\n      }\r\n    }\r\n    return true\r\n  }\r\n\r\n  json() {\r\n    const img = {}\r\n    writeDefinedProperty(img, 'name', this.name)\r\n    writeDefinedProperty(img, 'bufferView', this.bufferView)\r\n    writeDefinedProperty(img, 'uri', this.uri)\r\n    writeDefinedProperty(img, 'mimeType', this.mimeType)\r\n    writeExtensionsProperty(img, this.extensions)\r\n    writeDefinedProperty(img, 'extras', this.extras)\r\n\r\n    return img\r\n  }\r\n\r\n  static fromJson(json: IGLTFImage) {\r\n    const img = new GLTFImage()\r\n    img.name = json.name\r\n    img.bufferView = json.bufferView\r\n    if (json.mimeType !== undefined) {\r\n      if (json.mimeType in MIME) {\r\n        img.mimeType = json.mimeType as MIME\r\n      } else {\r\n        throw new Error('[GLTFImage.readFromJson()] 不支持的 mime 类型')\r\n      }\r\n    }\r\n    img.extras = json.extras\r\n    return img\r\n  }\r\n}\r\n\r\nexport default GLTFImage","import { IGLTFSampler } from 'src/interfaces/IGLTFObj'\r\nimport writeDefinedProperty from 'src/utils/io/writeDefinedProperty'\r\nimport writeExtensionsProperty from 'src/utils/io/writeExtensionsProperty'\r\nimport GLTFPropertyBase from \"./gltf-property-base\"\r\nimport GLTFFilter, { GLTFFilterValues } from './enum/gltf-filter'\r\nimport GLTFWrapMode, { GLTFWrapModeValues } from './enum/gltf-wrapmode'\r\n\r\nclass GLTFSampler extends GLTFPropertyBase {\r\n  magFilter?: GLTFFilter\r\n  minFilter?: GLTFFilter\r\n  wrapS?: GLTFWrapMode\r\n  wrapT?: GLTFWrapMode\r\n  name?: string\r\n\r\n  constructor() {\r\n    super()\r\n  }\r\n  \r\n  validate() {\r\n    // 注意默认值检查\r\n    if (this.magFilter === undefined && this.minFilter === undefined && this.wrapS === undefined && this.wrapT === undefined)\r\n      return false\r\n    return true\r\n  }\r\n\r\n  json() {\r\n    if (!this.validate()) {\r\n      throw new Error('[GLTFSampler json()] 当前 sampler 对象的属性不合法，请检查')\r\n    }\r\n\r\n    const spl = {}\r\n    writeDefinedProperty(spl, 'magFilter', this.magFilter)\r\n    writeDefinedProperty(spl, 'minFilter', this.minFilter)\r\n    writeDefinedProperty(spl, 'wrapS', this.wrapS)\r\n    writeDefinedProperty(spl, 'wrapT', this.wrapT)\r\n    writeDefinedProperty(spl, 'name', this.name)\r\n    writeExtensionsProperty(spl, this.extensions)\r\n    writeDefinedProperty(spl, 'extras', this.extras)\r\n\r\n    return spl\r\n  }\r\n\r\n  static fromJson(json: IGLTFSampler) {\r\n    const spl = new GLTFSampler()\r\n    spl.name = json.name\r\n    if (json.magFilter !== undefined && GLTFFilterValues.includes(json.magFilter)) {\r\n      spl.magFilter = json.magFilter as GLTFFilter\r\n    }\r\n    if (json.minFilter !== undefined && GLTFFilterValues.includes(json.minFilter)) {\r\n      spl.minFilter = json.minFilter as GLTFFilter\r\n    }\r\n    if (json.wrapS !== undefined && GLTFWrapModeValues.includes(json.wrapS)) {\r\n      spl.wrapS = json.wrapS as GLTFWrapMode\r\n    }\r\n    if (json.wrapT !== undefined && GLTFWrapModeValues.includes(json.wrapT)) {\r\n      spl.wrapT = json.wrapT as GLTFWrapMode\r\n    }\r\n    spl.extras = json.extras\r\n\r\n    return spl\r\n  }\r\n}\r\n\r\nexport default GLTFSampler","enum GLTFAnimationChannelTargetPath {\r\n  TRANSLATION = \"translation\",\r\n  ROTATION = \"rotation\",\r\n  SCALE = \"scale\",\r\n  WEIGHTS = \"weights\"\r\n}\r\n\r\nexport const GLTFAnimationChannelTargetPathValues = Object.freeze(Object.values(GLTFAnimationChannelTargetPath) as Array<string>)\r\n\r\nexport default GLTFAnimationChannelTargetPath","import { IGLTFAnimationChannelTarget } from \"src/interfaces/IGLTFObj\"\r\nimport writeDefinedProperty from \"src/utils/io/writeDefinedProperty\"\r\nimport writeExtensionsProperty from \"src/utils/io/writeExtensionsProperty\"\r\nimport GLTFPropertyBase from \"./gltf-property-base\"\r\nimport GLTFAnimationChannelTargetPath, { GLTFAnimationChannelTargetPathValues } from \"./enum/gltf-animation-channel-target-path\"\r\n\r\nclass GLTFAnimationChannelTarget extends GLTFPropertyBase {\r\n  path: GLTFAnimationChannelTargetPath\r\n  node?: number\r\n\r\n  constructor() {\r\n    super()\r\n  }\r\n  \r\n  validate() {\r\n    return true\r\n  }\r\n\r\n  json() {\r\n    const act = {\r\n      path: this.path,\r\n    }\r\n\r\n    writeDefinedProperty(act, 'node', this.node)\r\n    writeExtensionsProperty(act, this.extensions)\r\n    writeDefinedProperty(act, 'extras', this.extras)\r\n\r\n    return act\r\n  }\r\n\r\n  static readFromJson(json: IGLTFAnimationChannelTarget) {\r\n    const channelTarget = new GLTFAnimationChannelTarget()\r\n    channelTarget.extras = json.extras\r\n    channelTarget.node = json.node\r\n    if (json.path !== undefined && GLTFAnimationChannelTargetPathValues.includes(json.path)) {\r\n      channelTarget.path = json.path as GLTFAnimationChannelTargetPath\r\n    }\r\n\r\n    return channelTarget\r\n  }\r\n}\r\n\r\nexport default GLTFAnimationChannelTarget","import { IGLTFAnimationChannel } from \"src/interfaces/IGLTFObj\"\r\nimport writeDefinedProperty from \"src/utils/io/writeDefinedProperty\"\r\nimport writeExtensionsProperty from \"src/utils/io/writeExtensionsProperty\"\r\nimport GLTFPropertyBase from \"./gltf-property-base\"\r\nimport GLTFAnimationChannelTarget from \"./gltf-animation-channel-target\"\r\n\r\nclass GLTFAnimationChannel extends GLTFPropertyBase {\r\n  sampler: number\r\n  target: GLTFAnimationChannelTarget\r\n\r\n  constructor() {\r\n    super()\r\n  }\r\n  \r\n  validate() {\r\n    return this.target.validate()\r\n  } \r\n\r\n  json() {\r\n    if (!this.validate()) {\r\n      throw new Error('[GLTFAnimationChannel json()] 当前 animation channel 对象的属性不合法，请检查')\r\n    }\r\n\r\n    const ac = {\r\n      sampler: this.sampler,\r\n      target: this.target.json(),\r\n    }\r\n\r\n    writeExtensionsProperty(ac, this.extensions)\r\n    writeDefinedProperty(ac, 'extras', this.extras)\r\n\r\n    return ac\r\n  }\r\n\r\n  static readFromJson(json: IGLTFAnimationChannel) {\r\n    const channel = new GLTFAnimationChannel()\r\n    channel.sampler = json.sampler\r\n    channel.target = GLTFAnimationChannelTarget.readFromJson(json.target)\r\n    channel.extras = json.extras\r\n    \r\n    return channel\r\n  }\r\n}\r\n\r\nexport default GLTFAnimationChannel","enum GLTFAnimationInterpolation {\r\n  LINEAR = \"LINEAR\",\r\n  STEP = \"STEP\",\r\n  CUBICSPLINE = \"CUBICSPLINE\",\r\n}\r\n\r\nexport const GLTFAnimationInterpolationValues = Object.freeze(Object.values(GLTFAnimationInterpolation) as Array<string>)\r\n\r\nexport default GLTFAnimationInterpolation","import { IGLTFAnimationSampler } from \"src/interfaces/IGLTFObj\"\r\nimport writeDefinedProperty from \"src/utils/io/writeDefinedProperty\"\r\nimport GLTFPropertyBase from \"./gltf-property-base\"\r\nimport GLTFAnimationInterpolation, { GLTFAnimationInterpolationValues } from \"./enum/gltf-animation-interpolation\"\r\n\r\n\r\nclass GLTFAnimationSampler extends GLTFPropertyBase {\r\n  input: number\r\n  interpolation?: GLTFAnimationInterpolation\r\n  output: number\r\n\r\n  constructor() {\r\n    super()\r\n  }\r\n  \r\n  validate() {\r\n    return true\r\n  }\r\n\r\n  json() {\r\n    const as = {\r\n      input: this.input,\r\n      output: this.output\r\n    }\r\n\r\n    writeDefinedProperty(as, 'interpolation', this.interpolation)\r\n\r\n    return as\r\n  }\r\n\r\n  static readFromJson(json: IGLTFAnimationSampler) {\r\n    const as = new GLTFAnimationSampler()\r\n    as.input = json.input\r\n    as.output = json.output\r\n    if (json.interpolation !== undefined && GLTFAnimationInterpolationValues.includes(json.interpolation)) {\r\n      as.interpolation = json.interpolation as GLTFAnimationInterpolation\r\n    }\r\n    return as\r\n  }\r\n}\r\n\r\nexport default GLTFAnimationSampler","import { IGLTFAnimation } from \"src/interfaces/IGLTFObj\"\r\nimport writeDefinedProperty from \"src/utils/io/writeDefinedProperty\"\r\nimport writeExtensionsProperty from \"src/utils/io/writeExtensionsProperty\"\r\nimport GLTFPropertyBase from \"./gltf-property-base\"\r\nimport GLTFAnimationChannel from \"./gltf-animation-channel\"\r\nimport GLTFAnimationSampler from \"./gltf-animation-sampler\"\r\n\r\nclass GLTFAnimation extends GLTFPropertyBase {\r\n  channels: GLTFAnimationChannel[] = []\r\n  samplers: GLTFAnimationSampler[] = []\r\n  name?: string\r\n\r\n  constructor() {\r\n    super()\r\n  }\r\n  \r\n  validate() {\r\n    if (this.channels!.length < 1 || this.samplers!.length < 1) {\r\n      return false\r\n    }\r\n    return true\r\n  }\r\n\r\n  json() {\r\n    if (!this.validate()) {\r\n      throw new Error('[GLTFAnimation json()] 当前 animation 对象属性不合法，请检查')\r\n    }\r\n\r\n    const ani = {}\r\n\r\n    writeDefinedProperty(ani, 'name', this.name)\r\n    writeDefinedProperty(ani, 'channels', this.channels.length !== 0 ? this.channels.map(c => c.json()) : undefined)\r\n    writeDefinedProperty(ani, 'samplers', this.samplers.length !== 0 ? this.samplers.map(s => s.json()) : undefined)\r\n    writeExtensionsProperty(ani, this.extensions)\r\n    writeDefinedProperty(ani, 'extras', this.extras)\r\n\r\n    return ani\r\n  }\r\n\r\n  static fromJson(json: IGLTFAnimation) {\r\n    const ani = new GLTFAnimation()\r\n    ani.name = json.name\r\n    ani.channels = json.channels.map(channel => GLTFAnimationChannel.readFromJson(channel))\r\n    ani.samplers = json.samplers.map(spl => GLTFAnimationSampler.readFromJson(spl))\r\n    ani.extras = json.extras\r\n\r\n    return ani\r\n  }\r\n}\r\n\r\nexport default GLTFAnimation","enum GLTFCameraType {\r\n  PERSPECTIVE = \"perspective\",\r\n  ORTHOGRAPHIC = \"orthographic\"\r\n}\r\n\r\nexport const GLTFCameraTypeValues = Object.freeze(Object.values(GLTFCameraType) as Array<string>)\r\n\r\nexport default GLTFCameraType","import { ISerializable, IValidate } from \"src/interfaces\"\r\n\r\nclass GLTFOrthographicCamera implements IValidate, ISerializable {\r\n  xmag: number\r\n  ymag: number\r\n  zfar: number\r\n  znear: number\r\n\r\n  validate() {\r\n    return this.znear >= 0 && this.zfar >= 0 && this.xmag !== 0 && this.ymag !== 0 && this.zfar > this.znear\r\n  }\r\n\r\n  json() {\r\n    if (!this.validate()) {\r\n      throw new Error('[GLTFOrthographicCamera json()] 当前 orthographic camera 对象属性不合法，请检查')\r\n    }\r\n\r\n    const c = {\r\n      xmag: this.xmag,\r\n      ymag: this.ymag,\r\n      zfar: this.zfar,\r\n      znear: this.znear,\r\n    }\r\n\r\n    return c\r\n  }\r\n}\r\n\r\nexport default GLTFOrthographicCamera","import { ISerializable, IValidate } from \"src/interfaces\"\r\nimport writeDefinedProperty from \"src/utils/io/writeDefinedProperty\"\r\n\r\nclass GLTFPerspectiveCamera implements IValidate, ISerializable {\r\n  yfov: number\r\n  znear: number\r\n  zfar?: number\r\n  aspectRatio?: number\r\n\r\n  validate() {\r\n    let flag = this.yfov >= 0 && this.znear >= 0\r\n\r\n    this.aspectRatio !== undefined ? flag = flag && this.aspectRatio >= 0 : flag\r\n    this.zfar !== undefined ? flag = flag && this.zfar >= 0 : flag\r\n    this.zfar !== undefined ? flag = flag && this.zfar > this.znear : flag\r\n\r\n    return flag\r\n  }\r\n\r\n  json() {\r\n    if (!this.validate()) {\r\n      throw new Error('[GLTFPerspectiveCamera json()] 当前对象属性有问题，请检查')\r\n    }\r\n\r\n    const c = {\r\n      yfov: this.yfov,\r\n      znear: this.znear\r\n    }\r\n\r\n    writeDefinedProperty(c, 'aspectRatio', this.aspectRatio)\r\n    writeDefinedProperty(c, 'zfar', this.zfar)\r\n\r\n    return c\r\n  }\r\n}\r\n\r\nexport default GLTFPerspectiveCamera","import { IGLTFCamera } from \"src/interfaces/IGLTFObj\"\r\nimport writeDefinedProperty from \"src/utils/io/writeDefinedProperty\"\r\nimport writeExtensionsProperty from \"src/utils/io/writeExtensionsProperty\"\r\nimport GLTFPropertyBase from \"./gltf-property-base\"\r\nimport GLTFCameraType, { GLTFCameraTypeValues } from \"./enum/gltf-cameratype\"\r\nimport GLTFOrthographicCamera from \"./gltf-orthographic-camera\"\r\nimport GLTFPerspectiveCamera from \"./gltf-perspective-camera\"\r\n\r\nclass GLTFCamera extends GLTFPropertyBase {\r\n  orthographic?: GLTFOrthographicCamera\r\n  perspective?: GLTFPerspectiveCamera\r\n  type: GLTFCameraType\r\n  name?: string\r\n\r\n  constructor() {\r\n    super()\r\n  }\r\n  \r\n  validate() {\r\n    if (this.orthographic !== undefined && this.perspective !== undefined) {\r\n      return false\r\n    }\r\n    return true\r\n  }\r\n\r\n  json() {\r\n    if (!this.validate()) {\r\n      throw new Error('[GLTFCamera json()] 当前 camera 对象属性不合法，请检查')\r\n    }\r\n\r\n    const camera = {\r\n      type: this.type\r\n    }\r\n\r\n    writeDefinedProperty(camera, 'name', this.name)\r\n    writeDefinedProperty(camera, 'perspective', this.perspective ? this.perspective.json() : undefined)\r\n    writeDefinedProperty(camera, 'orthographic', this.orthographic ? this.orthographic.json() : undefined)\r\n    writeExtensionsProperty(camera, this.extensions)\r\n    writeDefinedProperty(camera, 'extras', this.extras)\r\n\r\n    return camera\r\n  }\r\n\r\n  static fromJson(json: IGLTFCamera) {\r\n    const camera = new GLTFCamera()\r\n    camera.name = json.name\r\n    if (GLTFCameraTypeValues.includes(json.type)) {\r\n      camera.type = json.type as GLTFCameraType\r\n    }\r\n    let hasCamera = false\r\n    if (json.perspective !== undefined) {\r\n      camera.perspective = new GLTFPerspectiveCamera()\r\n      camera.perspective.yfov = json.perspective.yfov\r\n      camera.perspective.znear = json.perspective.znear\r\n      camera.perspective.aspectRatio = json.perspective.aspectRatio\r\n      camera.perspective.zfar = json.perspective.zfar\r\n      hasCamera = true\r\n    }\r\n    if (json.orthographic !== undefined) {\r\n      if (hasCamera) {\r\n        throw new Error('[GLTFCamera.readFromJson()] 已经有一个 perspective 相机了')\r\n      }\r\n      camera.orthographic = new GLTFOrthographicCamera()\r\n      camera.orthographic.xmag = json.orthographic.xmag\r\n      camera.orthographic.ymag = json.orthographic.ymag\r\n      camera.orthographic.zfar = json.orthographic.zfar\r\n      camera.orthographic.znear = json.orthographic.znear\r\n    }\r\n    camera.extras = json.extras\r\n\r\n    return camera\r\n  }\r\n}\r\n\r\nexport default GLTFCamera","import { IGLTFSkin } from \"src/interfaces/IGLTFObj\"\r\nimport writeDefinedProperty from \"src/utils/io/writeDefinedProperty\"\r\nimport writeExtensionsProperty from \"src/utils/io/writeExtensionsProperty\"\r\nimport GLTFPropertyBase from \"./gltf-property-base\"\r\n\r\nclass GLTFSkin extends GLTFPropertyBase {\r\n  inverseBindMatrices?: number\r\n  skeleton?: number\r\n  name?: string\r\n  joints: number[]\r\n\r\n  constructor() {\r\n    super()\r\n  }\r\n  \r\n  validate() {\r\n    return this.joints.length > 1\r\n  }\r\n\r\n  json() {\r\n    if (!this.validate()) {\r\n      throw new Error('[GLTFSkin json()] 当前 skin 属性不合法，请检查')\r\n    }\r\n\r\n    const sk = {}\r\n\r\n    writeDefinedProperty(sk, 'inverseBindMatrices', this.inverseBindMatrices)\r\n    writeDefinedProperty(sk, 'skeleton', this.skeleton)\r\n    writeDefinedProperty(sk, 'name', this.name)\r\n    writeDefinedProperty(sk, 'joints', this.joints.length !== 0 ? this.joints : undefined)\r\n    writeExtensionsProperty(sk, this.extensions)\r\n    writeDefinedProperty(sk, 'extras', this.extras)\r\n\r\n    return sk\r\n  }\r\n\r\n  static fromJson(json: IGLTFSkin) {\r\n    const skin = new GLTFSkin()\r\n    skin.joints = json.joints\r\n    skin.name = json.name\r\n    skin.inverseBindMatrices = json.inverseBindMatrices\r\n    skin.skeleton = json.skeleton\r\n    skin.extras = json.extras\r\n    return skin\r\n  }\r\n}\r\n\r\nexport default GLTFSkin","import writeDefinedProperty from \"src/utils/io/writeDefinedProperty\"\r\nimport writeExtensionsProperty from \"src/utils/io/writeExtensionsProperty\"\r\nimport GLTFTextureInfo from \"./gltf-texture-info\"\r\n\r\nclass GLTFOcclusionTextureInfo \r\nextends GLTFTextureInfo {\r\n  strength: number\r\n\r\n  constructor(index: number, texCoord: number, strength: number) {\r\n    super(index, texCoord)\r\n    this.strength = strength\r\n  }\r\n\r\n  validate() {\r\n    return (this.strength > 1 || this.strength < 0)\r\n  }\r\n\r\n  json() {\r\n    if (!this.validate()) {\r\n      throw new Error('[GLTFOcclusionTextureInfo json()] 当前 occlusion texture info 属性不合法，请检查')\r\n    }\r\n\r\n    const st = super.json()\r\n\r\n    writeDefinedProperty(st, 'strength', this.strength)\r\n    writeExtensionsProperty(st, this.extensions)\r\n    writeDefinedProperty(st, 'extras', this.extras)\r\n\r\n    return st\r\n  }\r\n}\r\n\r\nexport default GLTFOcclusionTextureInfo","import ISerializable from 'src/interfaces/ISerializable'\r\nimport writeDefinedProperty from 'src/utils/io/writeDefinedProperty'\r\nimport writeExtensionsProperty from 'src/utils/io/writeExtensionsProperty'\r\nimport { GLTFExtensionBase } from '../ext'\r\nimport {\r\n  GLTFAsset,\r\n  GLTFBuffer,\r\n  GLTFBufferView,\r\n  GLTFAccessor,\r\n  GLTFScene,\r\n  GLTFNode,\r\n  GLTFMesh,\r\n  GLTFMaterial,\r\n  GLTFImage,\r\n  GLTFTexture,\r\n  GLTFSampler,\r\n  GLTFAnimation,\r\n  GLTFCamera,\r\n  GLTFSkin,\r\n} from './def'\r\n\r\nclass GLTFDocument implements ISerializable {\r\n  asset: GLTFAsset = new GLTFAsset()\r\n  scene?: number = 0\r\n\r\n  buffers: GLTFBuffer[] = []\r\n  bufferViews: GLTFBufferView[] = []\r\n  accessors: GLTFAccessor[] = []\r\n\r\n  scenes: GLTFScene[] = []\r\n  nodes: GLTFNode[] = []\r\n  meshes: GLTFMesh[] = []\r\n\r\n  materials?: GLTFMaterial[]\r\n  textures?: GLTFTexture[]\r\n  images?: GLTFImage[]\r\n  samplers?: GLTFSampler[]\r\n\r\n  animations?: GLTFAnimation[]\r\n  cameras?: GLTFCamera[]\r\n  skins?: GLTFSkin[]\r\n\r\n  extensions?: Set<GLTFExtensionBase>\r\n  extras?: any\r\n  extensionsUsed?: string[]\r\n  extensionsRequired?: string[]\r\n\r\n  json() {\r\n    const gltfObj = {\r\n      asset: this.asset.json(),\r\n      buffers: this.buffers.map(buffer => buffer.json()),\r\n      bufferViews: this.bufferViews.map(bufferView => bufferView.json()),\r\n      accessors: this.accessors.map(acc => acc.json()),\r\n      \r\n      scenes: this.scenes.map(scene => scene.json()),\r\n      nodes: this.nodes.map(node => node.json()),\r\n      meshes: this.meshes.map(mesh => mesh.json()),\r\n    }\r\n    writeDefinedProperty(gltfObj, 'scene', this.scene)\r\n    writeDefinedProperty(gltfObj, 'materials', this.materials !== undefined && this.materials.length !== 0 ? this.materials.map(mt => mt.json()) : undefined)\r\n    writeDefinedProperty(gltfObj, 'textures', this.textures !== undefined && this.textures.length !== 0 ? this.textures.map(tx => tx.json()) : undefined)\r\n    writeDefinedProperty(gltfObj, 'images', this.images !== undefined && this.images.length !== 0 ? this.images.map(img => img.json()) : undefined)\r\n    writeDefinedProperty(gltfObj, 'samplers', this.samplers !== undefined && this.samplers.length !== 0 ? this.samplers.map(spl => spl.json()) : undefined)\r\n    writeDefinedProperty(gltfObj, 'cameras', this.cameras !== undefined && this.cameras.length !== 0 ? this.cameras.map(c => c.json()) : undefined)\r\n    writeDefinedProperty(gltfObj, 'animations', this.animations !== undefined && this.animations.length !== 0 ? this.animations.map(ani => ani.json()) : undefined)\r\n    writeDefinedProperty(gltfObj, 'skins', this.skins !== undefined && this.skins.length !== 0 ? this.skins.map(skin => skin.json()) : undefined)\r\n\r\n    writeExtensionsProperty(gltfObj, this.extensions)\r\n    writeDefinedProperty(gltfObj, 'extras', this.extras)\r\n    writeDefinedProperty(gltfObj, 'extensionsUsed', this.extensionsUsed)\r\n    writeDefinedProperty(gltfObj, 'extensionsRequired', this.extensionsRequired)\r\n    return gltfObj\r\n  }\r\n}\r\n\r\nexport default GLTFDocument","import { ISerializable, IValidate } from \"src/interfaces\"\r\n\r\nclass GLTFExtensionBase implements IValidate, ISerializable {\r\n  protected _name: string = \"\"\r\n  get name() {\r\n    return this._name\r\n  }\r\n  \r\n  required?: boolean\r\n  used?: boolean\r\n\r\n  validate() {\r\n    return true\r\n  }\r\n\r\n  json() {\r\n    return\r\n  }\r\n}\r\n\r\nexport default GLTFExtensionBase","import { GLTFPrimitiveAttribute } from \"../../core\"\r\nimport GLTFExtensionBase from \"../gltf-extension-base\"\r\n\r\nclass ExtDraco extends GLTFExtensionBase {\r\n  _name: string = \"KHR_draco_mesh_compression\"\r\n  bufferView: number\r\n  attributes: GLTFPrimitiveAttribute\r\n  /** 若只提供了 draco 压缩的部分，则必须指明在 required 列表中 */\r\n  required?: boolean\r\n  /** 若 draco 压缩的和原始数据都提供了，则只需指明在 used 列表中 */\r\n  used?: boolean\r\n\r\n  constructor() {\r\n    super()\r\n  }\r\n\r\n  validate() {\r\n    return Number.isInteger(this.bufferView) && this.bufferView > 0\r\n  }\r\n\r\n  json() {\r\n    return {\r\n      bufferView: this.bufferView,\r\n      attributes: this.attributes.json()\r\n    }\r\n  }\r\n}\r\n\r\nexport default ExtDraco","import writeDefinedProperty from \"src/utils/io/writeDefinedProperty\"\r\nimport { GLTFTextureInfo } from \"../../core\"\r\nimport GLTFExtensionBase from \"../gltf-extension-base\"\r\n\r\nclass ExtPbrSpecularGlossiness extends GLTFExtensionBase {\r\n  _name: string = \"KHR_materials_pbrSpecularGlossiness\"\r\n\r\n  diffuseFactor?: number[]\r\n  specularFactor?: number[]\r\n  glossinessFactor?: number\r\n  diffuseTexture?: GLTFTextureInfo\r\n  specularGlossinessTexture?: GLTFTextureInfo\r\n  required?: boolean\r\n  used?: boolean\r\n\r\n  validate() {\r\n    if (this.diffuseTexture !== undefined) {\r\n      return this.diffuseTexture.validate()\r\n    }\r\n    if (this.specularGlossinessTexture !== undefined) {\r\n      this.specularGlossinessTexture.validate()\r\n    }\r\n    if (this.diffuseFactor !== undefined) {\r\n      if (this.diffuseFactor.length !== 4) {\r\n        return false\r\n      }\r\n      if (this.diffuseFactor.every(v => v > 0 && v < 1)) {\r\n        return false\r\n      }\r\n    }\r\n    if (this.specularFactor !== undefined) {\r\n      if (this.specularFactor.length !== 3) {\r\n        return false\r\n      }\r\n      if (this.specularFactor.every(v => v > 1 || v < 0)) {\r\n        return false\r\n      }\r\n    }\r\n    if (this.glossinessFactor !== undefined && (this.glossinessFactor > 1 || this.glossinessFactor < 0)) {\r\n      return false\r\n    }\r\n\r\n    return true\r\n  }\r\n\r\n  json() {\r\n    if (this.validate() === false) {\r\n      throw new Error('[ExtPbrSpecularGlossiness json()] 当前对象的属性值不合法，请检查')\r\n    }\r\n    const ext = {}\r\n    if (this.diffuseFactor && !this.diffuseFactor.every(v => v === 1)) {\r\n      writeDefinedProperty(ext, 'diffuseFactor', this.diffuseFactor)\r\n    }\r\n    if (this.specularFactor && !this.specularFactor.every(v => v === 1)) {\r\n      writeDefinedProperty(ext, 'diffuseFactor', this.specularFactor)\r\n    }\r\n    if (this.glossinessFactor !== 1.0)\r\n      writeDefinedProperty(ext, 'glossinessFactor', this.glossinessFactor)\r\n    if (this.diffuseTexture !== undefined) {\r\n      writeDefinedProperty(ext, 'diffuseTexture', this.diffuseTexture.json())\r\n    }\r\n    if (this.specularGlossinessTexture !== undefined) {\r\n      writeDefinedProperty(ext, 'specularGlossinessTexture', this.specularGlossinessTexture.json())\r\n    }\r\n    return ext\r\n  }\r\n}\r\n\r\nexport default ExtPbrSpecularGlossiness","import GLTFExtensionBase from \"../gltf-extension-base\"\r\n\r\nclass ExtTextureWebp extends GLTFExtensionBase {\r\n  _name = \"EXT_texture_webp\"\r\n}\r\n\r\nexport default ExtTextureWebp","import GLTFExtensionBase from \"../gltf-extension-base\"\r\n\r\n/**\r\n * @description\r\n * 此扩展允许 gltf texture 使用 dds 格式的贴图\r\n * ``` json\r\n * \"textures\": [\r\n *     {\r\n *         \"source\": 0,\r\n *         \"extensions\": {\r\n *             \"MSFT_texture_dds\": {\r\n *                 \"source\": 1\r\n *             }\r\n *         }\r\n *     }\r\n * ],\r\n * \"images\": [\r\n *     {\r\n *         \"uri\": \"defaultTexture.png\"\r\n *     },\r\n *     {\r\n *         \"uri\": \"DDSTexture.dds\"\r\n *     }\r\n * ]\r\n * ```\r\n * \r\n * 若 source 对象指向的是 bufferView，那么其 mime 需指明为 \"image/vnd-ms.dds\"\r\n * 也就是说，texture 允许超过 1 个贴图\r\n * 此扩展由微软提供\r\n */\r\nclass ExtTextureDDS extends GLTFExtensionBase {\r\n  _name: string = \"MSFT_texture_dds\"\r\n  source: number\r\n}\r\n\r\nexport default ExtTextureDDS","import GLTFExtensionBase from \"../gltf-extension-base\";\r\n\r\n/**\r\n * @description\r\n * 此扩展由 Facebook 提供。它作用于 `GLTFScene` 对象。\r\n * \r\n */\r\nclass ExtGeometryMetadata extends GLTFExtensionBase {\r\n  _name: string = \"FB_geometry_metadata\"\r\n  /**\r\n   * @description 当前 `GLTFScene` 总共的顶点数量（不重复，意味着只统计 primitive，不考虑 node 复用）\r\n   */\r\n  vertexCount: number\r\n  /**\r\n   * @description 当前 `GLTFScene` 总共的图元数量\r\n   */\r\n  primitiveCount: number\r\n  sceneBounds: {\r\n    min: [number, number, number] \r\n    max: [number, number, number] \r\n  }\r\n\r\n}\r\n\r\nexport default ExtGeometryMetadata","import GLTFExtensionBase from \"../gltf-extension-base\"\r\n\r\nclass ExtPrimitiveOutline extends GLTFExtensionBase {\r\n  _name: string = \"CESIUM_primitive_outline\"\r\n}\r\n\r\nexport default ExtPrimitiveOutline","import GLTFExtensionBase from \"../gltf-extension-base\"\r\n\r\n/**\r\n * @description 作用对象：GLTFBufferView 和 GLTFBuffer\r\n */\r\nclass ExtMeshOptCompression extends GLTFExtensionBase {\r\n  _name: string = \"EXT_meshopt_compression\"\r\n  buffer: number\r\n  byteOffset?: number\r\n  byteLength: number // min 1\r\n  byteStride: number // 2 ~ 256\r\n  /**\r\n   * @description \"ATTRIBUTES\", \"TRIANGLES\", \"INDICES\"\r\n   */\r\n  mode: string\r\n  count: number // min 1\r\n  /**\r\n   * @description \"NONE\", \"OCTAHEDRAL\", \"QUATERNION\", \"EXPONENTIAL\"\r\n   */\r\n  filter?: string\r\n}\r\n\r\nexport default ExtMeshOptCompression","import GLTFExtensionBase from \"../gltf-extension-base\"\r\n\r\n/**\r\n * @description\r\n * 此扩展由微软提出，作用于 `GLTFNode` 和 `GLTFMaterial`\r\n * 同时，要在 `GLTFNode` 的 `extras` 中附上 lod 权重数据\r\n * ``` json\r\n * \"nodes\": [\r\n *   {\r\n *     \"name\": \"High_LOD\",\r\n *     \"mesh\": 0,\r\n *     \"extensions\": {\r\n *       \"MSFT_lod\": {\r\n *         \"ids\": [ 1, 2 ]\r\n *       }\r\n *     },\r\n *     \"extras\": {\r\n *         \"MSFT_screencoverage\": [ 0.5, 0.2, 0.01 ]\r\n *     }\r\n *   },\r\n *   {\r\n *     \"name\": \"Medium_LOD\",\r\n *     \"mesh\": 1\r\n *   },\r\n *   {\r\n *     \"name\": \"Low_LOD\",\r\n *     \"mesh\": 2\r\n *   }\r\n * ]\r\n * ```\r\n */\r\nclass ExtLod extends GLTFExtensionBase {\r\n  _name: string = \"MSFT_lod\"\r\n  ids: number[]\r\n  extras: {\r\n    MSFT_screencoverage: number[]\r\n  }\r\n}\r\n\r\nexport default ExtLod","import { GLTFTextureInfo } from \"../../core\";\r\nimport GLTFExtensionBase from \"../gltf-extension-base\";\r\n\r\n/**\r\n * @description 此扩展由 adobe 提出，它解决的是 pbr 透明材质中没有表面反射的问题（玻璃完全透明，但是表面仍然是有反射的）\r\n */\r\nclass ExtMaterialsThinTransparency extends GLTFExtensionBase {\r\n  _name: string = \"ADOBE_materials_thin_transparency\"\r\n\r\n  /**\r\n   * @default 1.0\r\n   */\r\n  transmissionFactor?: number\r\n  /**\r\n   * \r\n   */\r\n  transmissionTexture?: GLTFTextureInfo[]\r\n  /**\r\n   * @description \r\n   * @default 1.33\r\n   */\r\n  ior?: number\r\n}\r\n\r\nexport default ExtMaterialsThinTransparency","import { IOBuffer } from \"iobuffer\"\r\nimport { GLTFAccessor, GLTFBuffer, GLTFDocument, GLTFMaterial, GLTFMesh, GLTFNode } from \"src/gltf/core\"\r\nimport { IGLTFMaterial } from \"src/interfaces\"\r\nimport IGLTFWriteAction from \"src/interfaces/IGLTFAction\"\r\nimport { GLTFVertexAttributes, GLTFVertexIndices } from \"./action-data\"\r\n\r\n/**\r\n * GLTF 创建行为中的 `\"添加动作\"`，添加动作当前代表了一个完整的 GLTFPrimitive 的创建\r\n * 一个 `\"添加动作\"` 包含一个 vao，允许包括相对应的材质、贴图以及 gltf 扩展\r\n */\r\nclass GLTFAddAction implements IGLTFWriteAction {\r\n  readonly type = \"add\"\r\n\r\n  /** vertexArrayData */\r\n  vertexArrayData: GLTFVertexAttributes\r\n  indicesData?: GLTFVertexIndices\r\n  /** \r\n   * @todo\r\n   * 用 IGLTFMaterial 是有问题的，用户不知道索引之类的东西\r\n   */\r\n  material?: IGLTFMaterial\r\n  textureImage?: ArrayBuffer\r\n\r\n  constructor(vao: GLTFVertexAttributes, material?: IGLTFMaterial, textureImage?: ArrayBuffer) {\r\n    this.vertexArrayData = vao\r\n    this.material = material\r\n    this.textureImage = textureImage\r\n  }\r\n\r\n  submit(doc: GLTFDocument) {\r\n    try {\r\n      // 第一步 创建 accessor，更新index  <-------------- 必须创建\r\n      // TODO 针对每一个 VBO 创建自己的 accessor\r\n      const acc = GLTFAccessor.fromJson({\r\n        count: this.vertexArrayData.verticeCount,\r\n        componentType: 5126,\r\n        type: 'vec3'\r\n      })\r\n      doc.accessors.push(acc)\r\n      \r\n      \r\n      // 第二步，创建 bufferView <----------------------- 最好创建新的\r\n\r\n\r\n      // 第三步 创建 primitive -> mesh -> node\r\n      // -- primitive\r\n      const prmt = this.vertexArrayData.asPrimitive(doc)\r\n\r\n\r\n      // -- mesh\r\n      const mesh = new GLTFMesh()\r\n      mesh.primitives.push(prmt)\r\n      mesh.doc = doc\r\n      const meshid = doc.meshes.push(mesh)\r\n      // -- node\r\n      const node = new GLTFNode()\r\n      node.doc = doc\r\n      node.mesh = meshid\r\n      const nodeid = doc.nodes.push(node)\r\n      // -- update scenes.nodes \r\n      doc.scenes[doc.scene === undefined ? 0 : doc.scene].nodes.push(nodeid)\r\n\r\n\r\n      // 可选步 创建材质、纹理、贴图以及其对象\r\n      if (this.material !== undefined) {\r\n        if (doc.materials === undefined) {\r\n          doc.materials = []\r\n        }\r\n        let materialStartIndex = doc.materials.length\r\n        prmt.material = materialStartIndex\r\n        // todo!!\r\n        // material <--- 用 IGLTFMaterial 是有问题的，用户不知道索引之类的东西\r\n        doc.materials.push(GLTFMaterial.fromJson(this.material))\r\n      }\r\n      // todo\r\n      if (this.textureImage !== undefined) {\r\n        // image，即 GLTFImage 的索引号，在这一步创建完成后，要更新材质中 纹理的source\r\n        console.log('贴图功能正在开发...')\r\n      }\r\n\r\n      // 第三步 写入 buffer\r\n      // 如何写入？创建新的？跟随某个buffer？\r\n      // -- 写入分两步，先 vao，再 textureImage\r\n\r\n      /* --- 获取buffer对象 --- */\r\n      let bfData = undefined\r\n      if (doc.buffers.length === 0) {\r\n        const bfIndex = doc.buffers.push(new GLTFBuffer())\r\n        bfData = doc.buffers[bfIndex].bufferData\r\n      } else {\r\n        bfData = doc.buffers[0].bufferData\r\n      }\r\n\r\n      /* --- 写入vao --- */\r\n      if (bfData !== undefined) {\r\n        // 检查8byte对齐\r\n        const io = new IOBuffer(bfData)\r\n        this.vertexArrayData.vertexBuffers.forEach(vbo => {\r\n          io.writeBytes(new Uint8Array(vbo.buffer))\r\n          // 检查8byte对齐\r\n        })\r\n      } else {\r\n        const io = new IOBuffer()\r\n        bfData = io.buffer as ArrayBuffer\r\n      }\r\n    } catch (error) {\r\n      console.log(error)\r\n    }\r\n    return true\r\n  }\r\n}\r\n\r\nexport default GLTFAddAction","import { IGLTFWriteAction } from \"src/interfaces\"\r\n\r\nclass GLTFDropAction implements IGLTFWriteAction {\r\n  readonly type = \"drop\"\r\n  dropTarget: any\r\n\r\n  submit() {\r\n    return true\r\n  }\r\n}\r\n\r\nexport default GLTFDropAction","import { IGLTFWriteAction } from \"src/interfaces\"\r\n\r\nclass GLTFUpdateAction implements IGLTFWriteAction {\r\n  readonly type = \"update\"\r\n  updateTargetType: string\r\n  updateTargetIndex?: any\r\n\r\n  submit() {\r\n    return true\r\n  }\r\n}\r\n\r\nexport default GLTFUpdateAction","import { GLTFVertexBuffer } from \"src\"\r\nimport { GLTFDocument, GLTFPrimitive, GLTFPrimitiveAttribute, GLTFPrimitiveMode } from \"src/gltf/core\"\r\nimport { GLTFExtensionBase } from \"src/gltf/ext\"\r\nimport { IValidate } from \"src/interfaces\"\r\nimport GLTFVertexIndices from \"./gltf-vertex-indices\"\r\n\r\nfunction createAttribute(accessorStartIndex: number, vertexBuffers: GLTFVertexBuffer[]) {\r\n  const attrs = new GLTFPrimitiveAttribute()\r\n\r\n  vertexBuffers.forEach(vb => {\r\n    switch (vb.type.toString()) {\r\n      case 'position':\r\n        attrs.position = ++accessorStartIndex\r\n        break;\r\n      case 'normal':\r\n        attrs.normal = ++accessorStartIndex\r\n        break;\r\n      case 'uv0':\r\n        attrs.uv0 = ++accessorStartIndex\r\n        break;\r\n      case 'uv1':\r\n        attrs.uv1 = ++accessorStartIndex\r\n        break;\r\n      case 'joints0':\r\n        attrs.joints0 = ++accessorStartIndex\r\n        break;\r\n      case 'weights0':\r\n        attrs.weights0 = ++accessorStartIndex\r\n        break;\r\n      case 'tangent':\r\n        attrs.tangent = ++accessorStartIndex\r\n        break;\r\n      case 'color0':\r\n        attrs.color0 = ++accessorStartIndex\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  })\r\n  return attrs\r\n}\r\n\r\n/**\r\n * GLTFVertexAttributes 相对于 GLTFPrimitive 的数据本体，只不过它保存的是顶点属性的真实数据\r\n */\r\nclass GLTFVertexAttributes implements IValidate {\r\n  /**\r\n   * vertexBuffers，相当于 GLTFPrimitiveAttributes 中每一个 attribute 的数据本体\r\n   */\r\n  vertexBuffers: GLTFVertexBuffer[] = []\r\n  primitiveMode: GLTFPrimitiveMode = GLTFPrimitiveMode.TRIANGLES\r\n  extensions?: Set<GLTFExtensionBase>\r\n  /**\r\n   * indices 与 GLTFPrimitive.indices 意义相同，是索引型数据\r\n   */\r\n  indices?: GLTFVertexIndices\r\n\r\n  /**\r\n   * @todo 检测 indices 数量与 vertexBuffers 的数量关系是否正确\r\n   */\r\n  validate() {\r\n    return false\r\n  }\r\n\r\n  get verticeCount() {\r\n    if (this.vertexBuffers.length === 0) {\r\n      return 0\r\n    }\r\n    return this.vertexBuffers[0].count\r\n  }\r\n\r\n  asPrimitive(doc: GLTFDocument, materialIndex?: number) {\r\n    const prmt = new GLTFPrimitive()\r\n    prmt.material = materialIndex\r\n    prmt.attributes = createAttribute(doc.accessors.length, this.vertexBuffers)\r\n    if (this.indices !== undefined) {\r\n      prmt.indices = ++doc.accessors.length\r\n    }\r\n    prmt.mode = this.primitiveMode\r\n    prmt.doc = doc\r\n    return prmt\r\n  }\r\n}\r\n\r\nexport default GLTFVertexAttributes","import { GLTFAttributeType, GLTFComponentType, GLTFVertexAttributeType } from \"src/gltf/core\";\r\nimport { getAttributeTypeElementCount } from \"src/gltf/core/def/enum/gltf-attribute-type\";\r\nimport { getComponentTypeByteSize } from \"src/gltf/core/def/enum/gltf-component-type\";\r\n\r\nclass GLTFVertexBuffer {\r\n  type: GLTFVertexAttributeType = GLTFVertexAttributeType.POSITION\r\n  buffer: ArrayBuffer\r\n  numberType: GLTFComponentType = GLTFComponentType.FLOAT\r\n  elementType: GLTFAttributeType = GLTFAttributeType.VEC3\r\n\r\n  /**\r\n   * 计算顶点数量\r\n   */\r\n  get count() {\r\n    const cmpSize = getComponentTypeByteSize(this.numberType)\r\n    const numSize = getAttributeTypeElementCount(this.elementType)\r\n    if (this.buffer.byteLength % cmpSize * numSize !== 0) {\r\n      throw new Error('[GLTFVertexBuffer count] 数据与类型不匹配，请检查')\r\n    }\r\n    return this.buffer.byteLength / (cmpSize * numSize)\r\n  }\r\n}\r\n\r\nexport default GLTFVertexBuffer","import { GLTFComponentType } from \"src/gltf/core\"\r\n\r\nclass GLTFVertexIndices {\r\n  data: ArrayBuffer\r\n  count: number\r\n  numberType: GLTFComponentType\r\n}\r\n\r\nexport default GLTFVertexIndices","import { GLTFAccessor, GLTFAnimation, GLTFAsset, GLTFBuffer, GLTFBufferView, GLTFCamera, GLTFDocument, GLTFImage, GLTFMaterial, GLTFMesh, GLTFNode, GLTFSampler, GLTFScene, GLTFSkin, GLTFTexture } from \"src/gltf/core\"\r\nimport { IGLTFObj, IGLTFAccessor, IGLTFAnimation, IGLTFBuffer, IGLTFBufferView, IGLTFCamera, IGLTFImage, IGLTFMaterial, IGLTFMesh, IGLTFNode, IGLTFSampler, IGLTFScene, IGLTFSkin, IGLTFTexture } from \"src/interfaces\"\r\nimport GLTFReadType from \"src/interfaces/GLTFReadType\"\r\nimport GLTFResources from \"src/interfaces/GLTFResources\"\r\n\r\nfunction readBuffers(gltfBuffers: GLTFBuffer[], json: IGLTFBuffer[]) {\r\n  for (const bfjson of json) {\r\n    const bf = GLTFBuffer.fromJson(bfjson)\r\n    gltfBuffers.push(bf)\r\n  }\r\n}\r\n\r\nfunction readBufferViews(gltfBufferViews: GLTFBufferView[], json: IGLTFBufferView[]) {\r\n  for (const bvjson of json) {\r\n    const bv = GLTFBufferView.fromJson(bvjson)\r\n    // extensions 单独处理\r\n    gltfBufferViews.push(bv)\r\n  }\r\n}\r\n\r\nfunction readAccessors(gltfAccessors: GLTFAccessor[], json: IGLTFAccessor[]) {\r\n  for (const accjson of json) {\r\n    const acc = GLTFAccessor.fromJson(accjson)\r\n    // extensions 单独处理\r\n    gltfAccessors.push(acc)\r\n  }\r\n}\r\n\r\nfunction readScenes(gltfScenes: GLTFScene[], json: IGLTFScene[]) {\r\n  for (const scenejson of json) {\r\n    const scene = GLTFScene.fromJson(scenejson)\r\n    gltfScenes.push(scene)\r\n  }\r\n}\r\n\r\nfunction readNodes(gltfNodes: GLTFNode[], json: IGLTFNode[]) {\r\n  for (const nodejson of json) {\r\n    const node = GLTFNode.fromJson(nodejson)\r\n    gltfNodes.push(node)\r\n  }\r\n}\r\n\r\nfunction readMeshs(gltfMeshs: GLTFMesh[], json: IGLTFMesh[]) {\r\n  for (const meshjson of json) {\r\n    const mesh = GLTFMesh.fromJson(meshjson)\r\n    gltfMeshs.push(mesh)\r\n  }\r\n}\r\n\r\nfunction readTextures(gltfTextures: GLTFTexture[], json: IGLTFTexture[]) {\r\n  for (const txjson of json) {\r\n    const tx = GLTFTexture.fromJson(txjson)\r\n    gltfTextures.push(tx)\r\n  }\r\n}\r\n\r\nfunction readImages(gltfImages: GLTFImage[], json: IGLTFImage[]) {\r\n  for (const imgjson of json) {\r\n    const img = GLTFImage.fromJson(imgjson)\r\n    gltfImages.push(img)\r\n  }\r\n}\r\n\r\nfunction readMaterials(gltfMaterials: GLTFMaterial[], json: IGLTFMaterial[]) {\r\n  for (const mtrljson of json) {\r\n    const mtrl = GLTFMaterial.fromJson(mtrljson)\r\n    gltfMaterials.push(mtrl)\r\n  }\r\n}\r\n\r\nfunction readSamplers(gltfSamplers: GLTFSampler[], json: IGLTFSampler[]) {\r\n  for (const spljson of json) {\r\n    const spl = GLTFSampler.fromJson(spljson)\r\n    gltfSamplers.push(spl)\r\n  }\r\n}\r\n\r\nfunction readAnimations(gltfAnimations: GLTFAnimation[], json: IGLTFAnimation[]) {\r\n  for (const anijson of json) {\r\n    const ani = GLTFAnimation.fromJson(anijson)\r\n    gltfAnimations.push(ani)\r\n  }\r\n}\r\n\r\nfunction readSkins(gltfSkins: GLTFSkin[], json: IGLTFSkin[]) {\r\n  for (const skinjson of json) {\r\n    const skin = GLTFSkin.fromJson(skinjson)\r\n    gltfSkins.push(skin)\r\n  }\r\n}\r\n\r\nfunction readCameras(gltfCameras: GLTFCamera[], json: IGLTFCamera[]) {\r\n  for (const camerajson of json) {\r\n    const camera = GLTFCamera.fromJson(camerajson)\r\n    gltfCameras.push(camera)\r\n  }\r\n}\r\n\r\nfunction bind(doc: GLTFDocument) {\r\n  doc.asset.doc = doc\r\n  doc.buffers.forEach(bf => bf.doc = doc)\r\n  doc.bufferViews.forEach(bv => bv.doc = doc)\r\n  doc.accessors.forEach(acc => acc.doc = doc)\r\n  doc.scenes.forEach(scene => scene.doc = doc)\r\n  doc.nodes.forEach(nd => nd.doc = doc)\r\n  doc.meshes.forEach(mesh => mesh.doc = doc)\r\n  if (doc.materials)\r\n    doc.materials.forEach(mtl => mtl.doc = doc)\r\n  if (doc.textures)\r\n    doc.textures.forEach(tx => tx.doc = doc)\r\n  if (doc.images)\r\n    doc.images.forEach(img => img.doc = doc)\r\n  if (doc.samplers)\r\n    doc.samplers.forEach(spl => spl.doc = doc)\r\n  if (doc.animations)\r\n    doc.animations.forEach(ani => ani.doc = doc)\r\n  if (doc.cameras)\r\n    doc.cameras.forEach(camera => camera.doc = doc)\r\n  if (doc.skins)\r\n    doc.skins.forEach(skin => skin.doc = doc)\r\n}\r\n\r\nconst readGLTF = (json: GLTFReadType, ...resources: GLTFResources[]): GLTFDocument => {\r\n  const doc = new GLTFDocument()\r\n  let resourcesLength = resources.length\r\n  console.log(`Resources Length is ${resourcesLength}`);\r\n\r\n  let obj = json\r\n  if (typeof json === \"string\") {\r\n    obj = JSON.parse(json.trim())\r\n  }\r\n  obj = obj as IGLTFObj\r\n\r\n  doc.scene = obj['scene']\r\n  doc.asset = GLTFAsset.readFromJson(obj['asset'])\r\n  readBuffers(doc.buffers, obj['buffers'])\r\n  readBufferViews(doc.bufferViews, obj['bufferViews'])\r\n  readAccessors(doc.accessors, obj['accessors'])\r\n  readScenes(doc.scenes, obj['scenes'])\r\n  readNodes(doc.nodes, obj['nodes'])\r\n  readMeshs(doc.meshes, obj['meshes'])\r\n  if (obj['textures'] !== undefined) {\r\n    readTextures(doc.textures === undefined ? new Array<GLTFTexture>() : doc.textures, obj['textures'])\r\n  }\r\n  if (obj['images'] !== undefined) {\r\n    readImages(doc.images === undefined ? new Array<GLTFImage>() : doc.images, obj['images'])\r\n  }\r\n  if (obj['materials'] !== undefined) {\r\n    readMaterials(doc.materials === undefined ? new Array<GLTFMaterial>() : doc.materials, obj['materials'])\r\n  }\r\n  if (obj['samplers'] !== undefined) {\r\n    readSamplers(doc.samplers === undefined ? new Array<GLTFSampler>() : doc.samplers, obj['samplers'])\r\n  }\r\n  if (obj['animations'] !== undefined) {\r\n    readAnimations(doc.animations === undefined ? new Array<GLTFAnimation>() : doc.animations, obj['animations'])\r\n  }\r\n  if (obj['skins'] !== undefined) {\r\n    readSkins(doc.skins === undefined ? new Array<GLTFSkin>() : doc.skins, obj['skins'])\r\n  }\r\n  if (obj['cameras'] !== undefined) {\r\n    readCameras(doc.cameras === undefined ? new Array<GLTFCamera>() : doc.cameras, obj['cameras'])\r\n  }\r\n\r\n  bind(doc)\r\n  return doc\r\n}\r\n\r\nexport default readGLTF","import { IOBuffer } from \"iobuffer\"\r\nimport readGLTF from \"./read-gltf\"\r\n\r\nconst readGLB = (binary: Uint8Array | ArrayBuffer | Buffer) => {\r\n  /* read head */\r\n  const io = new IOBuffer(binary)\r\n  const magic = io.readChars(4)\r\n  if (magic !== \"gltf\") {\r\n    throw new Error(\"[readGLB()] 不是 glb 二进制\")\r\n  }\r\n  const version = io.readUint32()\r\n  if (version !== 2) {\r\n    throw new Error(\"[readGLB()] 暂不支持其他版本，仅支持 2.0 版本\")\r\n  }\r\n  const length = io.readUint32()\r\n  if (length !== binary.byteLength) {\r\n    throw new Error(\"[readGLB()] 数据长度异常\")\r\n  }\r\n  \r\n  /* read json */\r\n  const jsonByteLength = io.readUint32()\r\n  const jsonType = io.readUint32()\r\n  console.log(`数据块 1 的类型: ${jsonType} (1=json, 0=bin)`)\r\n  const jsonText = io.readChars(jsonByteLength)\r\n  const json = JSON.parse(jsonText)\r\n\r\n  /* read binarydata */\r\n  const binByteLength = io.readUint32()\r\n  const binType = io.readUint32()\r\n  console.log(`数据块 2 的类型: ${binType} (1=json, 0=bin)`)\r\n  let binarydata = undefined\r\n  try {\r\n    binarydata = io.readBytes(binByteLength)\r\n    /* read as gltfdocument */\r\n    return readGLTF(json, binarydata)\r\n  } catch {\r\n    throw new Error(\"[readGLB()] 数据长度异常，试检查 glb binary 块有无问题\")\r\n  }\r\n}\r\n\r\nexport default readGLB","type TypedArrayType = Uint8Array | Uint16Array | Uint32Array | Int8Array | Int16Array | Int32Array | Float32Array | Float64Array\r\n/**\r\n * 求最大最小值\r\n * @param {number[]} arr 数组\r\n * @param {boolean} [max] 若为 true 则求最大值。默认是 true。否则求最小值\r\n * @returns \r\n */\r\nexport function arrayMinMax(arr: number[] | TypedArrayType, max: boolean = true): number {\r\n  const length = arr.length\r\n  if (length === 0) {\r\n    throw new Error('数组不能为空')\r\n  }\r\n  let value = arr[0]\r\n  for (let i = 1; i < length; i++) {\r\n    const arri = arr[i]\r\n    if (max ? arri > value : arri < value) {\r\n      value = arri\r\n    }\r\n  }\r\n  return value\r\n}\r\n\r\nexport function strideArrayMinMax(arr: number[] | TypedArrayType, dimension: number = 1, max: boolean = true): number[] {\r\n  const length = arr.length\r\n  if (length === 0 || length % dimension !== 0) {\r\n    throw new Error(`数组为空或数组长度 length: ${length} 不能被 stride: ${dimension} 整除`)\r\n  }\r\n\r\n  if (dimension === 1) {\r\n    return [arrayMinMax(arr, max)]\r\n  }\r\n\r\n  const values: number[] = []\r\n  const dimensionLength = length / dimension\r\n  // 先求 stride 个初值\r\n  for (let i = 0; i < dimension; i++) {\r\n    values.push(arr[i])\r\n  }\r\n  // 然后对整个数组进行遍历取最值\r\n  for (let j = 0; j < dimensionLength; j++) {\r\n    for (let k = 0; k < dimension; k++) {\r\n      if (max ? arr[j + k] > values[k] : arr[j + k] < values[k]) {\r\n        values[k] = arr[j + k]\r\n      }\r\n    }\r\n  }\r\n  return values\r\n}\r\n","import {\r\n  GLTFAttributeType,\r\n  GLTFComponentType\r\n} from \"src/gltf/core\";\r\n\r\nclass GLTFVertexBufferObject {\r\n  name: string;\r\n  data: ArrayBuffer;\r\n  elementType: GLTFAttributeType;\r\n  valueType: GLTFComponentType;\r\n\r\n  constructor(options: {\r\n    name: string;\r\n    data: ArrayBuffer;\r\n    elementType: GLTFAttributeType;\r\n    valueType: GLTFComponentType;\r\n  }) {\r\n    this.name = options.name;\r\n    this.data = options.data;\r\n    this.elementType = options.elementType;\r\n    this.valueType = options.valueType\r\n  }\r\n\r\n  getTypedArray() {\r\n    switch (this.valueType) {\r\n      case GLTFComponentType.BYTE:\r\n        return new Int8Array(this.data)\r\n      case GLTFComponentType.UNSIGNED_BYTE:\r\n        return new Uint8Array(this.data)\r\n      case GLTFComponentType.SHORT:\r\n        return new Int16Array(this.data)\r\n      case GLTFComponentType.UNSIGNED_SHORT:\r\n        return new Uint16Array(this.data)\r\n      case GLTFComponentType.UNSIGNED_INT:\r\n        return new Uint32Array(this.data)\r\n      case GLTFComponentType.FLOAT:\r\n        return new Float32Array(this.data)\r\n    }\r\n  }\r\n}\r\n\r\nexport default GLTFVertexBufferObject;\r\n","import {\r\n  GLTFAccessor,\r\n  GLTFAttributeType,\r\n  GLTFBuffer,\r\n  GLTFBufferView,\r\n  GLTFComponentType,\r\n  GLTFDocument,\r\n  GLTFMaterial,\r\n  GLTFMesh,\r\n  GLTFNode,\r\n  GLTFPrimitive,\r\n  GLTFScene,\r\n} from \"src/gltf/core\";\r\nimport { getAttributeTypeElementCount } from \"src/gltf/core/def/enum/gltf-attribute-type\";\r\nimport { getComponentTypeByteSize } from \"src/gltf/core/def/enum/gltf-component-type\";\r\nimport { strideArrayMinMax } from \"src/utils/array-minmax\";\r\nimport GLTFVertexBufferObject from \"./gltf-vertex-buffer-object\";\r\n\r\nfunction contact(b1: ArrayBuffer, b2: ArrayBuffer) {\r\n  if (globalThis.constructor.name === 'Object') {\r\n    // nodejs\r\n    const mergedBuffer = Buffer.concat([\r\n      new Uint8Array(b1),\r\n      new Uint8Array(b2),\r\n    ]);\r\n    return mergedBuffer.buffer;\r\n  } else {\r\n    const totalLength = b1.byteLength + b2.byteLength;\r\n    const mergedBuffer = new Uint8Array(totalLength);\r\n    mergedBuffer.set(new Uint8Array(b1), 0);\r\n    mergedBuffer.set(new Uint8Array(b2), b1.byteLength);\r\n    return mergedBuffer.buffer;\r\n  }\r\n}\r\n\r\nfunction setAttribute(\r\n  prmt: GLTFPrimitive,\r\n  name: string,\r\n  accessorIndex: number\r\n) {\r\n  const attrs = prmt.attributes;\r\n  switch (name) {\r\n    case \"position\":\r\n      attrs.position = accessorIndex;\r\n      break;\r\n    case \"uv0\":\r\n      attrs.uv0 = accessorIndex;\r\n      break;\r\n    case \"uv1\":\r\n      attrs.uv1 = accessorIndex;\r\n      break;\r\n    case \"normal\":\r\n      attrs.normal = accessorIndex;\r\n      break;\r\n    case \"_batchid\":\r\n      attrs._batchid = accessorIndex;\r\n      break;\r\n    case \"tangent\":\r\n      attrs.tangent = accessorIndex;\r\n      break;\r\n    case \"color0\":\r\n      attrs.color0 = accessorIndex;\r\n      break;\r\n    case \"weights0\":\r\n      attrs.weights0 = accessorIndex;\r\n      break;\r\n    case \"joints0\":\r\n      attrs.joints0 = accessorIndex;\r\n      break;\r\n    default:\r\n      break;\r\n  }\r\n}\r\n\r\nclass GLTFPrimitiveBuilder {\r\n  count: number;\r\n  vao: GLTFVertexBufferObject[] = [];\r\n  _mesh?: GLTFMesh;\r\n  _material?: GLTFMaterial;\r\n\r\n  constructor(vertexCount: number) {\r\n    if (!Number.isInteger(vertexCount) || vertexCount <= 0) {\r\n      throw new Error(\r\n        `[GLTFPrimitive ctor] vertexCount: ${vertexCount} 不正确`\r\n      );\r\n    }\r\n    this.count = vertexCount;\r\n  }\r\n\r\n  // 规定 position、uv0、normal 必须是 f32\r\n\r\n  setPosition(data: Float32Array) {\r\n    if (data.length / 3 !== this.count) {\r\n      return false;\r\n    }\r\n\r\n    const positionVBO = new GLTFVertexBufferObject({\r\n      name: \"position\",\r\n      data: data.buffer,\r\n      elementType: GLTFAttributeType.VEC3,\r\n      valueType: GLTFComponentType.FLOAT,\r\n    });\r\n    this.vao.push(positionVBO);\r\n    return true;\r\n  }\r\n\r\n  setUV0(data: Float32Array) {\r\n    if (data.length / 2 !== this.count) {\r\n      return false;\r\n    }\r\n\r\n    const uvVBO = new GLTFVertexBufferObject({\r\n      name: \"uv0\",\r\n      data: data.buffer,\r\n      elementType: GLTFAttributeType.VEC2,\r\n      valueType: GLTFComponentType.FLOAT,\r\n    });\r\n    this.vao.push(uvVBO);\r\n    return true;\r\n  }\r\n\r\n  setNormal(data: Float32Array) {\r\n    if (data.length / 3 !== this.count) {\r\n      return false;\r\n    }\r\n\r\n    const normalVBO = new GLTFVertexBufferObject({\r\n      name: \"normal\",\r\n      data: data.buffer,\r\n      elementType: GLTFAttributeType.VEC3,\r\n      valueType: GLTFComponentType.FLOAT,\r\n    });\r\n    this.vao.push(normalVBO);\r\n    return true;\r\n  }\r\n\r\n  setIndices(data: Uint8Array | Uint16Array | Uint32Array) {\r\n    console.log(data)\r\n  }\r\n\r\n  setOther(\r\n    vertexAttributeName: string,\r\n    data: ArrayBuffer,\r\n    dataType: GLTFAttributeType,\r\n    dataValueType: GLTFComponentType\r\n  ) {\r\n    const vbo = new GLTFVertexBufferObject({\r\n      name: vertexAttributeName,\r\n      data: data,\r\n      elementType: dataType,\r\n      valueType: dataValueType,\r\n    });\r\n    this.vao.push(vbo);\r\n  }\r\n\r\n  set mesh(value: GLTFMesh) {\r\n    this._mesh = value;\r\n  }\r\n\r\n  set material(value: GLTFMaterial) {\r\n    this._material = value;\r\n  }\r\n\r\n  submit(doc: GLTFDocument) {\r\n    let meshDef: GLTFMesh;\r\n    let nodeDef: GLTFNode | undefined;\r\n    let nodeIndex: number = -1\r\n    const prmt = GLTFPrimitive.fromJson({\r\n      attributes: {\r\n        POSITION: -1,\r\n      },\r\n      mode: 4,\r\n    });\r\n\r\n    // 若没定义 mesh\r\n    if (this._mesh === undefined) {\r\n      // 创建新的 mesh 和 node 并顺次推入 doc 中\r\n      meshDef = GLTFMesh.fromJson({\r\n        primitives: [],\r\n      });\r\n      doc.meshes.push(meshDef);\r\n      nodeDef = GLTFNode.fromJson({\r\n        children: [],\r\n        mesh: doc.meshes.length - 1,\r\n        matrix: [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]\r\n      });\r\n      nodeIndex = doc.nodes.push(nodeDef) - 1;\r\n    } else {\r\n      meshDef = this._mesh;\r\n      // 步骤1 计算 mesh 的索引号\r\n      let meshIdx = -1;\r\n      if (meshDef.doc !== undefined) {\r\n        let tempId = meshDef.doc.meshes.indexOf(meshDef);\r\n        if (tempId !== -1) {\r\n          meshIdx = tempId;\r\n        } else {\r\n          meshIdx = meshDef.doc.meshes.push(meshDef) - 1;\r\n        }\r\n      } else {\r\n        meshIdx = doc.meshes.push(meshDef) - 1;\r\n      }\r\n      // 步骤2 遍历所有 node，查找对应的 node，若无，创建新的 node\r\n      doc.nodes.forEach((node, index) => {\r\n        if (node.mesh !== undefined && node.mesh === meshIdx) {\r\n          nodeDef = node;\r\n          nodeIndex = index\r\n        }\r\n      });\r\n      if (nodeDef === undefined) {\r\n        nodeDef = GLTFNode.fromJson({\r\n          children: [],\r\n          mesh: meshIdx,\r\n          matrix: [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]\r\n        });\r\n        nodeIndex = doc.nodes.push(nodeDef) - 1;\r\n      }\r\n    }\r\n\r\n    meshDef.primitives.push(prmt);\r\n    const scene = GLTFScene.fromJson({\r\n      nodes: [nodeIndex]\r\n    })\r\n    doc.scenes.push(scene)\r\n\r\n    // 创建 accessor 和 bufferView，同时推入 data 到 buffer[0]\r\n    this.vao.forEach((vbo, index, originArr) => {\r\n      const bufferView = GLTFBufferView.fromJson({\r\n        buffer: 0,\r\n        byteLength: vbo.data.byteLength,\r\n        byteOffset: index === 0 ? 0 : originArr[index - 1].data.byteLength\r\n      });\r\n      const bvIdx = doc.bufferViews.push(bufferView) - 1;\r\n      const valueType = getComponentTypeByteSize(vbo.valueType)\r\n      const elementType = getAttributeTypeElementCount(vbo.elementType)\r\n\r\n      const dataTypedArray = vbo.getTypedArray()\r\n      const accessor = GLTFAccessor.fromJson({\r\n        componentType: vbo.valueType,\r\n        count: vbo.data.byteLength / (valueType * elementType),\r\n        type: vbo.elementType,\r\n        bufferView: bvIdx,\r\n        byteOffset: 0,\r\n        max: strideArrayMinMax(dataTypedArray, elementType, true),\r\n        min: strideArrayMinMax(dataTypedArray, elementType, false)\r\n      });\r\n      const accIdx = doc.accessors.push(accessor) - 1;\r\n      setAttribute(prmt, vbo.name, accIdx);\r\n\r\n      let bufferZero = doc.buffers[0];\r\n      if (bufferZero === undefined) {\r\n        bufferZero = GLTFBuffer.fromJson({\r\n          byteLength: 0\r\n        })\r\n        doc.buffers.push(bufferZero)\r\n      }\r\n      let bufferZeroData =\r\n        bufferZero.bufferData === undefined\r\n          ? new ArrayBuffer(0)\r\n          : bufferZero.bufferData;\r\n      bufferZero.bufferData = contact(bufferZeroData, vbo.data);\r\n      bufferZero.byteLength += vbo.data.byteLength\r\n    });\r\n\r\n    /* material 阶段 todo */\r\n    if (this._material !== undefined) {\r\n      // 获取 material 的索引\r\n      if (doc.materials !== undefined) {\r\n        const tempIdx = doc.materials.indexOf(this._material);\r\n        if (tempIdx !== -1) {\r\n          prmt.material = tempIdx;\r\n        } else {\r\n          prmt.material = doc.materials.push(this._material) - 1;\r\n        }\r\n      } else {\r\n        doc.materials = [];\r\n        prmt.material = doc.materials.push(this._material) - 1;\r\n      }\r\n\r\n      // 写入 image ?\r\n    }\r\n  }\r\n}\r\n\r\nexport default GLTFPrimitiveBuilder;\r\n","class TilesetExtBase {\r\n  \r\n}\r\n\r\nexport default TilesetExtBase","import TilesetExtBase from \"./ext-base\"\r\n\r\nclass ExtBatchtableHierarchy extends TilesetExtBase {\r\n  readonly name = \"3DTILES_batch_table_hierarchy\"\r\n\r\n  load() {\r\n    \r\n  }\r\n}\r\n\r\nexport default ExtBatchtableHierarchy","import TilesetExtBase from \"./ext-base\";\r\n\r\nclass ExtPntsDraco extends TilesetExtBase {\r\n  readonly name = \"3DTILES_draco_point_compression\"\r\n}\r\n\r\nexport default ExtPntsDraco","import TilesetExtBase from \"./ext-base\"\r\n\r\nclass ExtContentGLTF extends TilesetExtBase {\r\n  readonly name = \"3DTILES_content_gltf\"\r\n}\r\n\r\nexport default ExtContentGLTF","import TilesetExtBase from \"./ext-base\"\r\n\r\nclass ExtImplicitTiling extends TilesetExtBase {\r\n  readonly name = \"3DTILES_implicit_tiling\"\r\n}\r\n\r\nexport default ExtImplicitTiling","import TilesetExtBase from \"./ext-base\"\r\n\r\nclass ExtLayers extends TilesetExtBase {\r\n  readonly name = \"3DTILES_layers\"\r\n}\r\n\r\nexport default ExtLayers","import TilesetExtBase from \"./ext-base\"\r\n\r\nclass ExtMetadata extends TilesetExtBase {\r\n  readonly name = \"3DTILES_metadata\"\r\n}\r\n\r\nexport default ExtMetadata","import TilesetExtBase from \"./ext-base\"\r\n\r\nclass ExtMultipleContent extends TilesetExtBase {\r\n  readonly name = \"3DTILES_multiple_contents\"\r\n}\r\n\r\nexport default ExtMultipleContent","import IValidate from \"../../../interfaces/IValidate\"\r\nimport TilesetExtBase from \"../../ext/ext-base\"\r\nimport TileRefine from \"./enum/tile-refine\"\r\nimport TileBoundingVolume from \"./tile-bounding-volume\"\r\nimport TileContent from \"./tile-content\"\r\n\r\nclass Tile implements IValidate {\r\n  boundingVolume: TileBoundingVolume\r\n  geometricError: number\r\n  viewerRequestVolume?: TileBoundingVolume\r\n  refine?: TileRefine\r\n  content?: TileContent\r\n  transform?: number[] = [1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1] // wait to def as Mat4\r\n  children?: Tile[]\r\n  extensions?: Set<TilesetExtBase> = new Set()\r\n  extras?: Object\r\n\r\n  validate() {\r\n    return true\r\n  }\r\n\r\n  /**\r\n   * @todo\r\n   */\r\n  toJson() {\r\n    if (!this.validate()) {\r\n      throw new Error('[Tile toJson()] 验证此对象失败！')\r\n    }\r\n    const obj = {}\r\n    if (this.transform !== undefined) {\r\n      Object.defineProperty(obj, 'transform', {\r\n        value: this.transform\r\n      })\r\n    }\r\n\r\n  }\r\n}\r\n\r\nexport default Tile","import ITilesetConstructionParam from \"../../../interfaces/tileset/ITilesetConstructionParam\"\r\nimport TilesetExtBase from \"../../ext/ext-base\"\r\nimport Asset from \"./asset\"\r\nimport Property from \"./property\"\r\nimport Tile from \"./tile\"\r\n\r\nclass Tileset {\r\n  asset: Asset\r\n  root: Tile\r\n  geometricError: number\r\n  uri: string\r\n  extensions?: Set<TilesetExtBase> = new Set()\r\n  extras?: any\r\n  extensionsUsed?: string[] = []\r\n  extensionsRequired?: string[] = []\r\n  properties?: Map<any, Property>\r\n\r\n  constructor(options: ITilesetConstructionParam) {\r\n    this.root = options.root\r\n    this.geometricError = options.geometricError\r\n    this.uri = options.uri\r\n  }\r\n\r\n  /**\r\n   * @deprecated `Tileset.url` 已废弃，请使用 `Tileset.uri`\r\n   */\r\n  get url() {\r\n    return this.uri\r\n  }\r\n  set url(value: string) {\r\n    this.uri = value\r\n  }\r\n}\r\n\r\nexport default Tileset","import IValidate from \"../../../interfaces/IValidate\"\r\nimport TilesetExtBase from \"../../ext/ext-base\"\r\n\r\nclass TileBoundingVolume implements IValidate {\r\n  box?: number[]\r\n  region?: number[]\r\n  sphere?: number[]\r\n  extensions?: Set<TilesetExtBase>\r\n  extras?: any\r\n\r\n  validate() {\r\n    const boxExist = this.box === undefined ? 1 : 0\r\n    const regionExist = this.region === undefined ? 1 : 0\r\n    const sphereExist = this.sphere === undefined ? 1 : 0\r\n    // === 3 意思是三个都不存在\r\n    // === 2 意思是存在 1 个\r\n    // === 1 意思是存在 2 个\r\n    // === 0 意思是存在 3 个\r\n    if (boxExist + regionExist + sphereExist !== 2) {\r\n      return false\r\n    }\r\n\r\n    if ((<number[]>this.box).length != 12)\r\n      return false\r\n    if ((<number[]>this.region).length != 6)\r\n      return false\r\n    if ((<number[]>this.sphere).length != 4)\r\n      return false\r\n\r\n    return true\r\n  }\r\n}\r\n\r\nexport default TileBoundingVolume","import IValidate from \"../../../interfaces/IValidate\"\r\nimport TilesetExtBase from \"../../ext/ext-base\"\r\nimport TileBoundingVolume from \"./tile-bounding-volume\"\r\n// import * as URI from 'uri-js'\r\n\r\nclass TileContent implements IValidate {\r\n  boundingVolume?: TileBoundingVolume\r\n  uri: string\r\n  extensions?: Set<TilesetExtBase> = new Set()\r\n  extras?: any\r\n\r\n  /**\r\n   * @deprecated `TileContent.url` 已废弃，请使用 `TileContent.uri`\r\n   */\r\n  get url() {\r\n    return this.uri\r\n  }\r\n\r\n  validate() {\r\n    return true\r\n  }\r\n}\r\n\r\nexport default TileContent","import TilesetExtBase from \"../../ext/ext-base\"\r\n\r\nclass Property {\r\n  maximum: number\r\n  minimum: number\r\n  extensions?: Set<TilesetExtBase>\r\n  extras?: any\r\n}\r\n\r\nexport default Property","import IValidate from \"../../../interfaces/IValidate\"\r\nimport TilesetExtBase from \"../../ext/ext-base\"\r\n\r\nclass Asset implements IValidate {\r\n  version: string\r\n  tilesetVersion?: string\r\n  extensions?: Set<TilesetExtBase>\r\n  extras?: Object\r\n\r\n  validate() {\r\n    return true\r\n  }\r\n}\r\n\r\nexport default Asset","import IValidate from \"../../../interfaces/IValidate\";\r\n\r\nclass TileHeaderBase implements IValidate {\r\n  magic: string\r\n  version: number\r\n  byteLength: number\r\n\r\n  validate() {\r\n    return true\r\n  }\r\n}\r\n\r\nexport default TileHeaderBase","import TileHeaderBase from \"../tile-header-base\";\r\n\r\nclass B3dmHeader extends TileHeaderBase {\r\n  featureTableJSONByteLength: number\r\n  featureTableBinaryByteLength: number\r\n  batchTableJSONByteLength: number\r\n  batchTableBinaryByteLength: number\r\n\r\n  constructor() {\r\n    super()\r\n  }\r\n}\r\n\r\nexport default B3dmHeader","enum FeatureTableType {\r\n  B3dm = \"b3dm\",\r\n  I3dm = \"i3dm\",\r\n  Pnts = \"pnts\",\r\n  Vctr = \"vctr\"\r\n}\r\n\r\nexport default FeatureTableType","import IValidate from \"../../../../interfaces/IValidate\"\r\nimport TilesetExtBase from \"../../../ext/ext-base\"\r\nimport FeatureTableType from \"../enum/featuretable-type\"\r\n\r\nclass FeatureTable implements IValidate {\r\n\r\n  _json: Object\r\n  _binary: Uint8Array\r\n  extensions?: Set<TilesetExtBase>\r\n  extras?: any\r\n\r\n  featureTableType: FeatureTableType\r\n\r\n  validate() {\r\n    return false // base class always return false.\r\n  }\r\n}\r\n\r\nexport default FeatureTable","import IValidate from \"../../../../interfaces/IValidate\"\r\nimport IB3dmFTJson from \"../../../../interfaces/tileset/IB3dmFTJson\"\r\n\r\nimport FeatureTableType from \"../enum/featuretable-type\"\r\nimport FeatureTable from \"./featuretable-base\"\r\n\r\nfunction validateB3dmBatchTable(table: B3dmFeatureTable): boolean {\r\n  return table.batchLength === undefined ? false : true\r\n}\r\n\r\nfunction parse(table: B3dmFeatureTable) {\r\n  const json = table._json as IB3dmFTJson\r\n  table.batchLength = json['BATCH_LENGTH']\r\n  table.rtcCenter = json['RTC_CENTER']\r\n\r\n  if (json['extensions'] !== undefined) {\r\n    table.extensions = new Set()\r\n  }\r\n  table.extras = json['extras']\r\n}\r\n\r\nclass B3dmFeatureTable extends FeatureTable implements IValidate {\r\n\r\n  batchLength: number\r\n  rtcCenter?: number[]\r\n\r\n  /**\r\n   *\r\n   */\r\n  constructor() {\r\n    super()\r\n  }\r\n\r\n  static createFromJSON(json: Object, binary: Uint8Array) {\r\n    const ft = new B3dmFeatureTable()\r\n\r\n    ft._json = json\r\n    ft._binary = binary\r\n    ft.featureTableType = FeatureTableType.B3dm\r\n\r\n    parse(ft)\r\n\r\n    return ft\r\n  }\r\n\r\n  validate() {\r\n    return validateB3dmBatchTable(this)\r\n  }\r\n}\r\n\r\nexport default B3dmFeatureTable","import { IOBuffer } from \"iobuffer\"\r\nimport IValidate from \"../../../../interfaces/IValidate\"\r\nimport IBTBinaryRef from \"../../../../interfaces/tileset/IBTBinaryRef\"\r\nimport IBTJson, { BTJsonValue } from \"../../../../interfaces/tileset/IBTJson\"\r\nimport TilesetExtBase from \"../../../ext/ext-base\"\r\n\r\n/*\r\n  batchtable\r\n    json: 它有可能是n个数组，每个数组的长度等于不同瓦片的 featureTableJSON.XXXLength，b3dm 是 BATCH_LENGTH，等等：\r\n            {\r\n              \"name\": ['name1', 'name2', 'name3'],\r\n              \"height\": [10, 20, 5]\r\n            }\r\n          也有可能是对二进制 batchtable binary 的引用定义，拥有 byteOffset、componentType、type 三个属性的对象\r\n            {\r\n              \"name\": {\r\n                byteOffset: 16, // 相对于 batchtable binary body 的偏移值\r\n                type: \"SCALAR\",\r\n                componentType: \"INT\"\r\n              }\r\n            }\r\n          所以，batchtable 有一个弱点，不能用 binary 存储文本数据，因为第二种情况只允许存储 scalar、vec2、vec3、vec4 四种数值类型\r\n          不过使用 byte + scalar 的方式或许可以存储字节信息。\r\n    binary: 根据 json 中第二种定义而存储数据\r\n\r\n  扩展：层级 batchtable：\r\n    \r\n */\r\n\r\nfunction parse(table: BatchTable) {\r\n  for (const k of Object.keys(table._json)) {\r\n    table.variables.set(k, table._json[k])\r\n  }\r\n}\r\n\r\nclass BatchTable implements IValidate {\r\n\r\n  _json: IBTJson\r\n  _binary: Uint8Array\r\n\r\n  variables: Map<string, BTJsonValue> = new Map()\r\n  extensions?: Set<TilesetExtBase>\r\n  extras?: any\r\n\r\n  static createFromJSON(json: IBTJson, binary: Uint8Array) {\r\n    const bt = new BatchTable()\r\n    bt._json = json\r\n    bt._binary = binary\r\n\r\n    parse(bt)\r\n\r\n    return bt\r\n  }\r\n\r\n  validate() {\r\n    return true\r\n  }\r\n\r\n  get variableNames() {\r\n    return Object.keys(this._json)\r\n  }\r\n\r\n  get variableCounts() {\r\n    return this.variableNames.length\r\n  }\r\n\r\n  getVariable(name: string) {\r\n    if (this.variables.has(name)) {\r\n      const v = this.variables.get(name)\r\n      return v\r\n    }\r\n\r\n    throw new Error(`[BatchTable getVariable()] 没有这个值：${name}。`)\r\n  }\r\n}\r\n\r\nfunction timesOperator(fn: () => void, times: number) {\r\n  for (let i = 0; i < times; i++) fn()\r\n}\r\n\r\nfunction getTimes(type: string) {\r\n  return type === \"SCALAR\" ? 1 :\r\n  type === \"VEC2\" ? 2 :\r\n  type === \"VEC3\" ? 3 :\r\n  type === \"VEC4\" ? 4 : -1\r\n}\r\n\r\nfunction getReadFunction(io: IOBuffer, componentType: string) {\r\n  return componentType === \"BYTE\" ? io.readInt8 :\r\n  componentType === \"UNSIGNED_BYTE\" ? io.readUint8 :\r\n  componentType === \"SHORT\" ? io.readInt16 :\r\n  componentType === \"UNSIGNED_SHORT\" ? io.readUint16 : \r\n  componentType === \"INT\" ? io.readInt32:\r\n  componentType === \"UNSIGNED_INT\" ? io.readUint32 :\r\n  componentType === \"FLOAT\" ? io.readFloat32 : io.readFloat64\r\n}\r\n\r\n/**\r\n * 将 BatchTableBinary 读取并转换成普通的数字数组\r\n * @param {BatchTable} table BatchTable 实例\r\n * @param {IBTBinaryRef} variable 从 BatchTable JSON 中获取的引用描述对象，可使用 BatchTable.prototype.getVariable(name) 获取\r\n * @param {number} count FeatureTable 中的 XXXLength，即每个变量有多少个数据\r\n * @returns {number[]}\r\n */\r\nexport const parseBTBinary2Array = (table: BatchTable, variable: IBTBinaryRef, count: number) => {\r\n  let hasHierarchy = false\r\n  table.extensions?.forEach(ext => {\r\n    if ('name' in ext && ext['name'] === '3DTILES_batch_table_hierarchy') {\r\n      hasHierarchy = true\r\n    }\r\n  })\r\n  if (hasHierarchy) {\r\n    return\r\n  }\r\n\r\n  const io = new IOBuffer(table._binary.buffer)\r\n  io.skip(variable.byteOffset)\r\n  const result: number[] = []\r\n\r\n  for (let i = 0; i < count; i++) {\r\n    const readFunction = getReadFunction(io, variable.componentType)\r\n    timesOperator(() => result.push(readFunction()), getTimes(variable.type))\r\n  }\r\n\r\n  return result\r\n}\r\n\r\nexport default BatchTable","import { IOBuffer } from 'iobuffer'\r\n\r\nimport IValidate from \"../../../../interfaces/IValidate\"\r\n\r\nimport { GLTFDocument } from \"../../../../gltf\"\r\nimport B3dmHeader from \"./header\"\r\nimport B3dmFeatureTable from '../featuretable/featuretable-b3dm'\r\nimport { BatchTable } from \"../batchtable\"\r\n\r\nfunction parseHeader(header: B3dmHeader, io: IOBuffer) {\r\n  io.rewind()\r\n  header.magic = io.readChars(4)\r\n  header.version = io.readUint32()\r\n  header.byteLength = io.readUint32()\r\n  header.featureTableJSONByteLength = io.readUint32()\r\n  header.featureTableBinaryByteLength = io.readUint32()\r\n  header.batchTableJSONByteLength = io.readUint32()\r\n  header.batchTableBinaryByteLength = io.readUint32()\r\n}\r\n\r\nfunction parse(b3dm: B3dm, buffer: ArrayBuffer) {\r\n  const iobuffer = new IOBuffer(buffer)\r\n  parseHeader(b3dm.header, iobuffer)\r\n\r\n  if (b3dm.byteLength % 8 != 0) {\r\n    throw new Error('[B3dm 实例化错误] byteLength 未 8 字节对齐。')\r\n  }\r\n\r\n  iobuffer.rewind()\r\n  iobuffer.skip(28)\r\n  const ftJSON = JSON.parse(iobuffer.readChars(b3dm.featureTableJSONByteLength))\r\n  const ftBin = iobuffer.readBytes(b3dm.featureTableBinaryByteLength)\r\n  b3dm.featureTable = B3dmFeatureTable.createFromJSON(ftJSON, ftBin)\r\n\r\n  if (b3dm.batchTableJSONByteLength !== 0) {\r\n    const btJSON = JSON.parse(iobuffer.readChars(b3dm.batchTableJSONByteLength))\r\n    const btBin = iobuffer.readBytes(b3dm.batchTableBinaryByteLength)\r\n    b3dm.batchTable = BatchTable.createFromJSON(btJSON, btBin)\r\n  }\r\n\r\n  /* TODO: Parse GLB to GLTFDocument */\r\n}\r\n\r\nclass B3dm implements IValidate {\r\n  header: B3dmHeader\r\n  featureTable: B3dmFeatureTable\r\n  batchTable?: BatchTable\r\n  parsedGLTF: GLTFDocument\r\n  buffer?: ArrayBuffer\r\n\r\n  constructor(buffer: ArrayBuffer, cacheBuffer = false) {\r\n    this.header = new B3dmHeader()\r\n    parse(this, buffer)\r\n\r\n    if (cacheBuffer === true) {\r\n      this.buffer = buffer\r\n    }\r\n  }\r\n\r\n  validate() {\r\n    return true\r\n  }\r\n\r\n  get magic() {\r\n    return this.header.magic\r\n  }\r\n\r\n  get byteLength() {\r\n    return this.header.byteLength\r\n  }\r\n\r\n  get version() {\r\n    return this.header.version\r\n  }\r\n\r\n  get featureTableJSONByteLength() {\r\n    return this.header.featureTableJSONByteLength\r\n  }\r\n\r\n  get featureTableBinaryByteLength() {\r\n    return this.header.featureTableBinaryByteLength\r\n  }\r\n\r\n  get batchTableJSONByteLength() {\r\n    return this.header.batchTableJSONByteLength\r\n  }\r\n\r\n  get batchTableBinaryByteLength() {\r\n    return this.header.batchTableBinaryByteLength\r\n  }\r\n\r\n  get sizeWithoutGLB() {\r\n    return 28 + \r\n    this.featureTableJSONByteLength + \r\n    this.featureTableBinaryByteLength + \r\n    this.batchTableJSONByteLength + \r\n    this.batchTableBinaryByteLength\r\n  }\r\n}\r\n\r\nexport default B3dm","import IValidate from \"../../../../interfaces/IValidate\"\r\nimport TileHeaderBase from \"../tile-header-base\"\r\n\r\nclass I3dmHeader extends TileHeaderBase implements IValidate {\r\n  featureTableJSONByteLength: number\r\n  featureTableBinaryByteLength: number\r\n  batchTableJSONByteLength: number\r\n  batchTableBinaryByteLength: number\r\n  gltfFormat: number\r\n\r\n  constructor() {\r\n    super()\r\n  }\r\n\r\n  validate() {\r\n    if (this.gltfFormat !== 0 && this.gltfFormat !== 1) {\r\n      return false\r\n    }\r\n\r\n    return true\r\n  }\r\n}\r\n\r\nexport default I3dmHeader","import IValidate from \"../../../../interfaces/IValidate\"\r\nimport IFTBinaryRef from \"../../../../interfaces/tileset/IFTBinaryRef\"\r\nimport II3dmFTJson from \"../../../../interfaces/tileset/II3dmFTJson\"\r\n\r\nimport FeatureTableType from \"../enum/featuretable-type\"\r\nimport FeatureTable from \"./featuretable-base\"\r\n\r\nfunction validateI3dmBatchTable(table: I3dmFeatureTable): boolean {\r\n  if (table.position === undefined && table.positionQuantized === undefined) {\r\n    return false\r\n  }\r\n  if (table.position !== undefined && table.positionQuantized !== undefined) {\r\n    return false\r\n  }\r\n  if (table.positionQuantized !== undefined) {\r\n    if (table.quantizedVolumeOffset === undefined || table.quantizedVolumeScale === undefined) {\r\n      return false\r\n    }\r\n  }\r\n  if (\r\n    (table.normalUp === undefined && table.normalRight !== undefined) ||\r\n    (table.normalRight === undefined && table.normalUp !== undefined)\r\n  ) {\r\n    return false\r\n  }\r\n  if (\r\n    (table.normalUpOct32p === undefined && table.normalRightOct32p !== undefined) ||\r\n    (table.normalRightOct32p === undefined && table.normalUpOct32p !== undefined)\r\n  ) {\r\n    return false\r\n  }\r\n  return true\r\n}\r\n\r\nfunction parse(table: I3dmFeatureTable) {\r\n  const json = table._json as II3dmFTJson\r\n  table.position = json['POSITION']\r\n  table.positionQuantized = json['POSITION_QUANTIZED']\r\n  table.normalUp = json['NORMAL_UP']\r\n  table.normalRight = json['NORMAL_RIGHT']\r\n  table.normalUpOct32p = json['NORMAL_UP_OCT32P']\r\n  table.normalRightOct32p = json['NORMAL_RIGHT_OCT32P']\r\n  table.scale = json['SCALE']\r\n  table.scaleNonUniform = json['SCALE_NON_UNIFORM']\r\n  table.instancesLength = json['INSTANCES_LENGTH']\r\n  table.rtcCenter = json['RTC_CENTER']\r\n  table.quantizedVolumeOffset = json['QUANTIZED_VOLUME_OFFSET']\r\n  table.quantizedVolumeScale = json['QUANTIZED_VOLUME_SCALE']\r\n\r\n  if (json['extensions'] !== undefined) {\r\n    table.extensions = new Set()\r\n    // todo\r\n  }\r\n  table.extras = json['extras']\r\n}\r\n\r\nclass I3dmFeatureTable extends FeatureTable implements IValidate {\r\n\r\n  position?: IFTBinaryRef\r\n  positionQuantized?: IFTBinaryRef\r\n  normalUp?: IFTBinaryRef\r\n  normalRight?: IFTBinaryRef\r\n  normalUpOct32p?: IFTBinaryRef\r\n  normalRightOct32p?: IFTBinaryRef\r\n  scale?: IFTBinaryRef\r\n  batchId?: IFTBinaryRef\r\n  scaleNonUniform?: IFTBinaryRef\r\n\r\n  instancesLength: number\r\n\r\n  rtcCenter?: number[]\r\n  quantizedVolumeOffset?: number[]\r\n  quantizedVolumeScale?: number[]\r\n  eastNorthUp?: boolean\r\n\r\n  constructor() {\r\n    super()\r\n  }\r\n\r\n  static createFromJSON(json: Object, binary: Uint8Array) {\r\n    const ft = new I3dmFeatureTable()\r\n\r\n    ft._json = json\r\n    ft._binary = binary\r\n    ft.featureTableType = FeatureTableType.I3dm\r\n\r\n    parse(ft)\r\n\r\n    return ft\r\n  }\r\n\r\n  validate() {\r\n    return validateI3dmBatchTable(this)\r\n  }\r\n}\r\n\r\nexport default I3dmFeatureTable","import { IOBuffer } from \"iobuffer\"\r\n\r\nimport IValidate from \"../../../../interfaces/IValidate\"\r\n\r\nimport { GLTFDocument } from \"../../../../gltf\"\r\nimport I3dmFeatureTable from \"../featuretable/featuretable-i3dm\"\r\nimport I3dmHeader from \"./header\"\r\nimport { BatchTable } from \"../batchtable\"\r\n\r\nfunction parseHeader(header: I3dmHeader, io: IOBuffer) {\r\n  io.rewind()\r\n  header.magic = io.readChars(4)\r\n  header.version = io.readUint32()\r\n  header.byteLength = io.readUint32()\r\n  header.featureTableJSONByteLength = io.readUint32()\r\n  header.featureTableBinaryByteLength = io.readUint32()\r\n  header.batchTableJSONByteLength = io.readUint32()\r\n  header.batchTableBinaryByteLength = io.readUint32()\r\n  header.gltfFormat = io.readUint32()\r\n}\r\n\r\nfunction parse(i3dm: I3dm, buffer: ArrayBuffer) {\r\n  const iobuffer = new IOBuffer(buffer)\r\n  parseHeader(i3dm.header, iobuffer)\r\n\r\n  if (i3dm.byteLength % 8 != 0) {\r\n    throw new Error('[I3dm 实例化错误] byteLength 未 8 字节对齐。')\r\n  }\r\n\r\n  iobuffer.rewind()\r\n  iobuffer.skip(32)\r\n  const ftJSON = JSON.parse(iobuffer.readChars(i3dm.featureTableJSONByteLength))\r\n  const ftBin = iobuffer.readBytes(i3dm.featureTableBinaryByteLength)\r\n  i3dm.featureTable = I3dmFeatureTable.createFromJSON(ftJSON, ftBin)\r\n\r\n  if (i3dm.batchTableJSONByteLength !== 0) {\r\n    const btJSON = JSON.parse(iobuffer.readChars(i3dm.batchTableJSONByteLength))\r\n    const btBin = iobuffer.readBytes(i3dm.batchTableBinaryByteLength)\r\n    i3dm.batchTable = BatchTable.createFromJSON(btJSON, btBin)\r\n  }\r\n\r\n  /* TODO: Parse GLB to GLTFDocument */\r\n}\r\n\r\nclass I3dm implements IValidate {\r\n  header: I3dmHeader\r\n  featureTable: I3dmFeatureTable\r\n  batchTable?: BatchTable\r\n  externalData: string | GLTFDocument\r\n  buffer?: ArrayBuffer\r\n\r\n  /**\r\n   *\r\n   */\r\n  constructor(buffer: ArrayBuffer, cacheBuffer = false) {\r\n    this.header = new I3dmHeader()\r\n    parse(this, buffer)\r\n\r\n    if (cacheBuffer === true) {\r\n      this.buffer = buffer\r\n    }\r\n  }\r\n\r\n  validate() {\r\n    return true\r\n  }\r\n\r\n  get magic() {\r\n    return this.header.magic\r\n  }\r\n\r\n  get byteLength() {\r\n    return this.header.byteLength\r\n  }\r\n\r\n  get version() {\r\n    return this.header.version\r\n  }\r\n\r\n  get featureTableJSONByteLength() {\r\n    return this.header.featureTableJSONByteLength\r\n  }\r\n\r\n  get featureTableBinaryByteLength() {\r\n    return this.header.featureTableBinaryByteLength\r\n  }\r\n\r\n  get batchTableJSONByteLength() {\r\n    return this.header.batchTableJSONByteLength\r\n  }\r\n\r\n  get batchTableBinaryByteLength() {\r\n    return this.header.batchTableBinaryByteLength\r\n  }\r\n\r\n  get gltfFormat() {\r\n    return this.header.gltfFormat\r\n  }\r\n\r\n  get sizeWithoutExternalData() {\r\n    return 32 + \r\n    this.featureTableJSONByteLength + \r\n    this.featureTableBinaryByteLength + \r\n    this.batchTableJSONByteLength + \r\n    this.batchTableBinaryByteLength\r\n  }\r\n}\r\n\r\nexport default I3dm","import TileHeaderBase from \"../tile-header-base\"\r\n\r\nclass PntsHeader extends TileHeaderBase {\r\n  featureTableJSONByteLength: number\r\n  featureTableBinaryByteLength: number\r\n  batchTableJSONByteLength: number\r\n  batchTableBinaryByteLength: number\r\n  \r\n  constructor() {\r\n    super()\r\n  }\r\n}\r\n\r\nexport default PntsHeader","import IValidate from \"../../../../interfaces/IValidate\"\r\nimport IFTBinaryRef from \"../../../../interfaces/tileset/IFTBinaryRef\"\r\nimport IPntsFTJson from \"../../../../interfaces/tileset/IPntsFTJson\"\r\n\r\nimport FeatureTableType from \"../enum/featuretable-type\"\r\nimport FeatureTable from \"./featuretable-base\"\r\n\r\nfunction validatePntsFeatureTable(table: PntsFeatureTable): boolean {\r\n  if (table.position === undefined && table.positionQuantized === undefined) {\r\n    return false\r\n  }\r\n  if (table.batchId !== undefined && table.batchLength === undefined) {\r\n    return false\r\n  }\r\n  if (table.positionQuantized !== undefined) {\r\n    if (table.quantizedVolumeOffset === undefined || table.quantizedVolumeScale === undefined) {\r\n      return false\r\n    }\r\n  }\r\n  return true\r\n}\r\n\r\nfunction parse(table: PntsFeatureTable) {\r\n  const json = table._json as IPntsFTJson\r\n  table.position = json['POSITION']\r\n  table.positionQuantized = json['POSITION_QUANTIZED']\r\n  table.rgba = json['RGBA']\r\n  table.rgb = json['RGB']\r\n  table.rgb565 = json['RGB565']\r\n  table.normal = json['NORMAL']\r\n  table.normalOct16p = json['NORMAL_OCT16P']\r\n  table.batchId = json['BATCH_ID']\r\n  table.pointsLength = json['POINTS_LENGTH']\r\n  table.quantizedVolumeOffset = json['QUANTIZED_VOLUME_OFFSET']\r\n  table.quantizedVolumeScale = json['QUANTIZED_VOLUME_SCALE']\r\n  table.constantRgba = json['CONSTANT_RGBA']\r\n\r\n  if (json['extensions'] !== undefined) {\r\n    table.extensions = new Set()\r\n    // todo\r\n  }\r\n  table.extras = json['extras']\r\n}\r\n\r\nclass PntsFeatureTable extends FeatureTable implements IValidate {\r\n\r\n  position?: IFTBinaryRef\r\n  positionQuantized?: IFTBinaryRef\r\n  rgba?: IFTBinaryRef\r\n  rgb?: IFTBinaryRef\r\n  rgb565?: IFTBinaryRef\r\n  normal?: IFTBinaryRef\r\n  normalOct16p?: IFTBinaryRef\r\n\r\n  pointsLength: number\r\n  \r\n  rtcCenter?: number[]\r\n  quantizedVolumeOffset?: number[]\r\n  quantizedVolumeScale?: number[]\r\n  constantRgba?: number[]\r\n  batchId?: any\r\n  batchLength?: number\r\n\r\n  constructor() {\r\n    super()\r\n  }\r\n\r\n  static createFromJSON(json: Object, binary: Uint8Array) {\r\n    const ft = new PntsFeatureTable()\r\n    \r\n    ft._json = json\r\n    ft._binary = binary\r\n    ft.featureTableType = FeatureTableType.Pnts\r\n\r\n    parse(ft)\r\n\r\n    return ft\r\n  }\r\n\r\n  validate() {\r\n    return validatePntsFeatureTable(this)\r\n  }\r\n}\r\n\r\nexport default PntsFeatureTable","import { IOBuffer } from \"iobuffer\"\r\n\r\nimport IValidate from \"../../../../interfaces/IValidate\"\r\n\r\nimport { GLTFDocument } from \"../../../..\"\r\nimport PntsFeatureTable from \"../featuretable/featuretable-pnts\"\r\nimport PntsHeader from \"./header\"\r\nimport { BatchTable } from \"../batchtable\"\r\n\r\nfunction parseHeader(header: PntsHeader, io: IOBuffer) {\r\n  io.rewind()\r\n  header.magic = io.readChars(4)\r\n  header.version = io.readUint32()\r\n  header.byteLength = io.readUint32()\r\n  header.featureTableJSONByteLength = io.readUint32()\r\n  header.featureTableBinaryByteLength = io.readUint32()\r\n  header.batchTableJSONByteLength = io.readUint32()\r\n  header.batchTableBinaryByteLength = io.readUint32()\r\n}\r\n\r\nfunction parse(pnts: Pnts, buffer: ArrayBuffer) {\r\n  const iobuffer = new IOBuffer(buffer)\r\n  parseHeader(pnts.header, iobuffer)\r\n\r\n  if (pnts.byteLength % 8 != 0) {\r\n    throw new Error('[Pnts 实例化错误] byteLength 未 8 字节对齐。')\r\n  }\r\n\r\n  iobuffer.rewind()\r\n  iobuffer.skip(28)\r\n  const ftJSON = JSON.parse(iobuffer.readChars(pnts.featureTableJSONByteLength))\r\n  const ftBin = iobuffer.readBytes(pnts.featureTableBinaryByteLength)\r\n  pnts.featureTable = PntsFeatureTable.createFromJSON(ftJSON, ftBin)\r\n\r\n  if (pnts.batchTableJSONByteLength !== 0) {\r\n    const btJSON = JSON.parse(iobuffer.readChars(pnts.batchTableJSONByteLength))\r\n    const btBin = iobuffer.readBytes(pnts.batchTableBinaryByteLength)\r\n    pnts.batchTable = BatchTable.createFromJSON(btJSON, btBin)\r\n  }\r\n}\r\n\r\nclass Pnts implements IValidate {\r\n  header: PntsHeader\r\n  featureTable: PntsFeatureTable\r\n  batchTable?: BatchTable\r\n  parsedGLTF: GLTFDocument\r\n  buffer?: ArrayBuffer\r\n\r\n  constructor(buffer: ArrayBuffer, cacheBuffer = false) {\r\n    this.header = new PntsHeader()\r\n    parse(this, buffer)\r\n\r\n    if (cacheBuffer === true) {\r\n      this.buffer = buffer\r\n    }\r\n  }\r\n\r\n  validate() {\r\n    return true\r\n  }\r\n\r\n  get magic() {\r\n    return this.header.magic\r\n  }\r\n\r\n  get byteLength() {\r\n    return this.header.byteLength\r\n  }\r\n\r\n  get version() {\r\n    return this.header.version\r\n  }\r\n\r\n  get featureTableJSONByteLength() {\r\n    return this.header.featureTableJSONByteLength\r\n  }\r\n\r\n  get featureTableBinaryByteLength() {\r\n    return this.header.featureTableBinaryByteLength\r\n  }\r\n\r\n  get batchTableJSONByteLength() {\r\n    return this.header.batchTableJSONByteLength\r\n  }\r\n\r\n  get batchTableBinaryByteLength() {\r\n    return this.header.batchTableBinaryByteLength\r\n  }\r\n\r\n  get sizeWithoutGLB() {\r\n    return 28 + \r\n    this.featureTableJSONByteLength + \r\n    this.featureTableBinaryByteLength + \r\n    this.batchTableJSONByteLength + \r\n    this.batchTableBinaryByteLength\r\n  }\r\n}\r\n\r\nexport default Pnts","class Cmpt {\r\n\r\n}\r\n\r\nexport default Cmpt","import IValidate from \"../../../../interfaces/IValidate\"\r\nimport IFTBinaryRef from \"../../../../interfaces/tileset/IFTBinaryRef\"\r\nimport IVctrFTJson from \"../../../../interfaces/tileset/IVctrFTJson\"\r\n\r\nimport FeatureTableType from \"../enum/featuretable-type\"\r\nimport FeatureTable from \"./featuretable-base\"\r\n\r\nfunction validateVctrFeatureTable(table: VctrFeatureTable) {\r\n  if (table.region.length !== 6) {\r\n    return false\r\n  }\r\n  if ((<number[]>table.rtcCenter).length !== 3) {\r\n    return false\r\n  }\r\n  if (table.polygonsLength !== undefined) {\r\n    if (table.polygonCounts === undefined || table.polygonIndexCounts === undefined) {\r\n      return false\r\n    }\r\n  }\r\n  if (table.polylinesLength !== undefined) {\r\n    if (table.polylineCounts === undefined) {\r\n      return false\r\n    }\r\n  }\r\n  return true\r\n}\r\n\r\nfunction parse(table: VctrFeatureTable) {\r\n  const json = table._json as IVctrFTJson\r\n  table.region = json['REGION']\r\n  table.rtcCenter = json['RTC_CENTER']\r\n  table.polygonsLength = json['POLYGONS_LENGTH']\r\n  table.polylinesLength = json['POLYLINES_LENGTH']\r\n  table.pointsLength = json['POINTS_LENGTH']\r\n\r\n  table.polygonCounts = json['POLYGON_COUNTS']\r\n  table.polygonIndexCounts = json['POLYGON_INDEX_COUNTS']\r\n  table.polygonMinimumHeights = json['POLYGON_MINIMUM_HEIGHTS']\r\n  table.polygonMaximumHeights = json['POLYGON_MAXIMUM_HEIGHTS']\r\n\r\n  table.polylineCounts = json['POLYLINE_COUNTS']\r\n  table.polylineBatchIds = json['POLYLINE_BATCH_IDS']\r\n  table.pointBatchIds = json['POINT_BATCH_IDS']\r\n\r\n  if (json['extensions'] !== undefined) {\r\n    table.extensions = new Set()\r\n    // TODO\r\n  }\r\n  table.extras = json['extras']\r\n}\r\n\r\nclass VctrFeatureTable extends FeatureTable implements IValidate {\r\n  region: number[]\r\n  rtcCenter?: number[]\r\n  \r\n  polygonsLength?: number\r\n  polylinesLength?: number\r\n  pointsLength?: number\r\n  \r\n  polygonCounts?: IFTBinaryRef\r\n  polygonIndexCounts?: IFTBinaryRef\r\n  polygonMinimumHeights?: IFTBinaryRef\r\n  polygonMaximumHeights?: IFTBinaryRef\r\n  polygonBatchIds?: IFTBinaryRef\r\n  \r\n  polylineCounts?: IFTBinaryRef\r\n  polylineBatchIds?: IFTBinaryRef\r\n\r\n  pointBatchIds?: IFTBinaryRef\r\n\r\n  /**\r\n   *\r\n   */\r\n  constructor() {\r\n    super()\r\n  }\r\n\r\n  static createFromJSON(json: Object, binary: Uint8Array) {\r\n    const ft = new VctrFeatureTable()\r\n    \r\n    ft._json = json\r\n    ft._binary = binary\r\n    ft.featureTableType = FeatureTableType.Vctr\r\n\r\n    parse(ft)\r\n\r\n    return ft\r\n  }\r\n\r\n  validate() {\r\n    return validateVctrFeatureTable(this)\r\n  }\r\n}\r\n\r\nexport default VctrFeatureTable","enum TileRefine {\r\n  ADD = \"add\",\r\n  REPLACE = \"replace\"\r\n}\r\n\r\nexport default TileRefine"],"names":["GLTFVersion","GLTFComponentType","decode","GLTFBufferViewTarget","GLTFPrimitiveMode","GLTFAlphaMode","this","utf8_1","IOBuffer","MIME","GLTFVertexAttributeType","GLTFAttributeType","parse","FeatureTableType","parseHeader"],"mappings":";;;;;;EAAA,SAAS,oBAAoB,CAAC,GAAQ,EAAE,IAAY,EAAE,IAAS;MAC7D,IAAI,IAAI,KAAK,SAAS;UACpB,MAAM,CAAC,cAAc,CAAC,GAAG,EAAE,IAAI,EAAE;cAC/B,KAAK,EAAE,IAAI;cACX,UAAU,EAAE,IAAI;cAChB,QAAQ,EAAE,IAAI;cACd,YAAY,EAAE,IAAI;WACnB,CAAC,CAAA;EACN;;ECNA,SAAS,uBAAuB,CAAC,GAAQ,EAAE,IAA6B;MACtE,IAAI,IAAI,KAAK,SAAS,EAAE;UACtB,MAAM,MAAM,GAAG,EAAE,CAAA;UACjB,MAAM,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,CAAA;UACnB,CAAC,CAAC,OAAO,CAAC,GAAG;cACX,MAAM,CAAC,cAAc,CAAC,MAAM,EAAE,GAAG,CAAC,IAAI,EAAE;kBACtC,KAAK,EAAE,GAAG,CAAC,IAAI,EAAE;eAClB,CAAC,CAAA;WACH,CAAC,CAAA;UACF,MAAM,CAAC,cAAc,CAAC,GAAG,EAAE,YAAY,EAAE;cACvC,KAAK,EAAE,MAAM;WACd,CAAC,CAAA;OACH;EACH;;QCXqB,gBAAgB;MAInC,IAAI,GAAG;UACL,OAAO,IAAI,CAAC,IAAI,CAAA;OACjB;MACD,IAAI,GAAG,CAAC,GAAG;UACT,IAAI,CAAC,IAAI,GAAG,GAAG,CAAA;OAChB;MAED,QAAQ;UACN,OAAO,IAAI,CAAA;OACZ;MAED,IAAI;UACF,OAAO,EAAE,CAAA;OACV;;;ECrBH,IAAK,WAGJ;EAHD,WAAK,WAAW;MACd,0BAAW,CAAA;MACX,0BAAW,CAAA;EACb,CAAC,EAHI,WAAW,KAAX,WAAW,QAGf;EAEM,MAAM,iBAAiB,GAAG,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,WAAW,CAAkB,CAAC,CAAA;AAE3F,sBAAe,WAAW;;ECF1B,MAAM,SAAU,SAAQ,gBAAgB;MAMtC;UACE,KAAK,EAAE,CAAA;UANT,YAAO,GAAgBA,aAAW,CAAC,GAAG,CAAA;OAOrC;MAED,QAAQ;UACN,OAAO,IAAI,CAAA;OACZ;MACD,IAAI;UACF,MAAM,KAAK,GAAG;cACZ,OAAO,EAAE,IAAI,CAAC,OAAO;WACtB,CAAA;UACD,oBAAoB,CAAC,KAAK,EAAE,WAAW,EAAE,IAAI,CAAC,SAAS,CAAC,CAAA;UACxD,oBAAoB,CAAC,KAAK,EAAE,YAAY,EAAE,IAAI,CAAC,UAAU,CAAC,CAAA;UAC1D,oBAAoB,CAAC,KAAK,EAAE,WAAW,EAAE,IAAI,CAAC,SAAS,CAAC,CAAA;UACxD,oBAAoB,CAAC,KAAK,EAAE,YAAY,EAAE,IAAI,CAAC,SAAS,CAAC,CAAA;UACzD,oBAAoB,CAAC,KAAK,EAAE,QAAQ,EAAE,IAAI,CAAC,MAAM,CAAC,CAAA;UAElD,OAAO,KAAK,CAAA;OACb;MAED,OAAO,YAAY,CAAC,IAAgB;UAClC,MAAM,KAAK,GAAG,IAAI,SAAS,EAAE,CAAA;UAC7B,IAAI,iBAAiB,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE;cAC5C,KAAK,CAAC,OAAO,GAAG,IAAI,CAAC,OAAsB,CAAA;WAC5C;eAAM;cACL,MAAM,IAAI,KAAK,CAAC,yCAAyC,IAAI,CAAC,OAAO,UAAU,CAAC,CAAA;WACjF;UAED,IAAI,IAAI,CAAC,UAAU,KAAK,SAAS,EAAE;cACjC,IAAI,iBAAiB,CAAC,QAAQ,CAAC,IAAI,CAAC,UAAU,CAAC;kBAC7C,KAAK,CAAC,UAAU,GAAG,IAAI,CAAC,OAAsB,CAAA;;kBAE9C,MAAM,IAAI,KAAK,CAAC,6CAA6C,IAAI,CAAC,UAAU,UAAU,CAAC,CAAA;WAC1F;UACD,KAAK,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,CAAA;UAChC,KAAK,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,CAAA;UAChC,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAA;UAC1B,OAAO,KAAK,CAAA;OACb;;;ECjDH,IAAK,iBAQJ;EARD,WAAK,iBAAiB;MACpB,sCAAiB,CAAA;MACjB,kCAAa,CAAA;MACb,kCAAa,CAAA;MACb,kCAAa,CAAA;MACb,kCAAa,CAAA;MACb,kCAAa,CAAA;MACb,kCAAa,CAAA;EACf,CAAC,EARI,iBAAiB,KAAjB,iBAAiB,QAQrB;EAEM,MAAM,uBAAuB,GAAG,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,iBAAiB,CAAkB,CAAC,CAAA;EAEhG,MAAM,4BAA4B,GAAG,CAAC,CAAoB;MAC/D,QAAQ,CAAC;UACP,KAAK,iBAAiB,CAAC,IAAI;cACzB,OAAO,CAAC,CAAA;UACV,KAAK,iBAAiB,CAAC,IAAI;cACzB,OAAO,CAAC,CAAA;UACV,KAAK,iBAAiB,CAAC,IAAI,CAAC;UAC5B,KAAK,iBAAiB,CAAC,IAAI;cACzB,OAAO,CAAC,CAAA;UACV,KAAK,iBAAiB,CAAC,IAAI;cACzB,OAAO,CAAC,CAAA;UACV,KAAK,iBAAiB,CAAC,IAAI;cACzB,OAAO,EAAE,CAAA;UACX;cACE,OAAO,CAAC,CAAA;OACX;EACH,CAAC,CAAA;AAED,4BAAe,iBAAiB;;EC9BhC,IAAK,iBAOJ;EAPD,WAAK,iBAAiB;MACpB,4DAAW,CAAA;MACX,8EAAoB,CAAA;MACpB,8DAAY,CAAA;MACZ,gFAAqB,CAAA;MACrB,4EAAmB,CAAA;MACnB,8DAAY,CAAA;EACd,CAAC,EAPI,iBAAiB,KAAjB,iBAAiB,QAOrB;EAEM,MAAM,uBAAuB,GAAG,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,iBAAiB,CAAkB,CAAC,CAAA;EAEhG,MAAM,wBAAwB,GAAG,CAAC,CAAoB;MAC3D,QAAQ,CAAC;UACP,KAAK,iBAAiB,CAAC,IAAI,CAAC;UAC5B,KAAK,iBAAiB,CAAC,aAAa;cAClC,OAAO,CAAC,CAAA;UACV,KAAK,iBAAiB,CAAC,KAAK,CAAC;UAC7B,KAAK,iBAAiB,CAAC,cAAc;cACnC,OAAO,CAAC,CAAA;UACV,KAAK,iBAAiB,CAAC,YAAY;cACjC,OAAO,CAAC,CAAA;UACV;cACE,OAAO,CAAC,CAAA;OACX;EACH,CAAC,CAAA;AAED,4BAAe,iBAAiB;;EC1BhC;;;EAGA,IAAK,aAaJ;EAbD,WAAK,aAAa;;;;MAIhB,kCAAiB,CAAA;;;;MAIjB,8BAAa,CAAA;;;;MAIb,gCAAe,CAAA;EACjB,CAAC,EAbI,aAAa,KAAb,aAAa,QAajB;EAEM,MAAM,mBAAmB,GAAG,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,aAAa,CAAkB,CAAC,CAAA;AAE/F,wBAAe,aAAa;;ECpB5B,IAAK,UAOJ;EAPD,WAAK,UAAU;MACb,oDAAc,CAAA;MACd,kDAAa,CAAA;MACb,kFAA6B,CAAA;MAC7B,gFAA4B,CAAA;MAC5B,gFAA4B,CAAA;MAC5B,8EAA2B,CAAA;EAC7B,CAAC,EAPI,UAAU,KAAV,UAAU,QAOd;EAEM,MAAM,gBAAgB,GAAG,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,UAAU,CAAkB,CAAC,CAAA;AAEzF,qBAAe,UAAU;;ECXzB,IAAK,YAIJ;EAJD,WAAK,YAAY;MACf,uDAAc,CAAA;MACd,qEAAqB,CAAA;MACrB,yEAAuB,CAAA;EACzB,CAAC,EAJI,YAAY,KAAZ,YAAY,QAIhB;EAEM,MAAM,kBAAkB,GAAG,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,YAAY,CAAkB,CAAC,CAAA;AAE7F,uBAAe,YAAY;;ECR3B,IAAK,iBAQJ;EARD,WAAK,iBAAiB;MACpB,6DAAU,CAAA;MACV,2DAAS,CAAA;MACT,mEAAa,CAAA;MACb,qEAAc,CAAA;MACd,mEAAa,CAAA;MACb,6EAAkB,CAAA;MAClB,yEAAgB,CAAA;EAClB,CAAC,EARI,iBAAiB,KAAjB,iBAAiB,QAQrB;EAEM,MAAM,uBAAuB,GAAG,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,iBAAiB,CAAkB,CAAC,CAAA;AAEvG,4BAAe,iBAAiB;;ECZhC,IAAK,uBAUJ;EAVD,WAAK,uBAAuB;MAC1B,gDAAqB,CAAA;MACrB,sCAAW,CAAA;MACX,sCAAW,CAAA;MACX,4CAAiB,CAAA;MACjB,8CAAmB,CAAA;MACnB,4CAAiB,CAAA;MACjB,8CAAmB,CAAA;MACnB,gDAAqB,CAAA;MACrB,8CAAmB,CAAA;EACrB,CAAC,EAVI,uBAAuB,KAAvB,uBAAuB,QAU3B;AAED,kCAAe,uBAAuB;;ECZtC,IAAK,IAMJ;EAND,WAAK,IAAI;MACP,yBAAiB,CAAA;MACjB,2BAAmB,CAAA;MACnB,yBAAiB,CAAA;MACjB,2BAAmB,CAAA;MACnB,gCAAwB,CAAA;EAC1B,CAAC,EANI,IAAI,KAAJ,IAAI,QAMR;EAEyB,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAa,EAAC;AAExE,eAAe,IAAI;;ECHnB,MAAM,yBAA0B,SAAQ,gBAAgB;MAKtD;UACE,KAAK,EAAE,CAAA;OACR;MAED,QAAQ;UACN,IACE,IAAI,CAAC,aAAa,KAAKC,mBAAiB,CAAC,aAAa;cACtD,IAAI,CAAC,aAAa,KAAKA,mBAAiB,CAAC,YAAY;cACrD,IAAI,CAAC,aAAa,KAAKA,mBAAiB,CAAC,cAAc,EACvD;cACA,OAAO,KAAK,CAAA;WACb;UACD,OAAO,IAAI,CAAA;OACZ;MAED,IAAI;UACF,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,EAAE;cACpB,MAAM,IAAI,KAAK,CAAC,yEAAyE,CAAC,CAAA;WAC3F;UAED,MAAM,CAAC,GAAG;cACR,UAAU,EAAE,IAAI,CAAC,UAAU;cAC3B,UAAU,EAAE,IAAI,CAAC,UAAU;cAC3B,aAAa,EAAE,IAAI,CAAC,aAAa;WAClC,CAAA;UAED,uBAAuB,CAAC,CAAC,EAAE,IAAI,CAAC,UAAU,CAAC,CAAA;UAC3C,oBAAoB,CAAC,CAAC,EAAE,QAAQ,EAAE,IAAI,CAAC,MAAM,CAAC,CAAA;UAE9C,OAAO,CAAC,CAAA;OACT;MAED,OAAO,YAAY,CAAC,IAAgC;UAClD,MAAM,gBAAgB,GAAG,IAAI,yBAAyB,EAAE,CAAA;UAExD,gBAAgB,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAA;UACrC,gBAAgB,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,CAAA;UAC7C,gBAAgB,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,CAAA;UAC7C,IAAI,uBAAuB,CAAC,QAAQ,CAAC,IAAI,CAAC,aAAa,CAAC,EAAE;cACxD,gBAAgB,CAAC,aAAa,GAAG,IAAI,CAAC,aAAkC,CAAA;WACzE;UAED,OAAO,gBAAgB,CAAA;OACxB;;;EClDH,MAAM,wBAAyB,SAAQ,gBAAgB;MAIrD;UACE,KAAK,EAAE,CAAA;OACR;MAED,QAAQ;UACN,IAAI,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,UAAU,GAAG,CAAC,EAAE;cAC1C,OAAO,KAAK,CAAA;WACb;UACD,OAAO,IAAI,CAAA;OACZ;MAED,IAAI;UACF,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,EAAE;cACpB,MAAM,IAAI,KAAK,CAAC,uEAAuE,CAAC,CAAA;WACzF;UAED,MAAM,CAAC,GAAG;cACR,UAAU,EAAE,IAAI,CAAC,UAAU;WAC5B,CAAA;UAED,oBAAoB,CAAC,CAAC,EAAE,YAAY,EAAE,IAAI,CAAC,UAAU,CAAC,CAAA;UACtD,uBAAuB,CAAC,CAAC,EAAE,IAAI,CAAC,UAAU,CAAC,CAAA;UAC3C,oBAAoB,CAAC,CAAC,EAAE,QAAQ,EAAE,IAAI,CAAC,MAAM,CAAC,CAAA;UAE9C,OAAO,CAAC,CAAA;OACT;MAED,OAAO,YAAY,CAAC,IAA+B;UACjD,MAAM,IAAI,GAAG,IAAI,wBAAwB,EAAE,CAAA;UAE3C,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,CAAA;UACjC,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,CAAA;UACjC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAA;UAEzB,OAAO,IAAI,CAAA;OACZ;;;ECvCH,MAAM,kBAAmB,SAAQ,gBAAgB;MAK/C;UACE,KAAK,EAAE,CAAA;OACR;MAED,QAAQ;UACN,OAAO,IAAI,CAAC,KAAK,GAAG,CAAC,IAAI,IAAI,CAAC,MAAM,CAAC,QAAQ,EAAE,IAAI,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAA;OAC3E;MAED,IAAI;UACF,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,EAAE;cACpB,MAAM,IAAI,KAAK,CAAC,oDAAoD,CAAC,CAAA;WACtE;UAED,MAAM,GAAG,GAAG;cACV,KAAK,EAAE,IAAI,CAAC,KAAK;cACjB,OAAO,EAAE,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE;cAC5B,MAAM,EAAE,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE;WAC3B,CAAA;UAED,OAAO,GAAG,CAAA;OACX;MAED,OAAO,YAAY,CAAC,IAAyB;UAC3C,MAAM,MAAM,GAAG,IAAI,kBAAkB,EAAE,CAAA;UACvC,MAAM,CAAC,OAAO,GAAG,yBAAyB,CAAC,YAAY,CAAC,IAAI,CAAC,OAAO,CAAC,CAAA;UACrE,MAAM,CAAC,MAAM,GAAG,wBAAwB,CAAC,YAAY,CAAC,IAAI,CAAC,MAAM,CAAC,CAAA;UAClE,MAAM,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAA;UAE3B,OAAO,MAAM,CAAA;OACd;;;EC9BH,MAAM,YAAa,SAAQ,gBAAgB;MAYzC;UACE,KAAK,EAAE,CAAA;OACR;MAED,QAAQ;;UAEN,MAAM,WAAW,GAAG,IAAI,CAAC,UAAU,KAAK,SAAS,GAAG,CAAC,GAAG,CAAC,CAAA;UACzD,MAAM,SAAS,GAAG,IAAI,CAAC,UAAU,KAAK,SAAS,GAAG,CAAC,GAAG,CAAC,CAAA;UACvD,IAAI,WAAW,GAAG,SAAS,KAAK,CAAC,EAAE;cACjC,OAAO,KAAK,CAAA;WACb;UACD,IAAI,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,UAAU,GAAG,CAAC,EAAE;cAC1C,OAAO,KAAK,CAAA;WACb;UACD,OAAO,IAAI,CAAA;OACZ;MAED,IAAI;UACF,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,EAAE;cACpB,MAAM,IAAI,KAAK,CAAC,6CAA6C,CAAC,CAAA;WAC/D;UAED,MAAM,GAAG,GAAG;cACV,aAAa,EAAE,IAAI,CAAC,aAAa;cACjC,IAAI,EAAE,IAAI,CAAC,IAAI;cACf,KAAK,EAAE,IAAI,CAAC,KAAK;WAClB,CAAA;UAED,oBAAoB,CAAC,GAAG,EAAE,KAAK,EAAE,IAAI,CAAC,GAAG,CAAC,CAAA;UAC1C,oBAAoB,CAAC,GAAG,EAAE,KAAK,EAAE,IAAI,CAAC,GAAG,CAAC,CAAA;UAC1C,oBAAoB,CAAC,GAAG,EAAE,MAAM,EAAE,IAAI,CAAC,IAAI,CAAC,CAAA;UAC5C,oBAAoB,CAAC,GAAG,EAAE,YAAY,EAAE,IAAI,CAAC,UAAU,CAAC,CAAA;UACxD,oBAAoB,CAAC,GAAG,EAAE,QAAQ,EAAE,IAAI,CAAC,MAAM,KAAK,SAAS,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,GAAG,SAAS,CAAC,CAAA;UAC/F,oBAAoB,CAAC,GAAG,EAAE,YAAY,EAAE,IAAI,CAAC,UAAU,CAAC,CAAA;UACxD,oBAAoB,CAAC,GAAG,EAAE,YAAY,EAAE,IAAI,CAAC,UAAU,CAAC,CAAA;UACxD,uBAAuB,CAAC,GAAG,EAAE,IAAI,CAAC,UAAU,CAAC,CAAA;UAC7C,oBAAoB,CAAC,GAAG,EAAE,QAAQ,EAAE,IAAI,CAAC,MAAM,CAAC,CAAA;UAEhD,OAAO,GAAG,CAAA;OACX;MAED,OAAO,QAAQ,CAAC,IAAmB;UACjC,MAAM,GAAG,GAAG,IAAI,YAAY,EAAE,CAAA;UAC9B,IAAI,uBAAuB,CAAC,QAAQ,CAAC,IAAI,CAAC,aAAa,CAAC,EAAE;cACxD,GAAG,CAAC,aAAa,GAAG,IAAI,CAAC,aAAkC,CAAA;WAC5D;eAAM;cACL,MAAM,IAAI,KAAK,CAAC,mDAAmD,CAAC,CAAA;WACrE;UACD,GAAG,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAA;UACtB,IAAI,uBAAuB,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE;cAC/C,GAAG,CAAC,IAAI,GAAG,IAAI,CAAC,MAAM,CAAsB,CAAA;WAC7C;eAAM;cACL,MAAM,IAAI,KAAK,CAAC,yCAAyC,CAAC,CAAA;WAC3D;UACD,GAAG,CAAC,GAAG,GAAG,IAAI,CAAC,GAAG,CAAA;UAClB,GAAG,CAAC,GAAG,GAAG,IAAI,CAAC,GAAG,CAAA;UAClB,IAAI,IAAI,CAAC,MAAM,KAAK,SAAS,EAAE;cAC7B,GAAG,CAAC,MAAM,GAAG,kBAAkB,CAAC,YAAY,CAAC,IAAI,CAAC,MAAM,CAAC,CAAA;WAC1D;UACD,GAAG,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,CAAA;UAChC,GAAG,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,CAAA;UAChC,GAAG,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,CAAA;UAChC,GAAG,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAA;UACpB,GAAG,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAA;UACxB,OAAO,GAAG,CAAA;OACX;;;;;;;;;;;;ECtFH;EACA;EACA;EACA;EACA;EACA;EACA;EACA,CAAC,UAAU;AAEX;EACA,EAAE,IAAI,KAAK,GAAG,kEAAkE,CAAC;AACjF;EACA;EACA,EAAE,IAAI,MAAM,GAAG,IAAI,UAAU,CAAC,GAAG,CAAC,CAAC;EACnC,EAAE,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;EACzC,IAAI,MAAM,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;EACpC,GAAG;AACH;EACA,EAAE,cAAc,GAAG,SAAS,WAAW,EAAE;EACzC,IAAI,IAAI,KAAK,GAAG,IAAI,UAAU,CAAC,WAAW,CAAC;EAC3C,IAAI,CAAC,EAAE,GAAG,GAAG,KAAK,CAAC,MAAM,EAAE,MAAM,GAAG,EAAE,CAAC;AACvC;EACA,IAAI,KAAK,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,CAAC,EAAE;EAC/B,MAAM,MAAM,IAAI,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;EACrC,MAAM,MAAM,IAAI,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC,KAAK,CAAC,KAAK,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;EACnE,MAAM,MAAM,IAAI,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,KAAK,CAAC,KAAK,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;EACxE,MAAM,MAAM,IAAI,KAAK,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;EACzC,KAAK;AACL;EACA,IAAI,IAAI,CAAC,GAAG,GAAG,CAAC,MAAM,CAAC,EAAE;EACzB,MAAM,MAAM,GAAG,MAAM,CAAC,SAAS,CAAC,CAAC,EAAE,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC;EAC5D,KAAK,MAAM,IAAI,GAAG,GAAG,CAAC,KAAK,CAAC,EAAE;EAC9B,MAAM,MAAM,GAAG,MAAM,CAAC,SAAS,CAAC,CAAC,EAAE,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC;EAC7D,KAAK;AACL;EACA,IAAI,OAAO,MAAM,CAAC;EAClB,GAAG,CAAC;AACJ;EACA,EAAE,cAAc,IAAI,SAAS,MAAM,EAAE;EACrC,IAAI,IAAI,YAAY,GAAG,MAAM,CAAC,MAAM,GAAG,IAAI;EAC3C,IAAI,GAAG,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC,EAAE,CAAC,GAAG,CAAC;EACjC,IAAI,QAAQ,EAAE,QAAQ,EAAE,QAAQ,EAAE,QAAQ,CAAC;AAC3C;EACA,IAAI,IAAI,MAAM,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,KAAK,GAAG,EAAE;EAC3C,MAAM,YAAY,EAAE,CAAC;EACrB,MAAM,IAAI,MAAM,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,KAAK,GAAG,EAAE;EAC7C,QAAQ,YAAY,EAAE,CAAC;EACvB,OAAO;EACP,KAAK;AACL;EACA,IAAI,IAAI,WAAW,GAAG,IAAI,WAAW,CAAC,YAAY,CAAC;EACnD,IAAI,KAAK,GAAG,IAAI,UAAU,CAAC,WAAW,CAAC,CAAC;AACxC;EACA,IAAI,KAAK,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,CAAC,EAAE;EAC/B,MAAM,QAAQ,GAAG,MAAM,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC;EAC9C,MAAM,QAAQ,GAAG,MAAM,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EAChD,MAAM,QAAQ,GAAG,MAAM,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EAChD,MAAM,QAAQ,GAAG,MAAM,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAChD;EACA,MAAM,KAAK,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,QAAQ,IAAI,CAAC,KAAK,QAAQ,IAAI,CAAC,CAAC,CAAC;EACrD,MAAM,KAAK,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,QAAQ,GAAG,EAAE,KAAK,CAAC,KAAK,QAAQ,IAAI,CAAC,CAAC,CAAC;EAC5D,MAAM,KAAK,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,QAAQ,GAAG,CAAC,KAAK,CAAC,KAAK,QAAQ,GAAG,EAAE,CAAC,CAAC;EAC3D,KAAK;AACL;EACA,IAAI,OAAO,WAAW,CAAC;EACvB,GAAG,CAAC;EACJ,CAAC,GAAG;;;;;EC5DJ,SAAS,SAAS,CAAC,GAAW;MAC5B,OAAO,GAAG,CAAC,UAAU,CAAC,OAAO,CAAC,CAAA;EAChC,CAAC;EAED,MAAM,UAAW,SAAQ,gBAAgB;MAKvC;UACE,KAAK,EAAE,CAAA;UALT,eAAU,GAAW,CAAC,CAAA;OAMrB;;MAGD,IAAI,GAAG;UACL,OAAO,IAAI,CAAC,GAAG,CAAA;OAChB;MAED,QAAQ;UACN,OAAO,IAAI,CAAC,UAAU,GAAG,CAAC,CAAA;OAC3B;MAED,IAAI;UACF,MAAM,EAAE,GAAG;cACT,UAAU,EAAE,IAAI,CAAC,UAAU;WAC5B,CAAA;UACD,oBAAoB,CAAC,EAAE,EAAE,KAAK,EAAE,IAAI,CAAC,GAAG,CAAC,CAAA;UACzC,uBAAuB,CAAC,EAAE,EAAE,IAAI,CAAC,UAAU,CAAC,CAAA;UAC5C,oBAAoB,CAAC,EAAE,EAAE,QAAQ,EAAE,IAAI,CAAC,MAAM,CAAC,CAAA;UAE/C,OAAO,EAAE,CAAA;OACV;MAED,OAAO,QAAQ,CAAC,IAAiB;UAC/B,MAAM,EAAE,GAAG,IAAI,UAAU,EAAE,CAAA;UAC3B,EAAE,CAAC,GAAG,GAAG,IAAI,CAAC,GAAG,CAAA;UACjB,IAAI,EAAE,CAAC,GAAG,IAAI,SAAS,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE;cAC/B,EAAE,CAAC,UAAU,GAAGC,mBAAM,CAAC,EAAE,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC,CAAA;WAC/D;UACD,EAAE,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,CAAA;UAC/B,EAAE,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAA;;UAEvB,OAAO,EAAE,CAAA;OACV;;;ECjDH,IAAK,oBAGJ;EAHD,WAAK,oBAAoB;MACvB,mFAAoB,CAAA;MACpB,mGAA4B,CAAA;EAC9B,CAAC,EAHI,oBAAoB,KAApB,oBAAoB,QAGxB;EAEM,MAAM,0BAA0B,GAAG,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,oBAAoB,CAAkB,CAAC,CAAA;AAE7G,+BAAe,oBAAoB;;ECDnC,MAAM,cAAe,SAAQ,gBAAgB;MAO3C;UACE,KAAK,EAAE,CAAA;UAPT,WAAM,GAAW,CAAC,CAAA;UAClB,eAAU,GAAW,CAAC,CAAA;UACtB,eAAU,GAAY,CAAC,CAAA;UACvB,eAAU,GAAY,CAAC,CAAA;OAKtB;MAED,QAAQ;UACN,IAAI,IAAI,CAAC,MAAM,GAAG,CAAC,EAAE;cACnB,OAAO,KAAK,CAAA;WACb;UACD,IAAI,IAAI,CAAC,UAAU,GAAG,CAAC,EAAE;cACvB,OAAO,KAAK,CAAA;WACb;UACD,IAAI,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,UAAU,GAAG,CAAC,EAAE;cAC1C,OAAO,KAAK,CAAA;WACb;UACD,IAAI,IAAI,CAAC,UAAU,KAAK,IAAI,CAAC,UAAU,GAAG,CAAC,KAAK,CAAC,IAAI,IAAI,CAAC,UAAU,GAAG,GAAG,IAAI,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC,EAAE;cAClG,OAAO,KAAK,CAAA;WACb;UACD,OAAO,IAAI,CAAA;OACZ;MAED,IAAI;UACF,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,EAAE;cACpB,MAAM,IAAI,KAAK,CAAC,iDAAiD,CAAC,CAAA;WACnE;UAED,MAAM,EAAE,GAAG;cACT,MAAM,EAAE,IAAI,CAAC,MAAM;cACnB,UAAU,EAAE,IAAI,CAAC,UAAU;WAC5B,CAAA;UAED,IAAI,IAAI,CAAC,MAAM,KAAKC,sBAAoB,CAAC,YAAY,IAAI,IAAI,CAAC,MAAM,KAAKA,sBAAoB,CAAC,oBAAoB,EAAE;cAClH,oBAAoB,CAAC,EAAE,EAAE,QAAQ,EAAE,IAAI,CAAC,MAAM,CAAC,CAAA;WAChD;UACD,oBAAoB,CAAC,EAAE,EAAE,YAAY,EAAE,IAAI,CAAC,UAAU,CAAC,CAAA;UACvD,IAAI,IAAI,CAAC,UAAU,KAAK,CAAC,EAAE;cACzB,oBAAoB,CAAC,EAAE,EAAE,YAAY,EAAE,IAAI,CAAC,UAAU,CAAC,CAAA;WACxD;UACD,uBAAuB,CAAC,EAAE,EAAE,IAAI,CAAC,UAAU,CAAC,CAAA;UAC5C,oBAAoB,CAAC,EAAE,EAAE,QAAQ,EAAE,IAAI,CAAC,MAAM,CAAC,CAAA;UAE/C,OAAO,EAAE,CAAA;OACV;MAED,OAAO,QAAQ,CAAC,IAAqB;UACnC,MAAM,EAAE,GAAG,IAAI,cAAc,EAAE,CAAA;UAC/B,EAAE,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAA;UACvB,EAAE,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,CAAA;UAC/B,EAAE,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,CAAA;UAC/B,EAAE,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAA;UACvB,IAAI,IAAI,CAAC,MAAM,KAAK,SAAS,IAAI,0BAA0B,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE;cACjF,EAAE,CAAC,MAAM,GAAG,IAAI,CAAC,MAA8B,CAAA;WAChD;UACD,OAAO,EAAE,CAAA;OACV;;;EC7DH,MAAM,SAAU,SAAQ,gBAAgB;MAItC;UACE,KAAK,EAAE,CAAA;UAJT,UAAK,GAAa,EAAE,CAAA;OAKnB;MAED,QAAQ;UACN,OAAO,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAA;OAC7B;MAED,IAAI;UACF,MAAM,CAAC,GAAG;cACR,KAAK,EAAE,IAAI,CAAC,KAAK;WAClB,CAAA;UACD,oBAAoB,CAAC,CAAC,EAAE,MAAM,EAAE,IAAI,CAAC,IAAI,CAAC,CAAA;UAC1C,uBAAuB,CAAC,CAAC,EAAE,IAAI,CAAC,UAAU,CAAC,CAAA;UAC3C,OAAO,CAAC,CAAA;OACT;MAED,OAAO,QAAQ,CAAC,IAAgB;UAC9B,MAAM,KAAK,GAAG,IAAI,SAAS,EAAE,CAAA;UAC7B,KAAK,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAA;UACtB,KAAK,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAA;UACxB,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAA;UAC1B,OAAO,KAAK,CAAA;OACb;;;EC3BH,SAAS,kBAAkB,CAAC,EAAY;MACtC,IAAI,IAAI,GAAG,IAAI,CAAA;MACf,IAAI,EAAE,CAAC,MAAM,KAAK,SAAS,EAAE;UAC3B,IAAI,EAAE,CAAC,QAAQ,KAAK,SAAS,IAAI,EAAE,CAAC,KAAK,KAAK,SAAS,IAAI,EAAE,CAAC,WAAW,KAAK,SAAS,EAAE;cACvF,IAAI,GAAG,KAAK,CAAA;WACb;OACF;WAAM,IAAI,EAAE,CAAC,QAAQ,KAAK,SAAS,IAAI,EAAE,CAAC,KAAK,KAAK,SAAS,IAAI,EAAE,CAAC,WAAW,KAAK,SAAS,EAAE;UAC9F,IAAI,GAAG,KAAK,CAAA;OACb;MAED,IAAI,EAAE,CAAC,QAAQ,EAAE;UACf,IAAI,GAAG,EAAE,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAA;OAC/C;MAED,OAAO,IAAI,CAAA;EACb,CAAC;EAED,MAAM,QAAS,SAAQ,gBAAgB;MAiBrC;UACE,KAAK,EAAE,CAAA;UAjBT,aAAQ,GAAa,EAAE,CAAA;OAkBtB;MAED,OAAO;UACL,IAAI,IAAI,CAAC,GAAG,KAAK,SAAS,EAAE;cAC1B,OAAO,IAAI,CAAA;WACZ;UACD,IAAI,IAAI,CAAC,IAAI,KAAK,SAAS,EAAE;cAC3B,OAAO,IAAI,CAAA;WACZ;eAAM,IAAI,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,MAAM,GAAG,IAAI,CAAC,IAAI,EAAE;cAC7C,OAAO,IAAI,CAAA;WACZ;UAED,OAAO,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAA;OAClC;MAED,QAAQ;UACN,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,EAAE;cAC7B,OAAO,KAAK,CAAA;WACb;UACD,IAAI,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,EAAE;cAC3C,OAAO,KAAK,CAAA;WACb;eAAM,IAAI,IAAI,CAAC,OAAO,KAAK,SAAS,IAAI,IAAI,CAAC,IAAI,KAAK,SAAS,EAAE;cAChE,OAAO,KAAK,CAAA;WACb;UACD,IAAI,IAAI,CAAC,IAAI,KAAK,SAAS,IAAI,IAAI,CAAC,IAAI,KAAK,SAAS,EAAE;cACtD,OAAO,KAAK,CAAA;WACb;UAED,IAAI,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,EAAE;cAC7C,IAAI,IAAI,GAAG,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,IAAI,KAAK,IAAI,CAAC,QAAQ,CAAC,MAAM;kBACtD,OAAO,KAAK,CAAA;WACf;UACD,OAAO,IAAI,CAAA;OACZ;MAED,IAAI;UACF,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,EAAE;cACpB,MAAM,IAAI,KAAK,CAAC,uCAAuC,CAAC,CAAA;WACzD;UAED,MAAM,CAAC,GAAG,EAAE,CAAA;UAEZ,oBAAoB,CAAC,CAAC,EAAE,MAAM,EAAE,IAAI,CAAC,IAAI,CAAC,CAAA;UAC1C,oBAAoB,CAAC,CAAC,EAAE,UAAU,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAA;UAClD,oBAAoB,CAAC,CAAC,EAAE,aAAa,EAAE,IAAI,CAAC,WAAW,CAAC,CAAA;UACxD,oBAAoB,CAAC,CAAC,EAAE,OAAO,EAAE,IAAI,CAAC,KAAK,CAAC,CAAA;UAC5C,MAAM,CAAC,GAAG,IAAI,CAAC,MAAM,CAAA;UACrB,IAAI,CAAC,EAAE;cACL,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,EAAE;kBAC7D,oBAAoB,CAAC,CAAC,EAAE,QAAQ,EAAE,IAAI,CAAC,MAAM,CAAC,CAAA;eAC/C;WACF;UACD,oBAAoB,CAAC,CAAC,EAAE,SAAS,EAAE,IAAI,CAAC,OAAO,CAAC,CAAA;UAChD,oBAAoB,CAAC,CAAC,EAAE,MAAM,EAAE,IAAI,CAAC,IAAI,CAAC,CAAA;UAC1C,oBAAoB,CAAC,CAAC,EAAE,QAAQ,EAAE,IAAI,CAAC,MAAM,CAAC,CAAA;UAC9C,oBAAoB,CAAC,CAAC,EAAE,MAAM,EAAE,IAAI,CAAC,IAAI,CAAC,CAAA;UAE1C,IAAI,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,MAAM,KAAK,CAAC,EAAE;cAC/C,oBAAoB,CAAC,CAAC,EAAE,UAAU,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAA;WACnD;UACD,uBAAuB,CAAC,CAAC,EAAE,IAAI,CAAC,UAAU,CAAC,CAAA;UAC3C,oBAAoB,CAAC,CAAC,EAAE,QAAQ,EAAE,IAAI,CAAC,MAAM,CAAC,CAAA;UAE9C,OAAO,CAAC,CAAA;OACT;MAED,OAAO,QAAQ,CAAC,IAAe;UAC7B,MAAM,IAAI,GAAG,IAAI,QAAQ,EAAE,CAAA;UAC3B,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAA;UACrB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAA;UACrB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAA;UACzB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAA;UAC7B,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAA;UACvB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAA;UACrB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAA;UAC7B,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,CAAA;UAC3B,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAA;UACnC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAA;UACzB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAA;UACzB,OAAO,IAAI,CAAA;OACZ;;;ECpHH,MAAM,sBAAsB;MAa1B,OAAO,QAAQ,CAAC,IAA6B;UAC3C,MAAM,IAAI,GAAG,IAAI,sBAAsB,EAAE,CAAA;UACzC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAA;UAC7B,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,UAAU,CAAA;UAC1B,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,UAAU,CAAA;UAC1B,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,OAAO,CAAA;UAC1B,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAA;UACzB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,CAAA;UAC3B,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,QAAQ,CAAA;UAC5B,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAA;UAC9B,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAA;UAC7B,OAAO,IAAI,CAAA;OACZ;MAED,QAAQ;UACN,OAAO,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,KAAK,CAAC,CAAC,IAAI,CAAE,GAAG,CAAC,CAAC,CAAA;OAC9C;MAED,IAAI;UACF,MAAM,IAAI,GAAG;cACX,QAAQ,EAAE,IAAI,CAAC,QAAQ;WACxB,CAAA;UACD,oBAAoB,CAAC,IAAI,EAAE,QAAQ,EAAE,IAAI,CAAC,MAAM,CAAC,CAAA;UACjD,oBAAoB,CAAC,IAAI,EAAE,SAAS,EAAE,IAAI,CAAC,OAAO,CAAC,CAAA;UACnD,oBAAoB,CAAC,IAAI,EAAE,YAAY,EAAE,IAAI,CAAC,GAAG,CAAC,CAAA;UAClD,oBAAoB,CAAC,IAAI,EAAE,YAAY,EAAE,IAAI,CAAC,GAAG,CAAC,CAAA;UAClD,oBAAoB,CAAC,IAAI,EAAE,SAAS,EAAE,IAAI,CAAC,MAAM,CAAC,CAAA;UAClD,oBAAoB,CAAC,IAAI,EAAE,UAAU,EAAE,IAAI,CAAC,OAAO,CAAC,CAAA;UACpD,oBAAoB,CAAC,IAAI,EAAE,WAAW,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAA;UACtD,oBAAoB,CAAC,IAAI,EAAE,UAAU,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAA;UAErD,OAAO,IAAI,CAAA;OACZ;;;EC3CH,MAAM,aAAc,SAAQ,gBAAgB;MAO1C;UACE,KAAK,EAAE,CAAA;UANT,eAAU,GAA2B,IAAI,sBAAsB,EAAE,CAAA;UAGjE,SAAI,GAAuBC,mBAAiB,CAAC,SAAS,CAAA;OAIrD;;;;;;;;;;;MAYD,WAAW,CAAC,QAAgB;UAC1B,QAAQ,QAAQ,CAAC,WAAW,EAAE;cAC5B,KAAK,KAAK,CAAC;cACX,KAAK,IAAI;kBACP,IAAI,IAAI,CAAC,UAAU,CAAC,GAAG,KAAK,SAAS,EAAE;sBACrC,OAAO,IAAI,CAAC,GAAG,EAAE,SAAS,CAAC,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,CAAA;mBAChD;kBACD,OAAO,SAAS,CAAA;cAClB,KAAK,KAAK;kBACR,IAAI,IAAI,CAAC,UAAU,CAAC,GAAG,KAAK,SAAS,EAAE;sBACrC,OAAO,IAAI,CAAC,GAAG,EAAE,SAAS,CAAC,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,CAAA;mBAChD;kBACD,OAAO,SAAS,CAAA;cAClB,KAAK,QAAQ,CAAC;cACd,KAAK,OAAO;kBACV,IAAI,IAAI,CAAC,UAAU,CAAC,MAAM,KAAK,SAAS,EAAE;sBACxC,OAAO,IAAI,CAAC,GAAG,EAAE,SAAS,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,CAAA;mBACnD;kBACD,OAAO,SAAS,CAAA;cAClB,KAAK,QAAQ;kBACX,IAAI,IAAI,CAAC,UAAU,CAAC,MAAM,KAAK,SAAS,EAAE;sBACxC,OAAO,IAAI,CAAC,GAAG,EAAE,SAAS,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,CAAA;mBACnD;kBACD,OAAO,SAAS,CAAA;cAClB,KAAK,SAAS;kBACZ,IAAI,IAAI,CAAC,UAAU,CAAC,OAAO,KAAK,SAAS,EAAE;sBACzC,OAAO,IAAI,CAAC,GAAG,EAAE,SAAS,CAAC,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,CAAA;mBACpD;kBACD,OAAO,SAAS,CAAA;cAClB,KAAK,SAAS,CAAC;cACf,KAAK,QAAQ;kBACX,IAAI,IAAI,CAAC,UAAU,CAAC,OAAO,KAAK,SAAS,EAAE;sBACzC,OAAO,IAAI,CAAC,GAAG,EAAE,SAAS,CAAC,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,CAAA;mBACpD;kBACD,OAAO,SAAS,CAAA;cAClB,KAAK,UAAU,CAAC;cAChB,KAAK,SAAS;kBACZ,IAAI,IAAI,CAAC,UAAU,CAAC,QAAQ,KAAK,SAAS,EAAE;sBAC1C,OAAO,IAAI,CAAC,GAAG,EAAE,SAAS,CAAC,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAA;mBACrD;kBACD,OAAO,SAAS,CAAA;cAClB,KAAK,UAAU,CAAC;cAChB,KAAK,SAAS;kBACZ,IAAI,IAAI,CAAC,UAAU,CAAC,QAAQ,KAAK,SAAS,EAAE;sBAC1C,OAAO,IAAI,CAAC,GAAG,EAAE,SAAS,CAAC,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAA;mBACrD;kBACD,OAAO,SAAS,CAAA;cAClB;kBACE,OAAO,IAAI,CAAC,GAAG,EAAE,SAAS,CAAC,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAA;WACvD;OACF;MAED,QAAQ;UACN,IAAI,IAAI,CAAC,UAAU,CAAC,QAAQ,EAAE,KAAK,KAAK,EAAE;cACxC,OAAO,KAAK,CAAA;WACb;UACD,IAAI,IAAI,CAAC,OAAQ,GAAG,CAAC,EAAE;cACrB,OAAO,KAAK,CAAA;WACb;UACD,IAAI,IAAI,CAAC,QAAS,GAAG,CAAC,EAAE;cACtB,OAAO,KAAK,CAAA;WACb;UACD,OAAO,IAAI,CAAA;OACZ;MAED,IAAI;UACF,MAAM,IAAI,GAAG;cACX,UAAU,EAAE,IAAI,CAAC,UAAU,CAAC,IAAI,EAAE;WACnC,CAAA;UACD,IAAI,IAAI,CAAC,IAAI,KAAKA,mBAAiB,CAAC,SAAS,IAAI,IAAI,CAAC,IAAI,KAAK,SAAS,EAAE;cACxE,oBAAoB,CAAC,IAAI,EAAE,MAAM,EAAE,IAAI,CAAC,IAAI,CAAC,CAAA;WAC9C;UACD,oBAAoB,CAAC,IAAI,EAAE,SAAS,EAAE,IAAI,CAAC,OAAO,CAAC,CAAA;UACnD,oBAAoB,CAAC,IAAI,EAAE,UAAU,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAA;UACrD,uBAAuB,CAAC,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC,CAAA;UAC9C,oBAAoB,CAAC,IAAI,EAAE,QAAQ,EAAE,IAAI,CAAC,MAAM,CAAC,CAAA;UAEjD,OAAO,IAAI,CAAA;OACZ;MAED,OAAO,QAAQ,CAAC,IAAoB;UAClC,MAAM,IAAI,GAAG,IAAI,aAAa,EAAE,CAAA;UAChC,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,CAAA;UAC3B,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAA;UAC7B,IAAI,IAAI,CAAC,IAAI,KAAK,SAAS,IAAI,IAAI,CAAC,IAAI,KAAK,CAAC,EAAE;cAC9C,IAAI,uBAAuB,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE;kBAC/C,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAyB,CAAA;eAC3C;mBAAM;kBACL,MAAM,IAAI,KAAK,CAAC,uCAAuC,IAAI,CAAC,IAAI,UAAU,CAAC,CAAA;eAC5E;WACF;UACD,IAAI,CAAC,UAAU,GAAG,sBAAsB,CAAC,QAAQ,CAAC,IAAI,CAAC,UAAU,CAAC,CAAA;UAClE,OAAO,IAAI,CAAA;OACZ;;;EClHH,MAAM,QAAS,SAAQ,gBAAgB;MAKrC;UACE,KAAK,EAAE,CAAA;UALT,eAAU,GAAoB,EAAE,CAAA;OAM/B;MAED,IAAI,GAAG,CAAC,KAAmB;UACzB,IAAI,CAAC,IAAI,GAAG,KAAK,CAAA;UACjB,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,GAAG,KAAK,CAAC,CAAA;OAC5C;MAED,QAAQ;UACN,IAAI,IAAI,GAAG,KAAK,CAAA;UAChB,IAAI,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,SAAS,IAAI,SAAS,CAAC,QAAQ,EAAE,CAAC,EAAE;cAC5D,IAAI,GAAG,IAAI,CAAA;WACZ;UACD,OAAO,IAAI,CAAA;OACZ;MAED,IAAI;UACF,MAAM,IAAI,GAAG;cACX,UAAU,EAAE,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,IAAI,IAAI,IAAI,CAAC,IAAI,EAAE,CAAC;WACrD,CAAA;UACD,oBAAoB,CAAC,IAAI,EAAE,SAAS,EAAE,IAAI,CAAC,OAAO,CAAC,CAAA;UACnD,oBAAoB,CAAC,IAAI,EAAE,MAAM,EAAE,IAAI,CAAC,IAAI,CAAC,CAAA;UAC7C,uBAAuB,CAAC,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC,CAAA;UAE9C,OAAO,IAAI,CAAA;OACZ;MAED,OAAO,QAAQ,CAAC,IAAe;UAC7B,MAAM,IAAI,GAAG,IAAI,QAAQ,EAAE,CAAA;UAC3B,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAA;UACrB,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,OAAO,IAAI,aAAa,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAA;UACjF,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,CAAA;UAC3B,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAA;UACzB,OAAO,IAAI,CAAA;OACZ;;;EC5CH,MAAM,eAAgB,SAAQ,gBAAgB;MAI5C,YAAY,KAAa,EAAE,QAAgB;UACzC,KAAK,EAAE,CAAA;UACP,IAAI,CAAC,KAAK,GAAG,KAAK,CAAA;UAClB,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAA;OACzB;MAED,QAAQ;UACN,QAAQ,IAAI,CAAC,KAAK,GAAG,CAAC,IAAI,IAAI,CAAC,QAAQ,GAAG,CAAC,EAAC;OAC7C;MAED,IAAI;UACF,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,EAAE;cACpB,MAAM,IAAI,KAAK,CAAC,qDAAqD,CAAC,CAAA;WACvE;UAED,MAAM,KAAK,GAAG;cACZ,KAAK,EAAE,IAAI,CAAC,KAAK;cACjB,QAAQ,EAAE,IAAI,CAAC,QAAQ;WACxB,CAAA;UAED,OAAO,KAAK,CAAA;OACb;MAED,OAAO,QAAQ,CAAC,IAAsB;UACpC,MAAM,WAAW,GAAG,IAAI,eAAe,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAA;UAClE,WAAW,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAA;UAEhC,OAAO,WAAW,CAAA;OACnB;;;EC9BH,MAAM,qBACN,SAAQ,eAAe;MAGrB,YAAY,KAAa,EAAE,QAAgB,EAAE,KAAa;UACxD,KAAK,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAA;UACtB,IAAI,CAAC,KAAK,GAAG,KAAK,CAAA;OACnB;MAED,QAAQ;UACN,OAAO,IAAI,CAAA;OACZ;MAED,IAAI;UACF,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,EAAE;cACpB,MAAM,IAAI,KAAK,CAAC,gEAAgE,CAAC,CAAA;WAClF;UAED,MAAM,EAAE,GAAG,KAAK,CAAC,IAAI,EAAE,CAAA;UACvB,oBAAoB,CAAC,EAAE,EAAE,OAAO,EAAE,IAAI,CAAC,KAAK,CAAC,CAAA;UAC7C,uBAAuB,CAAC,EAAE,EAAE,IAAI,CAAC,UAAU,CAAC,CAAA;UAC5C,oBAAoB,CAAC,EAAE,EAAE,QAAQ,EAAE,IAAI,CAAC,MAAM,CAAC,CAAA;UAE/C,OAAO,EAAE,CAAA;OACV;MAED,OAAO,QAAQ,CAAC,IAA4B;UAC1C,MAAM,iBAAiB,GAAG,IAAI,qBAAqB,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,KAAK,CAAC,CAAA;UAC1F,iBAAiB,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAA;UACtC,OAAO,iBAAiB,CAAA;OACzB;;;EC7BH,MAAM,OAAQ,SAAQ,gBAAgB;MAOpC;UACE,KAAK,EAAE,CAAA;UAPT,oBAAe,GAAsC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAA;OAQhE;MAED,QAAQ;UACN,IAAI,IAAI,CAAC,eAAe,IAAI,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE;cAC3E,OAAO,KAAK,CAAA;WACb;UACD,IAAI,IAAI,CAAC,eAAe,KAAK,SAAS,EAAE;cACtC,IAAI,IAAI,CAAC,eAAe,GAAG,CAAC,IAAI,IAAI,CAAC,eAAe,GAAG,CAAC;kBACtD,OAAO,KAAK,CAAA;WACf;UACD,IAAI,CAAC,IAAI,CAAC,cAAc,KAAK,SAAS,IAAI,IAAI,CAAC,cAAc,GAAG,CAAC;kBAC3D,IAAI,CAAC,cAAc,KAAK,SAAS,IAAI,IAAI,CAAC,cAAc,GAAG,CAAC,CAAC,EAAE;cACnE,OAAO,KAAK,CAAA;WACb;UACD,IAAI,IAAI,CAAC,gBAAgB,EAAE,QAAQ,EAAE,KAAK,KAAK,IAAI,IAAI,CAAC,wBAAwB,EAAE,QAAQ,EAAE,KAAK,KAAK,EAAE;cACtG,OAAO,KAAK,CAAA;WACb;UACD,OAAO,IAAI,CAAA;OACZ;MAED,IAAI;UACF,IAAI,IAAI,CAAC,QAAQ,EAAE,KAAK,KAAK,EAAE;cAC7B,MAAM,IAAI,KAAK,CAAC,mCAAmC,CAAC,CAAA;WACrD;UAED,MAAM,GAAG,GAAG,EAAE,CAAA;UAEd,IAAI,IAAI,CAAC,eAAe,KAAK,SAAS,IAAI,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,KAAK,GAAG,CAAC,EAAE;cACpF,oBAAoB,CAAC,GAAG,EAAE,iBAAiB,EAAE,IAAI,CAAC,eAAe,CAAC,CAAA;WACnE;UACD,oBAAoB,CAAC,GAAG,EAAE,kBAAkB,EAAE,IAAI,CAAC,gBAAgB,KAAK,SAAS,GAAG,IAAI,CAAC,gBAAgB,CAAC,IAAI,EAAE,GAAG,SAAS,CAAC,CAAA;UAC7H,oBAAoB,CAAC,GAAG,EAAE,gBAAgB,EAAE,IAAI,CAAC,cAAc,IAAI,IAAI,CAAC,cAAc,KAAK,CAAC,GAAG,SAAS,GAAG,IAAI,CAAC,cAAc,CAAC,CAAA;UAC/H,oBAAoB,CAAC,GAAG,EAAE,iBAAiB,EAAE,IAAI,CAAC,eAAe,IAAI,IAAI,CAAC,eAAe,KAAK,CAAC,GAAG,SAAS,GAAG,IAAI,CAAC,eAAe,CAAC,CAAA;UACnI,oBAAoB,CAAC,GAAG,EAAE,0BAA0B,EAAE,IAAI,CAAC,wBAAwB,KAAK,SAAS,GAAG,IAAI,CAAC,wBAAwB,CAAC,IAAI,EAAE,GAAG,SAAS,CAAC,CAAA;UACrJ,uBAAuB,CAAC,GAAG,EAAE,IAAI,CAAC,UAAU,CAAC,CAAA;UAC7C,oBAAoB,CAAC,GAAG,EAAE,QAAQ,EAAE,IAAI,CAAC,MAAM,CAAC,CAAA;UAEhD,OAAO,GAAG,CAAA;OACX;MAED,OAAO,QAAQ,CAAC,IAAc;UAC5B,MAAM,GAAG,GAAG,IAAI,OAAO,EAAE,CAAA;UAEzB,GAAG,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAA;UACxB,GAAG,CAAC,cAAc,GAAG,IAAI,CAAC,cAAc,CAAA;UACxC,GAAG,CAAC,eAAe,GAAG,IAAI,CAAC,eAAe,CAAA;UAC1C,GAAG,CAAC,eAAe,GAAG,IAAI,CAAC,eAAe,CAAA;UAC1C,IAAI,IAAI,CAAC,gBAAgB,KAAK,SAAS,EAAE;cACvC,GAAG,CAAC,gBAAgB,GAAG,eAAe,CAAC,QAAQ,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAA;WACvE;UACD,IAAI,IAAI,CAAC,wBAAwB,KAAK,SAAS,EAAE;cAC/C,GAAG,CAAC,wBAAwB,GAAG,eAAe,CAAC,QAAQ,CAAC,IAAI,CAAC,wBAAwB,CAAC,CAAA;WACvF;UAED,OAAO,GAAG,CAAA;OACX;;;EC1DH,MAAM,YAAa,SAAQ,gBAAgB;MAWzC;UACE,KAAK,EAAE,CAAA;UANT,mBAAc,GAA8B,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAA;UACrD,cAAS,GAAmBC,eAAa,CAAC,MAAM,CAAA;UAChD,gBAAW,GAAY,GAAG,CAAA;UAC1B,gBAAW,GAAa,KAAK,CAAA;OAI5B;MAED,IAAI,GAAG,CAAC,KAAmB;UACzB,IAAI,CAAC,IAAI,GAAG,KAAK,CAAA;UACjB,IAAI,IAAI,CAAC,oBAAoB,KAAK,SAAS,EAAE;cAC3C,IAAI,CAAC,oBAAoB,CAAC,GAAG,GAAG,KAAK,CAAA;WACtC;UACD,IAAI,IAAI,CAAC,aAAa,KAAK,SAAS,EAAE;cACpC,IAAI,CAAC,aAAa,CAAC,GAAG,GAAG,KAAK,CAAA;WAC/B;UACD,IAAI,IAAI,CAAC,eAAe,KAAK,SAAS,EAAE;cACtC,IAAI,CAAC,eAAe,CAAC,GAAG,GAAG,KAAK,CAAA;WACjC;UACD,IAAI,IAAI,CAAC,gBAAgB,KAAK,SAAS,EAAE;cACvC,IAAI,CAAC,gBAAgB,CAAC,GAAG,GAAG,KAAK,CAAA;WAClC;OACF;MAED,QAAQ;UACN,IAAI,IAAI,CAAC,oBAAoB,EAAE,QAAQ,EAAE,KAAK,KAAK,EAAE;cACnD,OAAO,KAAK,CAAA;WACb;UACD,IAAI,IAAI,CAAC,aAAa,EAAE,QAAQ,EAAE,KAAK,KAAK,EAAE;cAC5C,OAAO,KAAK,CAAA;WACb;UACD,IAAI,IAAI,CAAC,gBAAgB,EAAE,QAAQ,EAAE,KAAK,KAAK,EAAE;cAC/C,OAAO,KAAK,CAAA;WACb;UACD,IAAI,IAAI,CAAC,SAAS,KAAKA,eAAa,CAAC,IAAI,IAAI,IAAI,CAAC,WAAW,KAAK,SAAS,EAAE;cAC3E,OAAO,KAAK,CAAA;WACb;UACD,IAAI,IAAI,CAAC,cAAc,EAAE,KAAK,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE;cACnD,OAAO,KAAK,CAAA;WACb;UACD,OAAO,IAAI,CAAA;OACZ;MAED,IAAI;UACF,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,EAAE;cACpB,MAAM,IAAI,KAAK,CAAC,+CAA+C,CAAC,CAAA;WACjE;UAED,MAAM,CAAC,GAAG,EAAE,CAAA;UAEZ,oBAAoB,CAAC,CAAC,EAAE,MAAM,EAAE,IAAI,CAAC,IAAI,CAAC,CAAA;UAC1C,oBAAoB,CAAC,CAAC,EAAE,sBAAsB,EAAE,IAAI,CAAC,oBAAoB,KAAK,SAAS,GAAG,IAAI,CAAC,oBAAoB,CAAC,IAAI,EAAE,GAAG,SAAS,CAAC,CAAA;UACvI,oBAAoB,CAAC,CAAC,EAAE,eAAe,EAAE,IAAI,CAAC,aAAa,KAAK,SAAS,GAAG,IAAI,CAAC,aAAa,CAAC,IAAI,EAAE,GAAG,SAAS,CAAC,CAAA;UAClH,oBAAoB,CAAC,CAAC,EAAE,iBAAiB,EAAE,IAAI,CAAC,eAAe,KAAK,SAAS,GAAG,IAAI,CAAC,eAAe,CAAC,IAAI,EAAE,GAAG,SAAS,CAAC,CAAA;UACxH,oBAAoB,CAAC,CAAC,EAAE,gBAAgB,EAAE,IAAI,CAAC,cAAc,CAAC,CAAA;UAC9D,oBAAoB,CAAC,CAAC,EAAE,WAAW,EAAE,IAAI,CAAC,SAAS,KAAK,SAAS,IAAI,IAAI,CAAC,SAAS,KAAKA,eAAa,CAAC,MAAM,GAAG,IAAI,CAAC,SAAS,GAAG,SAAS,CAAC,CAAA;UAC1I,oBAAoB,CAAC,CAAC,EAAE,aAAa,EAAE,IAAI,CAAC,WAAW,KAAK,GAAG,IAAI,IAAI,CAAC,WAAW,KAAK,SAAS,GAAG,IAAI,CAAC,WAAW,GAAG,SAAS,CAAC,CAAA;UACjI,oBAAoB,CAAC,CAAC,EAAE,aAAa,EAAE,IAAI,CAAC,WAAW,KAAK,KAAK,IAAI,IAAI,CAAC,WAAW,KAAK,SAAS,GAAG,IAAI,CAAC,WAAW,GAAG,SAAS,CAAC,CAAA;UACnI,uBAAuB,CAAC,CAAC,EAAE,IAAI,CAAC,UAAU,CAAC,CAAA;UAC3C,oBAAoB,CAAC,CAAC,EAAE,QAAQ,EAAE,IAAI,CAAC,MAAM,CAAC,CAAA;UAE9C,OAAO,CAAC,CAAA;OACT;MAED,OAAO,QAAQ,CAAC,IAAmB;UACjC,MAAM,GAAG,GAAG,IAAI,YAAY,EAAE,CAAA;UAC9B,GAAG,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAA;UACpB,IAAI,IAAI,CAAC,oBAAoB,KAAK,SAAS,EAAE;cAC3C,GAAG,CAAC,oBAAoB,GAAG,OAAO,CAAC,QAAQ,CAAC,IAAI,CAAC,oBAAoB,CAAC,CAAA;WACvE;UACD,IAAI,IAAI,CAAC,aAAa,KAAK,SAAS,EAAE;cACpC,GAAG,CAAC,aAAa,GAAG,qBAAqB,CAAC,QAAQ,CAAC,IAAI,CAAC,aAAa,CAAC,CAAA;WACvE;UACD,IAAI,IAAI,CAAC,eAAe,KAAK,SAAS,EAAE;cACtC,GAAG,CAAC,eAAe,GAAG,eAAe,CAAC,QAAQ,CAAC,IAAI,CAAC,eAAe,CAAC,CAAA;WACrE;UACD,IAAI,IAAI,CAAC,SAAS,KAAK,SAAS,IAAI,mBAAmB,CAAC,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE;cAChF,GAAG,CAAC,SAAS,GAAG,IAAI,CAAC,SAA0B,CAAA;WAChD;UACD,GAAG,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAA;UAClC,GAAG,CAAC,cAAc,GAAG,IAAI,CAAC,cAAc,CAAA;UACxC,GAAG,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAA;UAClC,GAAG,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAA;UACxB,OAAO,GAAG,CAAA;OACX;;;EClGH,MAAM,WAAY,SAAQ,gBAAgB;MAKxC;UACE,KAAK,EAAE,CAAA;OACR;MAED,QAAQ;UACN,IAAI,IAAI,CAAC,OAAO,KAAK,SAAS,IAAI,IAAI,CAAC,MAAM,KAAK,SAAS,IAAI,IAAI,CAAC,IAAI,KAAK,SAAS;cACpF,OAAO,KAAK,CAAA;UACd,OAAO,IAAI,CAAA;OACZ;MAED,IAAI;UACF,MAAM,EAAE,GAAG,EAAE,CAAA;UACb,oBAAoB,CAAC,EAAE,EAAE,MAAM,EAAE,IAAI,CAAC,IAAI,CAAC,CAAA;UAC3C,oBAAoB,CAAC,EAAE,EAAE,QAAQ,EAAE,IAAI,CAAC,MAAM,CAAC,CAAA;UAC/C,oBAAoB,CAAC,EAAE,EAAE,SAAS,EAAE,IAAI,CAAC,OAAO,CAAC,CAAA;UACjD,uBAAuB,CAAC,EAAE,EAAE,IAAI,CAAC,UAAU,CAAC,CAAA;UAC5C,oBAAoB,CAAC,EAAE,EAAE,QAAQ,EAAE,IAAI,CAAC,MAAM,CAAC,CAAA;UAE/C,OAAO,EAAE,CAAA;OACV;MAED,OAAO,QAAQ,CAAC,IAAkB;UAChC,MAAM,EAAE,GAAG,IAAI,WAAW,EAAE,CAAA;UAC5B,EAAE,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAA;UACnB,EAAE,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAA;UACvB,EAAE,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,CAAA;UACzB,EAAE,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAA;UACvB,OAAO,EAAE,CAAA;OACV;;;ECtCH;;;;;;;;;;;;;;;EAgBA,CAAC,UAAS,KAAK;;MAIb,IAAI,KAAK,CAAC,aAAa,CAAC,IAAI,KAAK,CAAC,aAAa,CAAC,EAAE;UAChD,OAAO,KAAK,CAAC;OACd;;;;;MAMD,SAAS,eAAe,CAAC,QAAQ,GAAG,OAAO;UACzC,IAAI,QAAQ,KAAK,OAAO,EAAE;cACxB,MAAM,IAAI,UAAU,CAClB,oEAAoE,QAAQ,gBAAgB,CAC7F,CAAC;WACH;OACF;MAED,MAAM,CAAC,cAAc,CAAC,eAAe,CAAC,SAAS,EAAE,UAAU,EAAE;UAC3D,KAAK,EAAE,OAAO;OACf,CAAC,CAAC;;;;;;MAOH,eAAe,CAAC,SAAS,CAAC,MAAM,GAAG,UACjC,MAAM,EACN,OAAO,GAAG,EAAE,MAAM,EAAE,KAAK,EAAE;UAE3B,IAAI,OAAO,CAAC,MAAM,EAAE;cAClB,MAAM,IAAI,KAAK,CAAC,uDAAuD,CAAC,CAAC;WAC1E;UAED,IAAI,GAAG,GAAG,CAAC,CAAC;UACZ,MAAM,GAAG,GAAG,MAAM,CAAC,MAAM,CAAC;UAG1B,IAAI,EAAE,GAAG,CAAC,CAAC;UACX,IAAI,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE,GAAG,IAAI,GAAG,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;UAC9C,IAAI,MAAM,GAAG,IAAI,UAAU,CAAC,CAAC,IAAI,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;UAE9C,OAAO,GAAG,GAAG,GAAG,EAAE;cAChB,IAAI,KAAK,GAAG,MAAM,CAAC,UAAU,CAAC,GAAG,EAAE,CAAC,CAAC;cACrC,IAAI,KAAK,IAAI,MAAM,IAAI,KAAK,IAAI,MAAM,EAAE;;kBAEtC,IAAI,GAAG,GAAG,GAAG,EAAE;sBACb,MAAM,KAAK,GAAG,MAAM,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC;sBACrC,IAAI,CAAC,KAAK,GAAG,MAAM,MAAM,MAAM,EAAE;0BAC/B,EAAE,GAAG,CAAC;0BACN,KAAK,GAAG,CAAC,CAAC,KAAK,GAAG,KAAK,KAAK,EAAE,KAAK,KAAK,GAAG,KAAK,CAAC,GAAG,OAAO,CAAC;uBAC7D;mBACF;kBACD,IAAI,KAAK,IAAI,MAAM,IAAI,KAAK,IAAI,MAAM,EAAE;sBACtC,SAAS;mBACV;eACF;;cAGD,IAAI,EAAE,GAAG,CAAC,GAAG,MAAM,CAAC,MAAM,EAAE;kBAC1B,IAAI,IAAI,CAAC,CAAC;kBACV,IAAI,IAAI,GAAG,GAAG,CAAC,GAAG,GAAG,MAAM,CAAC,MAAM,IAAI,CAAC,CAAC;kBACxC,IAAI,GAAG,CAAC,IAAI,IAAI,CAAC,KAAK,CAAC,CAAC;kBAExB,MAAM,MAAM,GAAG,IAAI,UAAU,CAAC,IAAI,CAAC,CAAC;kBACpC,MAAM,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;kBACnB,MAAM,GAAG,MAAM,CAAC;eACjB;cAED,IAAI,CAAC,KAAK,GAAG,UAAU,MAAM,CAAC,EAAE;;kBAE9B,MAAM,CAAC,EAAE,EAAE,CAAC,GAAG,KAAK,CAAC;kBACrB,SAAS;eACV;mBAAM,IAAI,CAAC,KAAK,GAAG,UAAU,MAAM,CAAC,EAAE;;kBAErC,MAAM,CAAC,EAAE,EAAE,CAAC,GAAG,CAAC,CAAC,KAAK,IAAI,CAAC,IAAI,IAAI,IAAI,IAAI,CAAC;eAC7C;mBAAM,IAAI,CAAC,KAAK,GAAG,UAAU,MAAM,CAAC,EAAE;;kBAErC,MAAM,CAAC,EAAE,EAAE,CAAC,GAAG,CAAC,CAAC,KAAK,IAAI,EAAE,IAAI,IAAI,IAAI,IAAI,CAAC;kBAC7C,MAAM,CAAC,EAAE,EAAE,CAAC,GAAG,CAAC,CAAC,KAAK,IAAI,CAAC,IAAI,IAAI,IAAI,IAAI,CAAC;eAC7C;mBAAM,IAAI,CAAC,KAAK,GAAG,UAAU,MAAM,CAAC,EAAE;;kBAErC,MAAM,CAAC,EAAE,EAAE,CAAC,GAAG,CAAC,CAAC,KAAK,IAAI,EAAE,IAAI,IAAI,IAAI,IAAI,CAAC;kBAC7C,MAAM,CAAC,EAAE,EAAE,CAAC,GAAG,CAAC,CAAC,KAAK,IAAI,EAAE,IAAI,IAAI,IAAI,IAAI,CAAC;kBAC7C,MAAM,CAAC,EAAE,EAAE,CAAC,GAAG,CAAC,CAAC,KAAK,IAAI,CAAC,IAAI,IAAI,IAAI,IAAI,CAAC;eAC7C;mBAAM;;kBAEL,SAAS;eACV;cAED,MAAM,CAAC,EAAE,EAAE,CAAC,GAAG,CAAC,KAAK,GAAG,IAAI,IAAI,IAAI,CAAC;WACtC;UAED,OAAO,MAAM,CAAC,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;OAC5B,CAAC;;;;;;MAOF,SAAS,eAAe,CAAC,QAAQ,GAAG,OAAO,EAAE,OAAO,GAAG,EAAE,KAAK,EAAE,KAAK,EAAE;UACrE,IAAI,QAAQ,KAAK,OAAO,EAAE;cACxB,MAAM,IAAI,UAAU,CAClB,oEAAoE,QAAQ,gBAAgB,CAC7F,CAAC;WACH;UACD,IAAI,OAAO,CAAC,KAAK,EAAE;cACjB,MAAM,IAAI,KAAK,CACb,uEAAuE,CACxE,CAAC;WACH;OACF;MAED,MAAM,CAAC,cAAc,CAAC,eAAe,CAAC,SAAS,EAAE,UAAU,EAAE;UAC3D,KAAK,EAAE,OAAO;OACf,CAAC,CAAC;MAEH,MAAM,CAAC,cAAc,CAAC,eAAe,CAAC,SAAS,EAAE,OAAO,EAAE,EAAE,KAAK,EAAE,KAAK,EAAE,CAAC,CAAC;MAE5E,MAAM,CAAC,cAAc,CAAC,eAAe,CAAC,SAAS,EAAE,WAAW,EAAE;UAC5D,KAAK,EAAE,KAAK;OACb,CAAC,CAAC;;;;;MAMH,eAAe,CAAC,SAAS,CAAC,MAAM,GAAG,UACjC,MAAM,EACN,OAAO,GAAG,EAAE,MAAM,EAAE,KAAK,EAAE;UAE3B,IAAI,OAAO,CAAC,QAAQ,CAAC,EAAE;cACrB,MAAM,IAAI,KAAK,CAAC,uDAAuD,CAAC,CAAC;WAC1E;UAED,MAAM,KAAK,GAAG,IAAI,UAAU,CAAC,MAAM,CAAC,CAAC;UACrC,IAAI,GAAG,GAAG,CAAC,CAAC;UACZ,MAAM,GAAG,GAAG,KAAK,CAAC,MAAM,CAAC;UACzB,MAAM,GAAG,GAAG,EAAE,CAAC;UAEf,OAAO,GAAG,GAAG,GAAG,EAAE;cAChB,MAAM,KAAK,GAAG,KAAK,CAAC,GAAG,EAAE,CAAC,CAAC;cAC3B,IAAI,KAAK,KAAK,CAAC,EAAE;kBACf,MAAM;eACP;cAED,IAAI,CAAC,KAAK,GAAG,IAAI,MAAM,CAAC,EAAE;;kBAExB,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;eACjB;mBAAM,IAAI,CAAC,KAAK,GAAG,IAAI,MAAM,IAAI,EAAE;;kBAElC,MAAM,KAAK,GAAG,KAAK,CAAC,GAAG,EAAE,CAAC,GAAG,IAAI,CAAC;kBAClC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,GAAG,IAAI,KAAK,CAAC,IAAI,KAAK,CAAC,CAAC;eACzC;mBAAM,IAAI,CAAC,KAAK,GAAG,IAAI,MAAM,IAAI,EAAE;kBAClC,MAAM,KAAK,GAAG,KAAK,CAAC,GAAG,EAAE,CAAC,GAAG,IAAI,CAAC;kBAClC,MAAM,KAAK,GAAG,KAAK,CAAC,GAAG,EAAE,CAAC,GAAG,IAAI,CAAC;kBAClC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,GAAG,IAAI,KAAK,EAAE,KAAK,KAAK,IAAI,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC;eACzD;mBAAM,IAAI,CAAC,KAAK,GAAG,IAAI,MAAM,IAAI,EAAE;kBAClC,MAAM,KAAK,GAAG,KAAK,CAAC,GAAG,EAAE,CAAC,GAAG,IAAI,CAAC;kBAClC,MAAM,KAAK,GAAG,KAAK,CAAC,GAAG,EAAE,CAAC,GAAG,IAAI,CAAC;kBAClC,MAAM,KAAK,GAAG,KAAK,CAAC,GAAG,EAAE,CAAC,GAAG,IAAI,CAAC;;kBAGlC,IAAI,SAAS,GACX,CAAC,CAAC,KAAK,GAAG,IAAI,KAAK,IAAI,KAAK,KAAK,IAAI,IAAI,CAAC,IAAI,KAAK,IAAI,IAAI,CAAC,GAAG,KAAK,CAAC;kBACvE,IAAI,SAAS,GAAG,MAAM,EAAE;;sBAEtB,SAAS,IAAI,OAAO,CAAC;sBACrB,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,SAAS,KAAK,EAAE,IAAI,KAAK,IAAI,MAAM,CAAC,CAAC;sBAChD,SAAS,GAAG,MAAM,IAAI,SAAS,GAAG,KAAK,CAAC,CAAC;mBAC1C;kBACD,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;eACrB;mBAAM,CAEN;WACF;UAED,OAAO,MAAM,CAAC,YAAY,CAAC,KAAK,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;OAC7C,CAAC;MAEF,KAAK,CAAC,aAAa,CAAC,GAAG,eAAe,CAAC;MACvC,KAAK,CAAC,aAAa,CAAC,GAAG,eAAe,CAAC;EACzC,CAAC,EACC,OAAO,MAAM,KAAK,WAAW;QACzB,MAAM;QACN,OAAO,IAAI,KAAK,WAAW;YAC3B,IAAI;YACJC,SAAI,CACT;;;;;EChND;AACkC;EAElC,MAAM,OAAO,GAAG,IAAI,WAAW,CAAC,OAAO,CAAC,CAAC;EAEzC,SAAgB,MAAM,CAAC,KAAiB;MACtC,OAAO,OAAO,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;EAC/B,CAAC;EAFD,wBAEC;EAED,MAAM,OAAO,GAAG,IAAI,WAAW,EAAE,CAAC;EAElC,SAAgB,MAAM,CAAC,GAAW;MAChC,OAAO,OAAO,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;EAC7B,CAAC;EAFD,wBAEC;;;;;;;;;;;ACbuC;EAExC,MAAM,iBAAiB,GAAG,IAAI,GAAG,CAAC,CAAC;EAWnC,MAAa,QAAQ;;;;;;;;;MAyCnB,YACE,OAAkB,iBAAiB,EACnC,UAA2B,EAAE;UAE7B,IAAI,WAAW,GAAG,KAAK,CAAC;UACxB,IAAI,OAAO,IAAI,KAAK,QAAQ,EAAE;cAC5B,IAAI,GAAG,IAAI,WAAW,CAAC,IAAI,CAAC,CAAC;WAC9B;eAAM;cACL,WAAW,GAAG,IAAI,CAAC;cACnB,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,UAAU,CAAC;WACxC;UAED,MAAM,MAAM,GAAG,OAAO,CAAC,MAAM,GAAG,OAAO,CAAC,MAAM,KAAK,CAAC,GAAG,CAAC,CAAC;UACzD,MAAM,UAAU,GAAG,IAAI,CAAC,UAAU,GAAG,MAAM,CAAC;UAC5C,IAAI,QAAQ,GAAG,MAAM,CAAC;UACtB,IAAI,WAAW,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,IAAI,YAAY,QAAQ,EAAE;cACxD,IAAI,IAAI,CAAC,UAAU,KAAK,IAAI,CAAC,MAAM,CAAC,UAAU,EAAE;kBAC9C,QAAQ,GAAG,IAAI,CAAC,UAAU,GAAG,MAAM,CAAC;eACrC;cACD,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC;WACpB;UACD,IAAI,WAAW,EAAE;cACf,IAAI,CAAC,eAAe,GAAG,UAAU,CAAC;WACnC;eAAM;cACL,IAAI,CAAC,eAAe,GAAG,CAAC,CAAC;WAC1B;UACD,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;UACnB,IAAI,CAAC,MAAM,GAAG,UAAU,CAAC;UACzB,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC;UAC7B,IAAI,CAAC,UAAU,GAAG,QAAQ,CAAC;UAC3B,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;UAChB,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;UACzB,IAAI,CAAC,KAAK,GAAG,IAAI,QAAQ,CAAC,IAAI,CAAC,MAAM,EAAE,QAAQ,EAAE,UAAU,CAAC,CAAC;UAC7D,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;UACf,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC;OAClB;;;;;;;MAQM,SAAS,CAAC,UAAU,GAAG,CAAC;UAC7B,OAAO,IAAI,CAAC,MAAM,GAAG,UAAU,IAAI,IAAI,CAAC,MAAM,CAAC;OAChD;;;;;;MAOM,cAAc;UACnB,OAAO,IAAI,CAAC,YAAY,CAAC;OAC1B;;;;MAKM,eAAe;UACpB,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;UACzB,OAAO,IAAI,CAAC;OACb;;;;;MAMM,WAAW;UAChB,OAAO,CAAC,IAAI,CAAC,YAAY,CAAC;OAC3B;;;;MAKM,YAAY;UACjB,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;UAC1B,OAAO,IAAI,CAAC;OACb;;;;;MAMM,IAAI,CAAC,CAAC,GAAG,CAAC;UACf,IAAI,CAAC,MAAM,IAAI,CAAC,CAAC;UACjB,OAAO,IAAI,CAAC;OACb;;;;;MAMM,IAAI,CAAC,MAAc;UACxB,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;UACrB,OAAO,IAAI,CAAC;OACb;;;;;MAMM,IAAI;UACT,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC;UACzB,OAAO,IAAI,CAAC;OACb;;;;;MAMM,KAAK;UACV,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC;UACzB,OAAO,IAAI,CAAC;OACb;;;;;MAMM,QAAQ;UACb,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;UAC9B,OAAO,IAAI,CAAC;OACb;;;;;;MAOM,OAAO;UACZ,MAAM,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,EAAE,CAAC;UACjC,IAAI,MAAM,KAAK,SAAS,EAAE;cACxB,MAAM,IAAI,KAAK,CAAC,kBAAkB,CAAC,CAAC;WACrC;UACD,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;UAClB,OAAO,IAAI,CAAC;OACb;;;;MAKM,MAAM;UACX,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;UAChB,OAAO,IAAI,CAAC;OACb;;;;;;;;MASM,eAAe,CAAC,UAAU,GAAG,CAAC;UACnC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,UAAU,CAAC,EAAE;cAC/B,MAAM,YAAY,GAAG,IAAI,CAAC,MAAM,GAAG,UAAU,CAAC;cAC9C,MAAM,SAAS,GAAG,YAAY,GAAG,CAAC,CAAC;cACnC,MAAM,QAAQ,GAAG,IAAI,UAAU,CAAC,SAAS,CAAC,CAAC;cAC3C,QAAQ,CAAC,GAAG,CAAC,IAAI,UAAU,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;cAC1C,IAAI,CAAC,MAAM,GAAG,QAAQ,CAAC,MAAM,CAAC;cAC9B,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,UAAU,GAAG,SAAS,CAAC;cAC1C,IAAI,CAAC,KAAK,GAAG,IAAI,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;WACxC;UACD,OAAO,IAAI,CAAC;OACb;;;;;MAMM,WAAW;UAChB,OAAO,IAAI,CAAC,SAAS,EAAE,KAAK,CAAC,CAAC;OAC/B;;;;MAKM,QAAQ;UACb,OAAO,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC;OAC1C;;;;MAKM,SAAS;UACd,OAAO,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC;OAC3C;;;;MAKM,QAAQ;UACb,OAAO,IAAI,CAAC,SAAS,EAAE,CAAC;OACzB;;;;MAKM,SAAS,CAAC,CAAC,GAAG,CAAC;UACpB,MAAM,KAAK,GAAG,IAAI,UAAU,CAAC,CAAC,CAAC,CAAC;UAChC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE;cAC1B,KAAK,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,QAAQ,EAAE,CAAC;WAC5B;UACD,OAAO,KAAK,CAAC;OACd;;;;MAKM,SAAS;UACd,MAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;UAClE,IAAI,CAAC,MAAM,IAAI,CAAC,CAAC;UACjB,OAAO,KAAK,CAAC;OACd;;;;MAKM,UAAU;UACf,MAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;UACnE,IAAI,CAAC,MAAM,IAAI,CAAC,CAAC;UACjB,OAAO,KAAK,CAAC;OACd;;;;MAKM,SAAS;UACd,MAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;UAClE,IAAI,CAAC,MAAM,IAAI,CAAC,CAAC;UACjB,OAAO,KAAK,CAAC;OACd;;;;MAKM,UAAU;UACf,MAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;UACnE,IAAI,CAAC,MAAM,IAAI,CAAC,CAAC;UACjB,OAAO,KAAK,CAAC;OACd;;;;MAKM,WAAW;UAChB,MAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;UACpE,IAAI,CAAC,MAAM,IAAI,CAAC,CAAC;UACjB,OAAO,KAAK,CAAC;OACd;;;;MAKM,WAAW;UAChB,MAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;UACpE,IAAI,CAAC,MAAM,IAAI,CAAC,CAAC;UACjB,OAAO,KAAK,CAAC;OACd;;;;MAKM,QAAQ;UACb,OAAO,MAAM,CAAC,YAAY,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC,CAAC;OAC7C;;;;MAKM,SAAS,CAAC,CAAC,GAAG,CAAC;UACpB,IAAI,MAAM,GAAG,EAAE,CAAC;UAChB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE;cAC1B,MAAM,IAAI,IAAI,CAAC,QAAQ,EAAE,CAAC;WAC3B;UACD,OAAO,MAAM,CAAC;OACf;;;;;MAMM,QAAQ,CAAC,CAAC,GAAG,CAAC;UACnB,OAAOC,mBAAM,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;OAClC;;;;;MAMM,YAAY,CAAC,KAAc;UAChC,IAAI,CAAC,UAAU,CAAC,KAAK,GAAG,IAAI,GAAG,IAAI,CAAC,CAAC;UACrC,OAAO,IAAI,CAAC;OACb;;;;MAKM,SAAS,CAAC,KAAa;UAC5B,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC;UACxB,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,EAAE,EAAE,KAAK,CAAC,CAAC;UACzC,IAAI,CAAC,sBAAsB,EAAE,CAAC;UAC9B,OAAO,IAAI,CAAC;OACb;;;;;MAMM,UAAU,CAAC,KAAa;UAC7B,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC;UACxB,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,EAAE,EAAE,KAAK,CAAC,CAAC;UAC1C,IAAI,CAAC,sBAAsB,EAAE,CAAC;UAC9B,OAAO,IAAI,CAAC;OACb;;;;MAKM,SAAS,CAAC,KAAa;UAC5B,OAAO,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;OAC/B;;;;;MAMM,UAAU,CAAC,KAAwB;UACxC,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;UACnC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;cACrC,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,EAAE,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;WAC9C;UACD,IAAI,CAAC,sBAAsB,EAAE,CAAC;UAC9B,OAAO,IAAI,CAAC;OACb;;;;;MAMM,UAAU,CAAC,KAAa;UAC7B,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC;UACxB,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,EAAE,KAAK,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;UAC3D,IAAI,CAAC,MAAM,IAAI,CAAC,CAAC;UACjB,IAAI,CAAC,sBAAsB,EAAE,CAAC;UAC9B,OAAO,IAAI,CAAC;OACb;;;;;MAMM,WAAW,CAAC,KAAa;UAC9B,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC;UACxB,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,EAAE,KAAK,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;UAC5D,IAAI,CAAC,MAAM,IAAI,CAAC,CAAC;UACjB,IAAI,CAAC,sBAAsB,EAAE,CAAC;UAC9B,OAAO,IAAI,CAAC;OACb;;;;;MAMM,UAAU,CAAC,KAAa;UAC7B,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC;UACxB,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,EAAE,KAAK,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;UAC3D,IAAI,CAAC,MAAM,IAAI,CAAC,CAAC;UACjB,IAAI,CAAC,sBAAsB,EAAE,CAAC;UAC9B,OAAO,IAAI,CAAC;OACb;;;;;MAMM,WAAW,CAAC,KAAa;UAC9B,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC;UACxB,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,EAAE,KAAK,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;UAC5D,IAAI,CAAC,MAAM,IAAI,CAAC,CAAC;UACjB,IAAI,CAAC,sBAAsB,EAAE,CAAC;UAC9B,OAAO,IAAI,CAAC;OACb;;;;;MAMM,YAAY,CAAC,KAAa;UAC/B,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC;UACxB,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,IAAI,CAAC,MAAM,EAAE,KAAK,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;UAC7D,IAAI,CAAC,MAAM,IAAI,CAAC,CAAC;UACjB,IAAI,CAAC,sBAAsB,EAAE,CAAC;UAC9B,OAAO,IAAI,CAAC;OACb;;;;;MAMM,YAAY,CAAC,KAAa;UAC/B,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC;UACxB,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,IAAI,CAAC,MAAM,EAAE,KAAK,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;UAC7D,IAAI,CAAC,MAAM,IAAI,CAAC,CAAC;UACjB,IAAI,CAAC,sBAAsB,EAAE,CAAC;UAC9B,OAAO,IAAI,CAAC;OACb;;;;;MAMM,SAAS,CAAC,GAAW;UAC1B,OAAO,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC;OAC3C;;;;;MAMM,UAAU,CAAC,GAAW;UAC3B,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;cACnC,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC;WACpC;UACD,OAAO,IAAI,CAAC;OACb;;;;;MAMM,SAAS,CAAC,GAAW;UAC1B,OAAO,IAAI,CAAC,UAAU,CAACA,mBAAM,CAAC,GAAG,CAAC,CAAC,CAAC;OACrC;;;;;;MAOM,OAAO;UACZ,OAAO,IAAI,UAAU,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,eAAe,CAAC,CAAC;OAC3E;;;;;MAMO,sBAAsB;UAC5B,IAAI,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,eAAe,EAAE;cACtC,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,MAAM,CAAC;WACpC;OACF;GACF;EA/eD,4BA+eC;;;;;;;ECpfD,MAAM,SAAU,SAAQ,gBAAgB;MAMtC;UACE,KAAK,EAAE,CAAA;OACR;MAED,IAAI,eAAe;UACjB,OAAO,IAAI,CAAC,GAAG,KAAK,SAAS,IAAI,IAAI,CAAC,UAAU,KAAK,SAAS,CAAA;OAC/D;MAED,IAAI,YAAY;UACd,IAAI,IAAI,CAAC,QAAQ,EAAE,KAAK,KAAK,EAAE;cAC7B,MAAM,IAAI,KAAK,CAAC,iDAAiD,CAAC,CAAA;WACnE;UACD,IAAI,IAAI,CAAC,GAAG,IAAI,IAAI,CAAC,eAAe,EAAE;cACpC,OAAOL,mBAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAA;WACxB;UAED,IAAI,IAAI,CAAC,GAAG,KAAK,SAAS,EAAE;cAC1B,MAAM,IAAI,KAAK,CAAC,EAAE,CAAC,CAAA;WACpB;eAAM;cACL,IAAI,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,MAAM,KAAK,CAAC,IAAI,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,MAAM,KAAK,CAAC,EAAE;kBACtE,MAAM,IAAI,KAAK,CAAC,EAAE,CAAC,CAAA;eACpB;mBAAM;kBACL,MAAM,EAAE,GAAG,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,IAAI,CAAC,UAAW,CAAC,CAAA;kBACjD,MAAM,EAAE,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,EAAE,CAAC,MAAM,CAAC,CAAA;;kBAEtC,MAAM,KAAK,GAAG,EAAE,CAAC,UAAU,KAAK,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,OAAO,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,UAAU,CAAA;kBAC5F,MAAM,MAAM,GAAG,EAAE,CAAC,UAAU,CAAA;kBAC5B,MAAM,UAAU,GAAG,EAAE,CAAC,UAAU,CAAA;kBAChC,IAAI,UAAU,KAAK,SAAS,EAAE;sBAC5B,OAAO,IAAIM,UAAQ,CAAC,UAAU,CAAC;2BAC9B,IAAI,CAAC,KAAK,CAAC;2BACX,SAAS,CAAC,MAAM,CAAC;2BACjB,MAAM,CAAA;mBACR;eACF;WACF;OACF;MAED,QAAQ;UACN,IAAI,IAAI,CAAC,GAAG,KAAK,SAAS,IAAI,IAAI,CAAC,UAAU,KAAK,SAAS,EAAE;cAC3D,OAAO,KAAK,CAAA;WACb;UACD,IAAI,IAAI,CAAC,UAAU,KAAK,SAAS,EAAE;cACjC,IAAI,IAAI,CAAC,QAAQ,KAAK,SAAS,EAAE;kBAC/B,OAAO,KAAK,CAAA;eACb;WACF;UACD,OAAO,IAAI,CAAA;OACZ;MAED,IAAI;UACF,MAAM,GAAG,GAAG,EAAE,CAAA;UACd,oBAAoB,CAAC,GAAG,EAAE,MAAM,EAAE,IAAI,CAAC,IAAI,CAAC,CAAA;UAC5C,oBAAoB,CAAC,GAAG,EAAE,YAAY,EAAE,IAAI,CAAC,UAAU,CAAC,CAAA;UACxD,oBAAoB,CAAC,GAAG,EAAE,KAAK,EAAE,IAAI,CAAC,GAAG,CAAC,CAAA;UAC1C,oBAAoB,CAAC,GAAG,EAAE,UAAU,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAA;UACpD,uBAAuB,CAAC,GAAG,EAAE,IAAI,CAAC,UAAU,CAAC,CAAA;UAC7C,oBAAoB,CAAC,GAAG,EAAE,QAAQ,EAAE,IAAI,CAAC,MAAM,CAAC,CAAA;UAEhD,OAAO,GAAG,CAAA;OACX;MAED,OAAO,QAAQ,CAAC,IAAgB;UAC9B,MAAM,GAAG,GAAG,IAAI,SAAS,EAAE,CAAA;UAC3B,GAAG,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAA;UACpB,GAAG,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,CAAA;UAChC,IAAI,IAAI,CAAC,QAAQ,KAAK,SAAS,EAAE;cAC/B,IAAI,IAAI,CAAC,QAAQ,IAAIC,MAAI,EAAE;kBACzB,GAAG,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAgB,CAAA;eACrC;mBAAM;kBACL,MAAM,IAAI,KAAK,CAAC,yCAAyC,CAAC,CAAA;eAC3D;WACF;UACD,GAAG,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAA;UACxB,OAAO,GAAG,CAAA;OACX;;;EClFH,MAAM,WAAY,SAAQ,gBAAgB;MAOxC;UACE,KAAK,EAAE,CAAA;OACR;MAED,QAAQ;;UAEN,IAAI,IAAI,CAAC,SAAS,KAAK,SAAS,IAAI,IAAI,CAAC,SAAS,KAAK,SAAS,IAAI,IAAI,CAAC,KAAK,KAAK,SAAS,IAAI,IAAI,CAAC,KAAK,KAAK,SAAS;cACtH,OAAO,KAAK,CAAA;UACd,OAAO,IAAI,CAAA;OACZ;MAED,IAAI;UACF,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,EAAE;cACpB,MAAM,IAAI,KAAK,CAAC,8CAA8C,CAAC,CAAA;WAChE;UAED,MAAM,GAAG,GAAG,EAAE,CAAA;UACd,oBAAoB,CAAC,GAAG,EAAE,WAAW,EAAE,IAAI,CAAC,SAAS,CAAC,CAAA;UACtD,oBAAoB,CAAC,GAAG,EAAE,WAAW,EAAE,IAAI,CAAC,SAAS,CAAC,CAAA;UACtD,oBAAoB,CAAC,GAAG,EAAE,OAAO,EAAE,IAAI,CAAC,KAAK,CAAC,CAAA;UAC9C,oBAAoB,CAAC,GAAG,EAAE,OAAO,EAAE,IAAI,CAAC,KAAK,CAAC,CAAA;UAC9C,oBAAoB,CAAC,GAAG,EAAE,MAAM,EAAE,IAAI,CAAC,IAAI,CAAC,CAAA;UAC5C,uBAAuB,CAAC,GAAG,EAAE,IAAI,CAAC,UAAU,CAAC,CAAA;UAC7C,oBAAoB,CAAC,GAAG,EAAE,QAAQ,EAAE,IAAI,CAAC,MAAM,CAAC,CAAA;UAEhD,OAAO,GAAG,CAAA;OACX;MAED,OAAO,QAAQ,CAAC,IAAkB;UAChC,MAAM,GAAG,GAAG,IAAI,WAAW,EAAE,CAAA;UAC7B,GAAG,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAA;UACpB,IAAI,IAAI,CAAC,SAAS,KAAK,SAAS,IAAI,gBAAgB,CAAC,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE;cAC7E,GAAG,CAAC,SAAS,GAAG,IAAI,CAAC,SAAuB,CAAA;WAC7C;UACD,IAAI,IAAI,CAAC,SAAS,KAAK,SAAS,IAAI,gBAAgB,CAAC,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE;cAC7E,GAAG,CAAC,SAAS,GAAG,IAAI,CAAC,SAAuB,CAAA;WAC7C;UACD,IAAI,IAAI,CAAC,KAAK,KAAK,SAAS,IAAI,kBAAkB,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE;cACvE,GAAG,CAAC,KAAK,GAAG,IAAI,CAAC,KAAqB,CAAA;WACvC;UACD,IAAI,IAAI,CAAC,KAAK,KAAK,SAAS,IAAI,kBAAkB,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE;cACvE,GAAG,CAAC,KAAK,GAAG,IAAI,CAAC,KAAqB,CAAA;WACvC;UACD,GAAG,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAA;UAExB,OAAO,GAAG,CAAA;OACX;;;EC5DH,IAAK,8BAKJ;EALD,WAAK,8BAA8B;MACjC,6DAA2B,CAAA;MAC3B,uDAAqB,CAAA;MACrB,iDAAe,CAAA;MACf,qDAAmB,CAAA;EACrB,CAAC,EALI,8BAA8B,KAA9B,8BAA8B,QAKlC;EAEM,MAAM,oCAAoC,GAAG,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,8BAA8B,CAAkB,CAAC;;ECDjI,MAAM,0BAA2B,SAAQ,gBAAgB;MAIvD;UACE,KAAK,EAAE,CAAA;OACR;MAED,QAAQ;UACN,OAAO,IAAI,CAAA;OACZ;MAED,IAAI;UACF,MAAM,GAAG,GAAG;cACV,IAAI,EAAE,IAAI,CAAC,IAAI;WAChB,CAAA;UAED,oBAAoB,CAAC,GAAG,EAAE,MAAM,EAAE,IAAI,CAAC,IAAI,CAAC,CAAA;UAC5C,uBAAuB,CAAC,GAAG,EAAE,IAAI,CAAC,UAAU,CAAC,CAAA;UAC7C,oBAAoB,CAAC,GAAG,EAAE,QAAQ,EAAE,IAAI,CAAC,MAAM,CAAC,CAAA;UAEhD,OAAO,GAAG,CAAA;OACX;MAED,OAAO,YAAY,CAAC,IAAiC;UACnD,MAAM,aAAa,GAAG,IAAI,0BAA0B,EAAE,CAAA;UACtD,aAAa,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAA;UAClC,aAAa,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAA;UAC9B,IAAI,IAAI,CAAC,IAAI,KAAK,SAAS,IAAI,oCAAoC,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE;cACvF,aAAa,CAAC,IAAI,GAAG,IAAI,CAAC,IAAsC,CAAA;WACjE;UAED,OAAO,aAAa,CAAA;OACrB;;;ECjCH,MAAM,oBAAqB,SAAQ,gBAAgB;MAIjD;UACE,KAAK,EAAE,CAAA;OACR;MAED,QAAQ;UACN,OAAO,IAAI,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAA;OAC9B;MAED,IAAI;UACF,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,EAAE;cACpB,MAAM,IAAI,KAAK,CAAC,iEAAiE,CAAC,CAAA;WACnF;UAED,MAAM,EAAE,GAAG;cACT,OAAO,EAAE,IAAI,CAAC,OAAO;cACrB,MAAM,EAAE,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE;WAC3B,CAAA;UAED,uBAAuB,CAAC,EAAE,EAAE,IAAI,CAAC,UAAU,CAAC,CAAA;UAC5C,oBAAoB,CAAC,EAAE,EAAE,QAAQ,EAAE,IAAI,CAAC,MAAM,CAAC,CAAA;UAE/C,OAAO,EAAE,CAAA;OACV;MAED,OAAO,YAAY,CAAC,IAA2B;UAC7C,MAAM,OAAO,GAAG,IAAI,oBAAoB,EAAE,CAAA;UAC1C,OAAO,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,CAAA;UAC9B,OAAO,CAAC,MAAM,GAAG,0BAA0B,CAAC,YAAY,CAAC,IAAI,CAAC,MAAM,CAAC,CAAA;UACrE,OAAO,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAA;UAE5B,OAAO,OAAO,CAAA;OACf;;;ECzCH,IAAK,0BAIJ;EAJD,WAAK,0BAA0B;MAC7B,+CAAiB,CAAA;MACjB,2CAAa,CAAA;MACb,yDAA2B,CAAA;EAC7B,CAAC,EAJI,0BAA0B,KAA1B,0BAA0B,QAI9B;EAEM,MAAM,gCAAgC,GAAG,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,0BAA0B,CAAkB,CAAC;;ECAzH,MAAM,oBAAqB,SAAQ,gBAAgB;MAKjD;UACE,KAAK,EAAE,CAAA;OACR;MAED,QAAQ;UACN,OAAO,IAAI,CAAA;OACZ;MAED,IAAI;UACF,MAAM,EAAE,GAAG;cACT,KAAK,EAAE,IAAI,CAAC,KAAK;cACjB,MAAM,EAAE,IAAI,CAAC,MAAM;WACpB,CAAA;UAED,oBAAoB,CAAC,EAAE,EAAE,eAAe,EAAE,IAAI,CAAC,aAAa,CAAC,CAAA;UAE7D,OAAO,EAAE,CAAA;OACV;MAED,OAAO,YAAY,CAAC,IAA2B;UAC7C,MAAM,EAAE,GAAG,IAAI,oBAAoB,EAAE,CAAA;UACrC,EAAE,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAA;UACrB,EAAE,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAA;UACvB,IAAI,IAAI,CAAC,aAAa,KAAK,SAAS,IAAI,gCAAgC,CAAC,QAAQ,CAAC,IAAI,CAAC,aAAa,CAAC,EAAE;cACrG,EAAE,CAAC,aAAa,GAAG,IAAI,CAAC,aAA2C,CAAA;WACpE;UACD,OAAO,EAAE,CAAA;OACV;;;EC/BH,MAAM,aAAc,SAAQ,gBAAgB;MAK1C;UACE,KAAK,EAAE,CAAA;UALT,aAAQ,GAA2B,EAAE,CAAA;UACrC,aAAQ,GAA2B,EAAE,CAAA;OAKpC;MAED,QAAQ;UACN,IAAI,IAAI,CAAC,QAAS,CAAC,MAAM,GAAG,CAAC,IAAI,IAAI,CAAC,QAAS,CAAC,MAAM,GAAG,CAAC,EAAE;cAC1D,OAAO,KAAK,CAAA;WACb;UACD,OAAO,IAAI,CAAA;OACZ;MAED,IAAI;UACF,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,EAAE;cACpB,MAAM,IAAI,KAAK,CAAC,iDAAiD,CAAC,CAAA;WACnE;UAED,MAAM,GAAG,GAAG,EAAE,CAAA;UAEd,oBAAoB,CAAC,GAAG,EAAE,MAAM,EAAE,IAAI,CAAC,IAAI,CAAC,CAAA;UAC5C,oBAAoB,CAAC,GAAG,EAAE,UAAU,EAAE,IAAI,CAAC,QAAQ,CAAC,MAAM,KAAK,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,CAAC,GAAG,SAAS,CAAC,CAAA;UAChH,oBAAoB,CAAC,GAAG,EAAE,UAAU,EAAE,IAAI,CAAC,QAAQ,CAAC,MAAM,KAAK,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,CAAC,GAAG,SAAS,CAAC,CAAA;UAChH,uBAAuB,CAAC,GAAG,EAAE,IAAI,CAAC,UAAU,CAAC,CAAA;UAC7C,oBAAoB,CAAC,GAAG,EAAE,QAAQ,EAAE,IAAI,CAAC,MAAM,CAAC,CAAA;UAEhD,OAAO,GAAG,CAAA;OACX;MAED,OAAO,QAAQ,CAAC,IAAoB;UAClC,MAAM,GAAG,GAAG,IAAI,aAAa,EAAE,CAAA;UAC/B,GAAG,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAA;UACpB,GAAG,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,OAAO,IAAI,oBAAoB,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC,CAAA;UACvF,GAAG,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,GAAG,IAAI,oBAAoB,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,CAAA;UAC/E,GAAG,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAA;UAExB,OAAO,GAAG,CAAA;OACX;;;EC/CH,IAAK,cAGJ;EAHD,WAAK,cAAc;MACjB,6CAA2B,CAAA;MAC3B,+CAA6B,CAAA;EAC/B,CAAC,EAHI,cAAc,KAAd,cAAc,QAGlB;EAEM,MAAM,oBAAoB,GAAG,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,cAAc,CAAkB,CAAC;;ECHjG,MAAM,sBAAsB;MAM1B,QAAQ;UACN,OAAO,IAAI,CAAC,KAAK,IAAI,CAAC,IAAI,IAAI,CAAC,IAAI,IAAI,CAAC,IAAI,IAAI,CAAC,IAAI,KAAK,CAAC,IAAI,IAAI,CAAC,IAAI,KAAK,CAAC,IAAI,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,KAAK,CAAA;OACzG;MAED,IAAI;UACF,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,EAAE;cACpB,MAAM,IAAI,KAAK,CAAC,oEAAoE,CAAC,CAAA;WACtF;UAED,MAAM,CAAC,GAAG;cACR,IAAI,EAAE,IAAI,CAAC,IAAI;cACf,IAAI,EAAE,IAAI,CAAC,IAAI;cACf,IAAI,EAAE,IAAI,CAAC,IAAI;cACf,KAAK,EAAE,IAAI,CAAC,KAAK;WAClB,CAAA;UAED,OAAO,CAAC,CAAA;OACT;;;ECtBH,MAAM,qBAAqB;MAMzB,QAAQ;UACN,IAAI,IAAI,GAAG,IAAI,CAAC,IAAI,IAAI,CAAC,IAAI,IAAI,CAAC,KAAK,IAAI,CAAC,CAAA;UAE5C,IAAI,CAAC,WAAW,KAAK,SAAS,GAAG,IAAI,GAAG,IAAI,IAAI,IAAI,CAAC,WAAW,IAAI,CAAC,GAAG,IAAI,CAAA;UAC5E,IAAI,CAAC,IAAI,KAAK,SAAS,GAAG,IAAI,GAAG,IAAI,IAAI,IAAI,CAAC,IAAI,IAAI,CAAC,GAAG,IAAI,CAAA;UAC9D,IAAI,CAAC,IAAI,KAAK,SAAS,GAAG,IAAI,GAAG,IAAI,IAAI,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,KAAK,GAAG,IAAI,CAAA;UAEtE,OAAO,IAAI,CAAA;OACZ;MAED,IAAI;UACF,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,EAAE;cACpB,MAAM,IAAI,KAAK,CAAC,8CAA8C,CAAC,CAAA;WAChE;UAED,MAAM,CAAC,GAAG;cACR,IAAI,EAAE,IAAI,CAAC,IAAI;cACf,KAAK,EAAE,IAAI,CAAC,KAAK;WAClB,CAAA;UAED,oBAAoB,CAAC,CAAC,EAAE,aAAa,EAAE,IAAI,CAAC,WAAW,CAAC,CAAA;UACxD,oBAAoB,CAAC,CAAC,EAAE,MAAM,EAAE,IAAI,CAAC,IAAI,CAAC,CAAA;UAE1C,OAAO,CAAC,CAAA;OACT;;;ECzBH,MAAM,UAAW,SAAQ,gBAAgB;MAMvC;UACE,KAAK,EAAE,CAAA;OACR;MAED,QAAQ;UACN,IAAI,IAAI,CAAC,YAAY,KAAK,SAAS,IAAI,IAAI,CAAC,WAAW,KAAK,SAAS,EAAE;cACrE,OAAO,KAAK,CAAA;WACb;UACD,OAAO,IAAI,CAAA;OACZ;MAED,IAAI;UACF,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,EAAE;cACpB,MAAM,IAAI,KAAK,CAAC,2CAA2C,CAAC,CAAA;WAC7D;UAED,MAAM,MAAM,GAAG;cACb,IAAI,EAAE,IAAI,CAAC,IAAI;WAChB,CAAA;UAED,oBAAoB,CAAC,MAAM,EAAE,MAAM,EAAE,IAAI,CAAC,IAAI,CAAC,CAAA;UAC/C,oBAAoB,CAAC,MAAM,EAAE,aAAa,EAAE,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,EAAE,GAAG,SAAS,CAAC,CAAA;UACnG,oBAAoB,CAAC,MAAM,EAAE,cAAc,EAAE,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC,IAAI,EAAE,GAAG,SAAS,CAAC,CAAA;UACtG,uBAAuB,CAAC,MAAM,EAAE,IAAI,CAAC,UAAU,CAAC,CAAA;UAChD,oBAAoB,CAAC,MAAM,EAAE,QAAQ,EAAE,IAAI,CAAC,MAAM,CAAC,CAAA;UAEnD,OAAO,MAAM,CAAA;OACd;MAED,OAAO,QAAQ,CAAC,IAAiB;UAC/B,MAAM,MAAM,GAAG,IAAI,UAAU,EAAE,CAAA;UAC/B,MAAM,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAA;UACvB,IAAI,oBAAoB,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE;cAC5C,MAAM,CAAC,IAAI,GAAG,IAAI,CAAC,IAAsB,CAAA;WAC1C;UACD,IAAI,SAAS,GAAG,KAAK,CAAA;UACrB,IAAI,IAAI,CAAC,WAAW,KAAK,SAAS,EAAE;cAClC,MAAM,CAAC,WAAW,GAAG,IAAI,qBAAqB,EAAE,CAAA;cAChD,MAAM,CAAC,WAAW,CAAC,IAAI,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAA;cAC/C,MAAM,CAAC,WAAW,CAAC,KAAK,GAAG,IAAI,CAAC,WAAW,CAAC,KAAK,CAAA;cACjD,MAAM,CAAC,WAAW,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC,WAAW,CAAA;cAC7D,MAAM,CAAC,WAAW,CAAC,IAAI,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAA;cAC/C,SAAS,GAAG,IAAI,CAAA;WACjB;UACD,IAAI,IAAI,CAAC,YAAY,KAAK,SAAS,EAAE;cACnC,IAAI,SAAS,EAAE;kBACb,MAAM,IAAI,KAAK,CAAC,mDAAmD,CAAC,CAAA;eACrE;cACD,MAAM,CAAC,YAAY,GAAG,IAAI,sBAAsB,EAAE,CAAA;cAClD,MAAM,CAAC,YAAY,CAAC,IAAI,GAAG,IAAI,CAAC,YAAY,CAAC,IAAI,CAAA;cACjD,MAAM,CAAC,YAAY,CAAC,IAAI,GAAG,IAAI,CAAC,YAAY,CAAC,IAAI,CAAA;cACjD,MAAM,CAAC,YAAY,CAAC,IAAI,GAAG,IAAI,CAAC,YAAY,CAAC,IAAI,CAAA;cACjD,MAAM,CAAC,YAAY,CAAC,KAAK,GAAG,IAAI,CAAC,YAAY,CAAC,KAAK,CAAA;WACpD;UACD,MAAM,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAA;UAE3B,OAAO,MAAM,CAAA;OACd;;;EClEH,MAAM,QAAS,SAAQ,gBAAgB;MAMrC;UACE,KAAK,EAAE,CAAA;OACR;MAED,QAAQ;UACN,OAAO,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,CAAA;OAC9B;MAED,IAAI;UACF,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,EAAE;cACpB,MAAM,IAAI,KAAK,CAAC,qCAAqC,CAAC,CAAA;WACvD;UAED,MAAM,EAAE,GAAG,EAAE,CAAA;UAEb,oBAAoB,CAAC,EAAE,EAAE,qBAAqB,EAAE,IAAI,CAAC,mBAAmB,CAAC,CAAA;UACzE,oBAAoB,CAAC,EAAE,EAAE,UAAU,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAA;UACnD,oBAAoB,CAAC,EAAE,EAAE,MAAM,EAAE,IAAI,CAAC,IAAI,CAAC,CAAA;UAC3C,oBAAoB,CAAC,EAAE,EAAE,QAAQ,EAAE,IAAI,CAAC,MAAM,CAAC,MAAM,KAAK,CAAC,GAAG,IAAI,CAAC,MAAM,GAAG,SAAS,CAAC,CAAA;UACtF,uBAAuB,CAAC,EAAE,EAAE,IAAI,CAAC,UAAU,CAAC,CAAA;UAC5C,oBAAoB,CAAC,EAAE,EAAE,QAAQ,EAAE,IAAI,CAAC,MAAM,CAAC,CAAA;UAE/C,OAAO,EAAE,CAAA;OACV;MAED,OAAO,QAAQ,CAAC,IAAe;UAC7B,MAAM,IAAI,GAAG,IAAI,QAAQ,EAAE,CAAA;UAC3B,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAA;UACzB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAA;UACrB,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC,mBAAmB,CAAA;UACnD,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAA;UAC7B,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAA;UACzB,OAAO,IAAI,CAAA;OACZ;;;ECxCH,MAAM,wBACN,SAAQ,eAAe;MAGrB,YAAY,KAAa,EAAE,QAAgB,EAAE,QAAgB;UAC3D,KAAK,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAA;UACtB,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAA;OACzB;MAED,QAAQ;UACN,QAAQ,IAAI,CAAC,QAAQ,GAAG,CAAC,IAAI,IAAI,CAAC,QAAQ,GAAG,CAAC,EAAC;OAChD;MAED,IAAI;UACF,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,EAAE;cACpB,MAAM,IAAI,KAAK,CAAC,uEAAuE,CAAC,CAAA;WACzF;UAED,MAAM,EAAE,GAAG,KAAK,CAAC,IAAI,EAAE,CAAA;UAEvB,oBAAoB,CAAC,EAAE,EAAE,UAAU,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAA;UACnD,uBAAuB,CAAC,EAAE,EAAE,IAAI,CAAC,UAAU,CAAC,CAAA;UAC5C,oBAAoB,CAAC,EAAE,EAAE,QAAQ,EAAE,IAAI,CAAC,MAAM,CAAC,CAAA;UAE/C,OAAO,EAAE,CAAA;OACV;;;ECRH,MAAM,YAAY;MAAlB;UACE,UAAK,GAAc,IAAI,SAAS,EAAE,CAAA;UAClC,UAAK,GAAY,CAAC,CAAA;UAElB,YAAO,GAAiB,EAAE,CAAA;UAC1B,gBAAW,GAAqB,EAAE,CAAA;UAClC,cAAS,GAAmB,EAAE,CAAA;UAE9B,WAAM,GAAgB,EAAE,CAAA;UACxB,UAAK,GAAe,EAAE,CAAA;UACtB,WAAM,GAAe,EAAE,CAAA;OA0CxB;MA1BC,IAAI;UACF,MAAM,OAAO,GAAG;cACd,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE;cACxB,OAAO,EAAE,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,MAAM,IAAI,MAAM,CAAC,IAAI,EAAE,CAAC;cAClD,WAAW,EAAE,IAAI,CAAC,WAAW,CAAC,GAAG,CAAC,UAAU,IAAI,UAAU,CAAC,IAAI,EAAE,CAAC;cAClE,SAAS,EAAE,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,GAAG,IAAI,GAAG,CAAC,IAAI,EAAE,CAAC;cAEhD,MAAM,EAAE,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,KAAK,IAAI,KAAK,CAAC,IAAI,EAAE,CAAC;cAC9C,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,IAAI,IAAI,CAAC,IAAI,EAAE,CAAC;cAC1C,MAAM,EAAE,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,IAAI,IAAI,IAAI,CAAC,IAAI,EAAE,CAAC;WAC7C,CAAA;UACD,oBAAoB,CAAC,OAAO,EAAE,OAAO,EAAE,IAAI,CAAC,KAAK,CAAC,CAAA;UAClD,oBAAoB,CAAC,OAAO,EAAE,WAAW,EAAE,IAAI,CAAC,SAAS,KAAK,SAAS,IAAI,IAAI,CAAC,SAAS,CAAC,MAAM,KAAK,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,EAAE,IAAI,EAAE,CAAC,IAAI,EAAE,CAAC,GAAG,SAAS,CAAC,CAAA;UACzJ,oBAAoB,CAAC,OAAO,EAAE,UAAU,EAAE,IAAI,CAAC,QAAQ,KAAK,SAAS,IAAI,IAAI,CAAC,QAAQ,CAAC,MAAM,KAAK,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE,IAAI,EAAE,CAAC,IAAI,EAAE,CAAC,GAAG,SAAS,CAAC,CAAA;UACrJ,oBAAoB,CAAC,OAAO,EAAE,QAAQ,EAAE,IAAI,CAAC,MAAM,KAAK,SAAS,IAAI,IAAI,CAAC,MAAM,CAAC,MAAM,KAAK,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,GAAG,IAAI,GAAG,CAAC,IAAI,EAAE,CAAC,GAAG,SAAS,CAAC,CAAA;UAC/I,oBAAoB,CAAC,OAAO,EAAE,UAAU,EAAE,IAAI,CAAC,QAAQ,KAAK,SAAS,IAAI,IAAI,CAAC,QAAQ,CAAC,MAAM,KAAK,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,GAAG,IAAI,GAAG,CAAC,IAAI,EAAE,CAAC,GAAG,SAAS,CAAC,CAAA;UACvJ,oBAAoB,CAAC,OAAO,EAAE,SAAS,EAAE,IAAI,CAAC,OAAO,KAAK,SAAS,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,KAAK,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,CAAC,GAAG,SAAS,CAAC,CAAA;UAC/I,oBAAoB,CAAC,OAAO,EAAE,YAAY,EAAE,IAAI,CAAC,UAAU,KAAK,SAAS,IAAI,IAAI,CAAC,UAAU,CAAC,MAAM,KAAK,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,GAAG,IAAI,GAAG,CAAC,IAAI,EAAE,CAAC,GAAG,SAAS,CAAC,CAAA;UAC/J,oBAAoB,CAAC,OAAO,EAAE,OAAO,EAAE,IAAI,CAAC,KAAK,KAAK,SAAS,IAAI,IAAI,CAAC,KAAK,CAAC,MAAM,KAAK,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,IAAI,IAAI,CAAC,IAAI,EAAE,CAAC,GAAG,SAAS,CAAC,CAAA;UAE7I,uBAAuB,CAAC,OAAO,EAAE,IAAI,CAAC,UAAU,CAAC,CAAA;UACjD,oBAAoB,CAAC,OAAO,EAAE,QAAQ,EAAE,IAAI,CAAC,MAAM,CAAC,CAAA;UACpD,oBAAoB,CAAC,OAAO,EAAE,gBAAgB,EAAE,IAAI,CAAC,cAAc,CAAC,CAAA;UACpE,oBAAoB,CAAC,OAAO,EAAE,oBAAoB,EAAE,IAAI,CAAC,kBAAkB,CAAC,CAAA;UAC5E,OAAO,OAAO,CAAA;OACf;;;ECtEH,MAAM,iBAAiB;MAAvB;UACY,UAAK,GAAW,EAAE,CAAA;OAe7B;MAdC,IAAI,IAAI;UACN,OAAO,IAAI,CAAC,KAAK,CAAA;OAClB;MAKD,QAAQ;UACN,OAAO,IAAI,CAAA;OACZ;MAED,IAAI;UACF,OAAM;OACP;;;ECdH,MAAM,QAAS,SAAQ,iBAAiB;MAStC;UACE,KAAK,EAAE,CAAA;UATT,UAAK,GAAW,4BAA4B,CAAA;OAU3C;MAED,QAAQ;UACN,OAAO,MAAM,CAAC,SAAS,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,IAAI,CAAC,UAAU,GAAG,CAAC,CAAA;OAChE;MAED,IAAI;UACF,OAAO;cACL,UAAU,EAAE,IAAI,CAAC,UAAU;cAC3B,UAAU,EAAE,IAAI,CAAC,UAAU,CAAC,IAAI,EAAE;WACnC,CAAA;OACF;;;ECrBH,MAAM,wBAAyB,SAAQ,iBAAiB;MAAxD;;UACE,UAAK,GAAW,qCAAqC,CAAA;OA6DtD;MAnDC,QAAQ;UACN,IAAI,IAAI,CAAC,cAAc,KAAK,SAAS,EAAE;cACrC,OAAO,IAAI,CAAC,cAAc,CAAC,QAAQ,EAAE,CAAA;WACtC;UACD,IAAI,IAAI,CAAC,yBAAyB,KAAK,SAAS,EAAE;cAChD,IAAI,CAAC,yBAAyB,CAAC,QAAQ,EAAE,CAAA;WAC1C;UACD,IAAI,IAAI,CAAC,aAAa,KAAK,SAAS,EAAE;cACpC,IAAI,IAAI,CAAC,aAAa,CAAC,MAAM,KAAK,CAAC,EAAE;kBACnC,OAAO,KAAK,CAAA;eACb;cACD,IAAI,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE;kBACjD,OAAO,KAAK,CAAA;eACb;WACF;UACD,IAAI,IAAI,CAAC,cAAc,KAAK,SAAS,EAAE;cACrC,IAAI,IAAI,CAAC,cAAc,CAAC,MAAM,KAAK,CAAC,EAAE;kBACpC,OAAO,KAAK,CAAA;eACb;cACD,IAAI,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE;kBAClD,OAAO,KAAK,CAAA;eACb;WACF;UACD,IAAI,IAAI,CAAC,gBAAgB,KAAK,SAAS,KAAK,IAAI,CAAC,gBAAgB,GAAG,CAAC,IAAI,IAAI,CAAC,gBAAgB,GAAG,CAAC,CAAC,EAAE;cACnG,OAAO,KAAK,CAAA;WACb;UAED,OAAO,IAAI,CAAA;OACZ;MAED,IAAI;UACF,IAAI,IAAI,CAAC,QAAQ,EAAE,KAAK,KAAK,EAAE;cAC7B,MAAM,IAAI,KAAK,CAAC,mDAAmD,CAAC,CAAA;WACrE;UACD,MAAM,GAAG,GAAG,EAAE,CAAA;UACd,IAAI,IAAI,CAAC,aAAa,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE;cACjE,oBAAoB,CAAC,GAAG,EAAE,eAAe,EAAE,IAAI,CAAC,aAAa,CAAC,CAAA;WAC/D;UACD,IAAI,IAAI,CAAC,cAAc,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE;cACnE,oBAAoB,CAAC,GAAG,EAAE,eAAe,EAAE,IAAI,CAAC,cAAc,CAAC,CAAA;WAChE;UACD,IAAI,IAAI,CAAC,gBAAgB,KAAK,GAAG;cAC/B,oBAAoB,CAAC,GAAG,EAAE,kBAAkB,EAAE,IAAI,CAAC,gBAAgB,CAAC,CAAA;UACtE,IAAI,IAAI,CAAC,cAAc,KAAK,SAAS,EAAE;cACrC,oBAAoB,CAAC,GAAG,EAAE,gBAAgB,EAAE,IAAI,CAAC,cAAc,CAAC,IAAI,EAAE,CAAC,CAAA;WACxE;UACD,IAAI,IAAI,CAAC,yBAAyB,KAAK,SAAS,EAAE;cAChD,oBAAoB,CAAC,GAAG,EAAE,2BAA2B,EAAE,IAAI,CAAC,yBAAyB,CAAC,IAAI,EAAE,CAAC,CAAA;WAC9F;UACD,OAAO,GAAG,CAAA;OACX;;;EC/DH,MAAM,cAAe,SAAQ,iBAAiB;MAA9C;;UACE,UAAK,GAAG,kBAAkB,CAAA;OAC3B;;;ECFD;;;;;;;;;;;;;;;;;;;;;;;;;;;;EA4BA,MAAM,aAAc,SAAQ,iBAAiB;MAA7C;;UACE,UAAK,GAAW,kBAAkB,CAAA;OAEnC;;;EC/BD;;;;;EAKA,MAAM,mBAAoB,SAAQ,iBAAiB;MAAnD;;UACE,UAAK,GAAW,sBAAsB,CAAA;OAcvC;;;ECpBD,MAAM,mBAAoB,SAAQ,iBAAiB;MAAnD;;UACE,UAAK,GAAW,0BAA0B,CAAA;OAC3C;;;ECFD;;;EAGA,MAAM,qBAAsB,SAAQ,iBAAiB;MAArD;;UACE,UAAK,GAAW,yBAAyB,CAAA;OAc1C;;;EClBD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EA6BA,MAAM,MAAO,SAAQ,iBAAiB;MAAtC;;UACE,UAAK,GAAW,UAAU,CAAA;OAK3B;;;EClCD;;;EAGA,MAAM,4BAA6B,SAAQ,iBAAiB;MAA5D;;UACE,UAAK,GAAW,mCAAmC,CAAA;OAepD;;;EChBD;;;;EAIA,MAAM,aAAa;MAajB,YAAY,GAAyB,EAAE,QAAwB,EAAE,YAA0B;UAZlF,SAAI,GAAG,KAAK,CAAA;UAanB,IAAI,CAAC,eAAe,GAAG,GAAG,CAAA;UAC1B,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAA;UACxB,IAAI,CAAC,YAAY,GAAG,YAAY,CAAA;OACjC;MAED,MAAM,CAAC,GAAiB;UACtB,IAAI;;;cAGF,MAAM,GAAG,GAAG,YAAY,CAAC,QAAQ,CAAC;kBAChC,KAAK,EAAE,IAAI,CAAC,eAAe,CAAC,YAAY;kBACxC,aAAa,EAAE,IAAI;kBACnB,IAAI,EAAE,MAAM;eACb,CAAC,CAAA;cACF,GAAG,CAAC,SAAS,CAAC,IAAI,CAAC,GAAG,CAAC,CAAA;;;;cAQvB,MAAM,IAAI,GAAG,IAAI,CAAC,eAAe,CAAC,WAAW,CAAC,GAAG,CAAC,CAAA;;cAIlD,MAAM,IAAI,GAAG,IAAI,QAAQ,EAAE,CAAA;cAC3B,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAA;cAC1B,IAAI,CAAC,GAAG,GAAG,GAAG,CAAA;cACd,MAAM,MAAM,GAAG,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAA;;cAEpC,MAAM,IAAI,GAAG,IAAI,QAAQ,EAAE,CAAA;cAC3B,IAAI,CAAC,GAAG,GAAG,GAAG,CAAA;cACd,IAAI,CAAC,IAAI,GAAG,MAAM,CAAA;cAClB,MAAM,MAAM,GAAG,GAAG,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAA;;cAEnC,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,KAAK,KAAK,SAAS,GAAG,CAAC,GAAG,GAAG,CAAC,KAAK,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,CAAA;;cAItE,IAAI,IAAI,CAAC,QAAQ,KAAK,SAAS,EAAE;kBAC/B,IAAI,GAAG,CAAC,SAAS,KAAK,SAAS,EAAE;sBAC/B,GAAG,CAAC,SAAS,GAAG,EAAE,CAAA;mBACnB;kBACD,IAAI,kBAAkB,GAAG,GAAG,CAAC,SAAS,CAAC,MAAM,CAAA;kBAC7C,IAAI,CAAC,QAAQ,GAAG,kBAAkB,CAAA;;;kBAGlC,GAAG,CAAC,SAAS,CAAC,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAA;eACzD;;cAED,IAAI,IAAI,CAAC,YAAY,KAAK,SAAS,EAAE;;kBAEnC,OAAO,CAAC,GAAG,CAAC,aAAa,CAAC,CAAA;eAC3B;;;;;cAOD,IAAI,MAAM,GAAG,SAAS,CAAA;cACtB,IAAI,GAAG,CAAC,OAAO,CAAC,MAAM,KAAK,CAAC,EAAE;kBAC5B,MAAM,OAAO,GAAG,GAAG,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,UAAU,EAAE,CAAC,CAAA;kBAClD,MAAM,GAAG,GAAG,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,UAAU,CAAA;eACzC;mBAAM;kBACL,MAAM,GAAG,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,UAAU,CAAA;eACnC;;cAGD,IAAI,MAAM,KAAK,SAAS,EAAE;;kBAExB,MAAM,EAAE,GAAG,IAAID,UAAQ,CAAC,MAAM,CAAC,CAAA;kBAC/B,IAAI,CAAC,eAAe,CAAC,aAAa,CAAC,OAAO,CAAC,GAAG;sBAC5C,EAAE,CAAC,UAAU,CAAC,IAAI,UAAU,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,CAAA;;mBAE1C,CAAC,CAAA;eACH;mBAAM;kBACL,MAAM,EAAE,GAAG,IAAIA,UAAQ,EAAE,CAAA;kBACzB,MAAM,GAAG,EAAE,CAAC,MAAqB,CAAA;eAClC;WACF;UAAC,OAAO,KAAK,EAAE;cACd,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAA;WACnB;UACD,OAAO,IAAI,CAAA;OACZ;;;EC3GH,MAAM,cAAc;MAApB;UACW,SAAI,GAAG,MAAM,CAAA;OAMvB;MAHC,MAAM;UACJ,OAAO,IAAI,CAAA;OACZ;;;ECNH,MAAM,gBAAgB;MAAtB;UACW,SAAI,GAAG,QAAQ,CAAA;OAOzB;MAHC,MAAM;UACJ,OAAO,IAAI,CAAA;OACZ;;;ECHH,SAAS,eAAe,CAAC,kBAA0B,EAAE,aAAiC;MACpF,MAAM,KAAK,GAAG,IAAI,sBAAsB,EAAE,CAAA;MAE1C,aAAa,CAAC,OAAO,CAAC,EAAE;UACtB,QAAQ,EAAE,CAAC,IAAI,CAAC,QAAQ,EAAE;cACxB,KAAK,UAAU;kBACb,KAAK,CAAC,QAAQ,GAAG,EAAE,kBAAkB,CAAA;kBACrC,MAAM;cACR,KAAK,QAAQ;kBACX,KAAK,CAAC,MAAM,GAAG,EAAE,kBAAkB,CAAA;kBACnC,MAAM;cACR,KAAK,KAAK;kBACR,KAAK,CAAC,GAAG,GAAG,EAAE,kBAAkB,CAAA;kBAChC,MAAM;cACR,KAAK,KAAK;kBACR,KAAK,CAAC,GAAG,GAAG,EAAE,kBAAkB,CAAA;kBAChC,MAAM;cACR,KAAK,SAAS;kBACZ,KAAK,CAAC,OAAO,GAAG,EAAE,kBAAkB,CAAA;kBACpC,MAAM;cACR,KAAK,UAAU;kBACb,KAAK,CAAC,QAAQ,GAAG,EAAE,kBAAkB,CAAA;kBACrC,MAAM;cACR,KAAK,SAAS;kBACZ,KAAK,CAAC,OAAO,GAAG,EAAE,kBAAkB,CAAA;kBACpC,MAAM;cACR,KAAK,QAAQ;kBACX,KAAK,CAAC,MAAM,GAAG,EAAE,kBAAkB,CAAA;kBACnC,MAAM;WAGT;OACF,CAAC,CAAA;MACF,OAAO,KAAK,CAAA;EACd,CAAC;EAED;;;EAGA,MAAM,oBAAoB;MAA1B;;;;UAIE,kBAAa,GAAuB,EAAE,CAAA;UACtC,kBAAa,GAAsBJ,mBAAiB,CAAC,SAAS,CAAA;OAgC/D;;;;MAtBC,QAAQ;UACN,OAAO,KAAK,CAAA;OACb;MAED,IAAI,YAAY;UACd,IAAI,IAAI,CAAC,aAAa,CAAC,MAAM,KAAK,CAAC,EAAE;cACnC,OAAO,CAAC,CAAA;WACT;UACD,OAAO,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,KAAK,CAAA;OACnC;MAED,WAAW,CAAC,GAAiB,EAAE,aAAsB;UACnD,MAAM,IAAI,GAAG,IAAI,aAAa,EAAE,CAAA;UAChC,IAAI,CAAC,QAAQ,GAAG,aAAa,CAAA;UAC7B,IAAI,CAAC,UAAU,GAAG,eAAe,CAAC,GAAG,CAAC,SAAS,CAAC,MAAM,EAAE,IAAI,CAAC,aAAa,CAAC,CAAA;UAC3E,IAAI,IAAI,CAAC,OAAO,KAAK,SAAS,EAAE;cAC9B,IAAI,CAAC,OAAO,GAAG,EAAE,GAAG,CAAC,SAAS,CAAC,MAAM,CAAA;WACtC;UACD,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,aAAa,CAAA;UAC9B,IAAI,CAAC,GAAG,GAAG,GAAG,CAAA;UACd,OAAO,IAAI,CAAA;OACZ;;;EC7EH,MAAM,gBAAgB;MAAtB;UACE,SAAI,GAA4BM,yBAAuB,CAAC,QAAQ,CAAA;UAEhE,eAAU,GAAsBT,mBAAiB,CAAC,KAAK,CAAA;UACvD,gBAAW,GAAsBU,mBAAiB,CAAC,IAAI,CAAA;OAaxD;;;;MARC,IAAI,KAAK;UACP,MAAM,OAAO,GAAG,wBAAwB,CAAC,IAAI,CAAC,UAAU,CAAC,CAAA;UACzD,MAAM,OAAO,GAAG,4BAA4B,CAAC,IAAI,CAAC,WAAW,CAAC,CAAA;UAC9D,IAAI,IAAI,CAAC,MAAM,CAAC,UAAU,GAAG,OAAO,GAAG,OAAO,KAAK,CAAC,EAAE;cACpD,MAAM,IAAI,KAAK,CAAC,uCAAuC,CAAC,CAAA;WACzD;UACD,OAAO,IAAI,CAAC,MAAM,CAAC,UAAU,IAAI,OAAO,GAAG,OAAO,CAAC,CAAA;OACpD;;;EClBH,MAAM,iBAAiB;;;ECGvB,SAAS,WAAW,CAAC,WAAyB,EAAE,IAAmB;MACjE,KAAK,MAAM,MAAM,IAAI,IAAI,EAAE;UACzB,MAAM,EAAE,GAAG,UAAU,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAA;UACtC,WAAW,CAAC,IAAI,CAAC,EAAE,CAAC,CAAA;OACrB;EACH,CAAC;EAED,SAAS,eAAe,CAAC,eAAiC,EAAE,IAAuB;MACjF,KAAK,MAAM,MAAM,IAAI,IAAI,EAAE;UACzB,MAAM,EAAE,GAAG,cAAc,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAA;;UAE1C,eAAe,CAAC,IAAI,CAAC,EAAE,CAAC,CAAA;OACzB;EACH,CAAC;EAED,SAAS,aAAa,CAAC,aAA6B,EAAE,IAAqB;MACzE,KAAK,MAAM,OAAO,IAAI,IAAI,EAAE;UAC1B,MAAM,GAAG,GAAG,YAAY,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAA;;UAE1C,aAAa,CAAC,IAAI,CAAC,GAAG,CAAC,CAAA;OACxB;EACH,CAAC;EAED,SAAS,UAAU,CAAC,UAAuB,EAAE,IAAkB;MAC7D,KAAK,MAAM,SAAS,IAAI,IAAI,EAAE;UAC5B,MAAM,KAAK,GAAG,SAAS,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAA;UAC3C,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,CAAA;OACvB;EACH,CAAC;EAED,SAAS,SAAS,CAAC,SAAqB,EAAE,IAAiB;MACzD,KAAK,MAAM,QAAQ,IAAI,IAAI,EAAE;UAC3B,MAAM,IAAI,GAAG,QAAQ,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAA;UACxC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAA;OACrB;EACH,CAAC;EAED,SAAS,SAAS,CAAC,SAAqB,EAAE,IAAiB;MACzD,KAAK,MAAM,QAAQ,IAAI,IAAI,EAAE;UAC3B,MAAM,IAAI,GAAG,QAAQ,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAA;UACxC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAA;OACrB;EACH,CAAC;EAED,SAAS,YAAY,CAAC,YAA2B,EAAE,IAAoB;MACrE,KAAK,MAAM,MAAM,IAAI,IAAI,EAAE;UACzB,MAAM,EAAE,GAAG,WAAW,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAA;UACvC,YAAY,CAAC,IAAI,CAAC,EAAE,CAAC,CAAA;OACtB;EACH,CAAC;EAED,SAAS,UAAU,CAAC,UAAuB,EAAE,IAAkB;MAC7D,KAAK,MAAM,OAAO,IAAI,IAAI,EAAE;UAC1B,MAAM,GAAG,GAAG,SAAS,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAA;UACvC,UAAU,CAAC,IAAI,CAAC,GAAG,CAAC,CAAA;OACrB;EACH,CAAC;EAED,SAAS,aAAa,CAAC,aAA6B,EAAE,IAAqB;MACzE,KAAK,MAAM,QAAQ,IAAI,IAAI,EAAE;UAC3B,MAAM,IAAI,GAAG,YAAY,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAA;UAC5C,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAA;OACzB;EACH,CAAC;EAED,SAAS,YAAY,CAAC,YAA2B,EAAE,IAAoB;MACrE,KAAK,MAAM,OAAO,IAAI,IAAI,EAAE;UAC1B,MAAM,GAAG,GAAG,WAAW,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAA;UACzC,YAAY,CAAC,IAAI,CAAC,GAAG,CAAC,CAAA;OACvB;EACH,CAAC;EAED,SAAS,cAAc,CAAC,cAA+B,EAAE,IAAsB;MAC7E,KAAK,MAAM,OAAO,IAAI,IAAI,EAAE;UAC1B,MAAM,GAAG,GAAG,aAAa,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAA;UAC3C,cAAc,CAAC,IAAI,CAAC,GAAG,CAAC,CAAA;OACzB;EACH,CAAC;EAED,SAAS,SAAS,CAAC,SAAqB,EAAE,IAAiB;MACzD,KAAK,MAAM,QAAQ,IAAI,IAAI,EAAE;UAC3B,MAAM,IAAI,GAAG,QAAQ,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAA;UACxC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAA;OACrB;EACH,CAAC;EAED,SAAS,WAAW,CAAC,WAAyB,EAAE,IAAmB;MACjE,KAAK,MAAM,UAAU,IAAI,IAAI,EAAE;UAC7B,MAAM,MAAM,GAAG,UAAU,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAA;UAC9C,WAAW,CAAC,IAAI,CAAC,MAAM,CAAC,CAAA;OACzB;EACH,CAAC;EAED,SAAS,IAAI,CAAC,GAAiB;MAC7B,GAAG,CAAC,KAAK,CAAC,GAAG,GAAG,GAAG,CAAA;MACnB,GAAG,CAAC,OAAO,CAAC,OAAO,CAAC,EAAE,IAAI,EAAE,CAAC,GAAG,GAAG,GAAG,CAAC,CAAA;MACvC,GAAG,CAAC,WAAW,CAAC,OAAO,CAAC,EAAE,IAAI,EAAE,CAAC,GAAG,GAAG,GAAG,CAAC,CAAA;MAC3C,GAAG,CAAC,SAAS,CAAC,OAAO,CAAC,GAAG,IAAI,GAAG,CAAC,GAAG,GAAG,GAAG,CAAC,CAAA;MAC3C,GAAG,CAAC,MAAM,CAAC,OAAO,CAAC,KAAK,IAAI,KAAK,CAAC,GAAG,GAAG,GAAG,CAAC,CAAA;MAC5C,GAAG,CAAC,KAAK,CAAC,OAAO,CAAC,EAAE,IAAI,EAAE,CAAC,GAAG,GAAG,GAAG,CAAC,CAAA;MACrC,GAAG,CAAC,MAAM,CAAC,OAAO,CAAC,IAAI,IAAI,IAAI,CAAC,GAAG,GAAG,GAAG,CAAC,CAAA;MAC1C,IAAI,GAAG,CAAC,SAAS;UACf,GAAG,CAAC,SAAS,CAAC,OAAO,CAAC,GAAG,IAAI,GAAG,CAAC,GAAG,GAAG,GAAG,CAAC,CAAA;MAC7C,IAAI,GAAG,CAAC,QAAQ;UACd,GAAG,CAAC,QAAQ,CAAC,OAAO,CAAC,EAAE,IAAI,EAAE,CAAC,GAAG,GAAG,GAAG,CAAC,CAAA;MAC1C,IAAI,GAAG,CAAC,MAAM;UACZ,GAAG,CAAC,MAAM,CAAC,OAAO,CAAC,GAAG,IAAI,GAAG,CAAC,GAAG,GAAG,GAAG,CAAC,CAAA;MAC1C,IAAI,GAAG,CAAC,QAAQ;UACd,GAAG,CAAC,QAAQ,CAAC,OAAO,CAAC,GAAG,IAAI,GAAG,CAAC,GAAG,GAAG,GAAG,CAAC,CAAA;MAC5C,IAAI,GAAG,CAAC,UAAU;UAChB,GAAG,CAAC,UAAU,CAAC,OAAO,CAAC,GAAG,IAAI,GAAG,CAAC,GAAG,GAAG,GAAG,CAAC,CAAA;MAC9C,IAAI,GAAG,CAAC,OAAO;UACb,GAAG,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,IAAI,MAAM,CAAC,GAAG,GAAG,GAAG,CAAC,CAAA;MACjD,IAAI,GAAG,CAAC,KAAK;UACX,GAAG,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,IAAI,IAAI,CAAC,GAAG,GAAG,GAAG,CAAC,CAAA;EAC7C,CAAC;QAEK,QAAQ,GAAG,CAAC,IAAkB,EAAE,GAAG,SAA0B;MACjE,MAAM,GAAG,GAAG,IAAI,YAAY,EAAE,CAAA;MAC9B,IAAI,eAAe,GAAG,SAAS,CAAC,MAAM,CAAA;MACtC,OAAO,CAAC,GAAG,CAAC,uBAAuB,eAAe,EAAE,CAAC,CAAC;MAEtD,IAAI,GAAG,GAAG,IAAI,CAAA;MACd,IAAI,OAAO,IAAI,KAAK,QAAQ,EAAE;UAC5B,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,CAAA;OAC9B;MACD,GAAG,GAAG,GAAe,CAAA;MAErB,GAAG,CAAC,KAAK,GAAG,GAAG,CAAC,OAAO,CAAC,CAAA;MACxB,GAAG,CAAC,KAAK,GAAG,SAAS,CAAC,YAAY,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,CAAA;MAChD,WAAW,CAAC,GAAG,CAAC,OAAO,EAAE,GAAG,CAAC,SAAS,CAAC,CAAC,CAAA;MACxC,eAAe,CAAC,GAAG,CAAC,WAAW,EAAE,GAAG,CAAC,aAAa,CAAC,CAAC,CAAA;MACpD,aAAa,CAAC,GAAG,CAAC,SAAS,EAAE,GAAG,CAAC,WAAW,CAAC,CAAC,CAAA;MAC9C,UAAU,CAAC,GAAG,CAAC,MAAM,EAAE,GAAG,CAAC,QAAQ,CAAC,CAAC,CAAA;MACrC,SAAS,CAAC,GAAG,CAAC,KAAK,EAAE,GAAG,CAAC,OAAO,CAAC,CAAC,CAAA;MAClC,SAAS,CAAC,GAAG,CAAC,MAAM,EAAE,GAAG,CAAC,QAAQ,CAAC,CAAC,CAAA;MACpC,IAAI,GAAG,CAAC,UAAU,CAAC,KAAK,SAAS,EAAE;UACjC,YAAY,CAAC,GAAG,CAAC,QAAQ,KAAK,SAAS,GAAG,IAAI,KAAK,EAAe,GAAG,GAAG,CAAC,QAAQ,EAAE,GAAG,CAAC,UAAU,CAAC,CAAC,CAAA;OACpG;MACD,IAAI,GAAG,CAAC,QAAQ,CAAC,KAAK,SAAS,EAAE;UAC/B,UAAU,CAAC,GAAG,CAAC,MAAM,KAAK,SAAS,GAAG,IAAI,KAAK,EAAa,GAAG,GAAG,CAAC,MAAM,EAAE,GAAG,CAAC,QAAQ,CAAC,CAAC,CAAA;OAC1F;MACD,IAAI,GAAG,CAAC,WAAW,CAAC,KAAK,SAAS,EAAE;UAClC,aAAa,CAAC,GAAG,CAAC,SAAS,KAAK,SAAS,GAAG,IAAI,KAAK,EAAgB,GAAG,GAAG,CAAC,SAAS,EAAE,GAAG,CAAC,WAAW,CAAC,CAAC,CAAA;OACzG;MACD,IAAI,GAAG,CAAC,UAAU,CAAC,KAAK,SAAS,EAAE;UACjC,YAAY,CAAC,GAAG,CAAC,QAAQ,KAAK,SAAS,GAAG,IAAI,KAAK,EAAe,GAAG,GAAG,CAAC,QAAQ,EAAE,GAAG,CAAC,UAAU,CAAC,CAAC,CAAA;OACpG;MACD,IAAI,GAAG,CAAC,YAAY,CAAC,KAAK,SAAS,EAAE;UACnC,cAAc,CAAC,GAAG,CAAC,UAAU,KAAK,SAAS,GAAG,IAAI,KAAK,EAAiB,GAAG,GAAG,CAAC,UAAU,EAAE,GAAG,CAAC,YAAY,CAAC,CAAC,CAAA;OAC9G;MACD,IAAI,GAAG,CAAC,OAAO,CAAC,KAAK,SAAS,EAAE;UAC9B,SAAS,CAAC,GAAG,CAAC,KAAK,KAAK,SAAS,GAAG,IAAI,KAAK,EAAY,GAAG,GAAG,CAAC,KAAK,EAAE,GAAG,CAAC,OAAO,CAAC,CAAC,CAAA;OACrF;MACD,IAAI,GAAG,CAAC,SAAS,CAAC,KAAK,SAAS,EAAE;UAChC,WAAW,CAAC,GAAG,CAAC,OAAO,KAAK,SAAS,GAAG,IAAI,KAAK,EAAc,GAAG,GAAG,CAAC,OAAO,EAAE,GAAG,CAAC,SAAS,CAAC,CAAC,CAAA;OAC/F;MAED,IAAI,CAAC,GAAG,CAAC,CAAA;MACT,OAAO,GAAG,CAAA;EACZ;;QClKM,OAAO,GAAG,CAAC,MAAyC;;MAExD,MAAM,EAAE,GAAG,IAAIH,UAAQ,CAAC,MAAM,CAAC,CAAA;MAC/B,MAAM,KAAK,GAAG,EAAE,CAAC,SAAS,CAAC,CAAC,CAAC,CAAA;MAC7B,IAAI,KAAK,KAAK,MAAM,EAAE;UACpB,MAAM,IAAI,KAAK,CAAC,wBAAwB,CAAC,CAAA;OAC1C;MACD,MAAM,OAAO,GAAG,EAAE,CAAC,UAAU,EAAE,CAAA;MAC/B,IAAI,OAAO,KAAK,CAAC,EAAE;UACjB,MAAM,IAAI,KAAK,CAAC,iCAAiC,CAAC,CAAA;OACnD;MACD,MAAM,MAAM,GAAG,EAAE,CAAC,UAAU,EAAE,CAAA;MAC9B,IAAI,MAAM,KAAK,MAAM,CAAC,UAAU,EAAE;UAChC,MAAM,IAAI,KAAK,CAAC,oBAAoB,CAAC,CAAA;OACtC;;MAGD,MAAM,cAAc,GAAG,EAAE,CAAC,UAAU,EAAE,CAAA;MACtC,MAAM,QAAQ,GAAG,EAAE,CAAC,UAAU,EAAE,CAAA;MAChC,OAAO,CAAC,GAAG,CAAC,cAAc,QAAQ,kBAAkB,CAAC,CAAA;MACrD,MAAM,QAAQ,GAAG,EAAE,CAAC,SAAS,CAAC,cAAc,CAAC,CAAA;MAC7C,MAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAA;;MAGjC,MAAM,aAAa,GAAG,EAAE,CAAC,UAAU,EAAE,CAAA;MACrC,MAAM,OAAO,GAAG,EAAE,CAAC,UAAU,EAAE,CAAA;MAC/B,OAAO,CAAC,GAAG,CAAC,cAAc,OAAO,kBAAkB,CAAC,CAAA;MACpD,IAAI,UAAU,GAAG,SAAS,CAAA;MAC1B,IAAI;UACF,UAAU,GAAG,EAAE,CAAC,SAAS,CAAC,aAAa,CAAC,CAAA;;UAExC,OAAO,QAAQ,CAAC,IAAI,EAAE,UAAU,CAAC,CAAA;OAClC;MAAC,MAAM;UACN,MAAM,IAAI,KAAK,CAAC,yCAAyC,CAAC,CAAA;OAC3D;EACH;;ECrCA;;;;;;WAMgB,WAAW,CAAC,GAA8B,EAAE,MAAe,IAAI;MAC7E,MAAM,MAAM,GAAG,GAAG,CAAC,MAAM,CAAA;MACzB,IAAI,MAAM,KAAK,CAAC,EAAE;UAChB,MAAM,IAAI,KAAK,CAAC,QAAQ,CAAC,CAAA;OAC1B;MACD,IAAI,KAAK,GAAG,GAAG,CAAC,CAAC,CAAC,CAAA;MAClB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,EAAE,CAAC,EAAE,EAAE;UAC/B,MAAM,IAAI,GAAG,GAAG,CAAC,CAAC,CAAC,CAAA;UACnB,IAAI,GAAG,GAAG,IAAI,GAAG,KAAK,GAAG,IAAI,GAAG,KAAK,EAAE;cACrC,KAAK,GAAG,IAAI,CAAA;WACb;OACF;MACD,OAAO,KAAK,CAAA;EACd,CAAC;WAEe,iBAAiB,CAAC,GAA8B,EAAE,YAAoB,CAAC,EAAE,MAAe,IAAI;MAC1G,MAAM,MAAM,GAAG,GAAG,CAAC,MAAM,CAAA;MACzB,IAAI,MAAM,KAAK,CAAC,IAAI,MAAM,GAAG,SAAS,KAAK,CAAC,EAAE;UAC5C,MAAM,IAAI,KAAK,CAAC,qBAAqB,MAAM,gBAAgB,SAAS,KAAK,CAAC,CAAA;OAC3E;MAED,IAAI,SAAS,KAAK,CAAC,EAAE;UACnB,OAAO,CAAC,WAAW,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,CAAA;OAC/B;MAED,MAAM,MAAM,GAAa,EAAE,CAAA;MAC3B,MAAM,eAAe,GAAG,MAAM,GAAG,SAAS,CAAA;;MAE1C,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,SAAS,EAAE,CAAC,EAAE,EAAE;UAClC,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAA;OACpB;;MAED,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,eAAe,EAAE,CAAC,EAAE,EAAE;UACxC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,SAAS,EAAE,CAAC,EAAE,EAAE;cAClC,IAAI,GAAG,GAAG,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,EAAE;kBACzD,MAAM,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAA;eACvB;WACF;OACF;MACD,OAAO,MAAM,CAAA;EACf;;EC1CA,MAAM,sBAAsB;MAM1B,YAAY,OAKX;UACC,IAAI,CAAC,IAAI,GAAG,OAAO,CAAC,IAAI,CAAC;UACzB,IAAI,CAAC,IAAI,GAAG,OAAO,CAAC,IAAI,CAAC;UACzB,IAAI,CAAC,WAAW,GAAG,OAAO,CAAC,WAAW,CAAC;UACvC,IAAI,CAAC,SAAS,GAAG,OAAO,CAAC,SAAS,CAAA;OACnC;MAED,aAAa;UACX,QAAQ,IAAI,CAAC,SAAS;cACpB,KAAKP,mBAAiB,CAAC,IAAI;kBACzB,OAAO,IAAI,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAA;cACjC,KAAKA,mBAAiB,CAAC,aAAa;kBAClC,OAAO,IAAI,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAA;cAClC,KAAKA,mBAAiB,CAAC,KAAK;kBAC1B,OAAO,IAAI,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAA;cAClC,KAAKA,mBAAiB,CAAC,cAAc;kBACnC,OAAO,IAAI,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAA;cACnC,KAAKA,mBAAiB,CAAC,YAAY;kBACjC,OAAO,IAAI,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAA;cACnC,KAAKA,mBAAiB,CAAC,KAAK;kBAC1B,OAAO,IAAI,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAA;WACrC;OACF;;;ECpBH,SAAS,OAAO,CAAC,EAAe,EAAE,EAAe;MAC/C,IAAI,UAAU,CAAC,WAAW,CAAC,IAAI,KAAK,QAAQ,EAAE;;UAE5C,MAAM,YAAY,GAAG,MAAM,CAAC,MAAM,CAAC;cACjC,IAAI,UAAU,CAAC,EAAE,CAAC;cAClB,IAAI,UAAU,CAAC,EAAE,CAAC;WACnB,CAAC,CAAC;UACH,OAAO,YAAY,CAAC,MAAM,CAAC;OAC5B;WAAM;UACL,MAAM,WAAW,GAAG,EAAE,CAAC,UAAU,GAAG,EAAE,CAAC,UAAU,CAAC;UAClD,MAAM,YAAY,GAAG,IAAI,UAAU,CAAC,WAAW,CAAC,CAAC;UACjD,YAAY,CAAC,GAAG,CAAC,IAAI,UAAU,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;UACxC,YAAY,CAAC,GAAG,CAAC,IAAI,UAAU,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,UAAU,CAAC,CAAC;UACpD,OAAO,YAAY,CAAC,MAAM,CAAC;OAC5B;EACH,CAAC;EAED,SAAS,YAAY,CACnB,IAAmB,EACnB,IAAY,EACZ,aAAqB;MAErB,MAAM,KAAK,GAAG,IAAI,CAAC,UAAU,CAAC;MAC9B,QAAQ,IAAI;UACV,KAAK,UAAU;cACb,KAAK,CAAC,QAAQ,GAAG,aAAa,CAAC;cAC/B,MAAM;UACR,KAAK,KAAK;cACR,KAAK,CAAC,GAAG,GAAG,aAAa,CAAC;cAC1B,MAAM;UACR,KAAK,KAAK;cACR,KAAK,CAAC,GAAG,GAAG,aAAa,CAAC;cAC1B,MAAM;UACR,KAAK,QAAQ;cACX,KAAK,CAAC,MAAM,GAAG,aAAa,CAAC;cAC7B,MAAM;UACR,KAAK,UAAU;cACb,KAAK,CAAC,QAAQ,GAAG,aAAa,CAAC;cAC/B,MAAM;UACR,KAAK,SAAS;cACZ,KAAK,CAAC,OAAO,GAAG,aAAa,CAAC;cAC9B,MAAM;UACR,KAAK,QAAQ;cACX,KAAK,CAAC,MAAM,GAAG,aAAa,CAAC;cAC7B,MAAM;UACR,KAAK,UAAU;cACb,KAAK,CAAC,QAAQ,GAAG,aAAa,CAAC;cAC/B,MAAM;UACR,KAAK,SAAS;cACZ,KAAK,CAAC,OAAO,GAAG,aAAa,CAAC;cAC9B,MAAM;OAGT;EACH,CAAC;EAED,MAAM,oBAAoB;MAMxB,YAAY,WAAmB;UAJ/B,QAAG,GAA6B,EAAE,CAAC;UAKjC,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,WAAW,CAAC,IAAI,WAAW,IAAI,CAAC,EAAE;cACtD,MAAM,IAAI,KAAK,CACb,qCAAqC,WAAW,MAAM,CACvD,CAAC;WACH;UACD,IAAI,CAAC,KAAK,GAAG,WAAW,CAAC;OAC1B;;MAID,WAAW,CAAC,IAAkB;UAC5B,IAAI,IAAI,CAAC,MAAM,GAAG,CAAC,KAAK,IAAI,CAAC,KAAK,EAAE;cAClC,OAAO,KAAK,CAAC;WACd;UAED,MAAM,WAAW,GAAG,IAAI,sBAAsB,CAAC;cAC7C,IAAI,EAAE,UAAU;cAChB,IAAI,EAAE,IAAI,CAAC,MAAM;cACjB,WAAW,EAAEU,mBAAiB,CAAC,IAAI;cACnC,SAAS,EAAEV,mBAAiB,CAAC,KAAK;WACnC,CAAC,CAAC;UACH,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;UAC3B,OAAO,IAAI,CAAC;OACb;MAED,MAAM,CAAC,IAAkB;UACvB,IAAI,IAAI,CAAC,MAAM,GAAG,CAAC,KAAK,IAAI,CAAC,KAAK,EAAE;cAClC,OAAO,KAAK,CAAC;WACd;UAED,MAAM,KAAK,GAAG,IAAI,sBAAsB,CAAC;cACvC,IAAI,EAAE,KAAK;cACX,IAAI,EAAE,IAAI,CAAC,MAAM;cACjB,WAAW,EAAEU,mBAAiB,CAAC,IAAI;cACnC,SAAS,EAAEV,mBAAiB,CAAC,KAAK;WACnC,CAAC,CAAC;UACH,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;UACrB,OAAO,IAAI,CAAC;OACb;MAED,SAAS,CAAC,IAAkB;UAC1B,IAAI,IAAI,CAAC,MAAM,GAAG,CAAC,KAAK,IAAI,CAAC,KAAK,EAAE;cAClC,OAAO,KAAK,CAAC;WACd;UAED,MAAM,SAAS,GAAG,IAAI,sBAAsB,CAAC;cAC3C,IAAI,EAAE,QAAQ;cACd,IAAI,EAAE,IAAI,CAAC,MAAM;cACjB,WAAW,EAAEU,mBAAiB,CAAC,IAAI;cACnC,SAAS,EAAEV,mBAAiB,CAAC,KAAK;WACnC,CAAC,CAAC;UACH,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;UACzB,OAAO,IAAI,CAAC;OACb;MAED,UAAU,CAAC,IAA4C;UACrD,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAA;OAClB;MAED,QAAQ,CACN,mBAA2B,EAC3B,IAAiB,EACjB,QAA2B,EAC3B,aAAgC;UAEhC,MAAM,GAAG,GAAG,IAAI,sBAAsB,CAAC;cACrC,IAAI,EAAE,mBAAmB;cACzB,IAAI,EAAE,IAAI;cACV,WAAW,EAAE,QAAQ;cACrB,SAAS,EAAE,aAAa;WACzB,CAAC,CAAC;UACH,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;OACpB;MAED,IAAI,IAAI,CAAC,KAAe;UACtB,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;OACpB;MAED,IAAI,QAAQ,CAAC,KAAmB;UAC9B,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;OACxB;MAED,MAAM,CAAC,GAAiB;UACtB,IAAI,OAAiB,CAAC;UACtB,IAAI,OAA6B,CAAC;UAClC,IAAI,SAAS,GAAW,CAAC,CAAC,CAAA;UAC1B,MAAM,IAAI,GAAG,aAAa,CAAC,QAAQ,CAAC;cAClC,UAAU,EAAE;kBACV,QAAQ,EAAE,CAAC,CAAC;eACb;cACD,IAAI,EAAE,CAAC;WACR,CAAC,CAAC;;UAGH,IAAI,IAAI,CAAC,KAAK,KAAK,SAAS,EAAE;;cAE5B,OAAO,GAAG,QAAQ,CAAC,QAAQ,CAAC;kBAC1B,UAAU,EAAE,EAAE;eACf,CAAC,CAAC;cACH,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;cACzB,OAAO,GAAG,QAAQ,CAAC,QAAQ,CAAC;kBAC1B,QAAQ,EAAE,EAAE;kBACZ,IAAI,EAAE,GAAG,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC;kBAC3B,MAAM,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;eACzD,CAAC,CAAC;cACH,SAAS,GAAG,GAAG,CAAC,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;WACzC;eAAM;cACL,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC;;cAErB,IAAI,OAAO,GAAG,CAAC,CAAC,CAAC;cACjB,IAAI,OAAO,CAAC,GAAG,KAAK,SAAS,EAAE;kBAC7B,IAAI,MAAM,GAAG,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;kBACjD,IAAI,MAAM,KAAK,CAAC,CAAC,EAAE;sBACjB,OAAO,GAAG,MAAM,CAAC;mBAClB;uBAAM;sBACL,OAAO,GAAG,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;mBAChD;eACF;mBAAM;kBACL,OAAO,GAAG,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;eACxC;;cAED,GAAG,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,IAAI,EAAE,KAAK;kBAC5B,IAAI,IAAI,CAAC,IAAI,KAAK,SAAS,IAAI,IAAI,CAAC,IAAI,KAAK,OAAO,EAAE;sBACpD,OAAO,GAAG,IAAI,CAAC;sBACf,SAAS,GAAG,KAAK,CAAA;mBAClB;eACF,CAAC,CAAC;cACH,IAAI,OAAO,KAAK,SAAS,EAAE;kBACzB,OAAO,GAAG,QAAQ,CAAC,QAAQ,CAAC;sBAC1B,QAAQ,EAAE,EAAE;sBACZ,IAAI,EAAE,OAAO;sBACb,MAAM,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;mBACzD,CAAC,CAAC;kBACH,SAAS,GAAG,GAAG,CAAC,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;eACzC;WACF;UAED,OAAO,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;UAC9B,MAAM,KAAK,GAAG,SAAS,CAAC,QAAQ,CAAC;cAC/B,KAAK,EAAE,CAAC,SAAS,CAAC;WACnB,CAAC,CAAA;UACF,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAA;;UAGtB,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,GAAG,EAAE,KAAK,EAAE,SAAS;cACrC,MAAM,UAAU,GAAG,cAAc,CAAC,QAAQ,CAAC;kBACzC,MAAM,EAAE,CAAC;kBACT,UAAU,EAAE,GAAG,CAAC,IAAI,CAAC,UAAU;kBAC/B,UAAU,EAAE,KAAK,KAAK,CAAC,GAAG,CAAC,GAAG,SAAS,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,UAAU;eACnE,CAAC,CAAC;cACH,MAAM,KAAK,GAAG,GAAG,CAAC,WAAW,CAAC,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC;cACnD,MAAM,SAAS,GAAG,wBAAwB,CAAC,GAAG,CAAC,SAAS,CAAC,CAAA;cACzD,MAAM,WAAW,GAAG,4BAA4B,CAAC,GAAG,CAAC,WAAW,CAAC,CAAA;cAEjE,MAAM,cAAc,GAAG,GAAG,CAAC,aAAa,EAAE,CAAA;cAC1C,MAAM,QAAQ,GAAG,YAAY,CAAC,QAAQ,CAAC;kBACrC,aAAa,EAAE,GAAG,CAAC,SAAS;kBAC5B,KAAK,EAAE,GAAG,CAAC,IAAI,CAAC,UAAU,IAAI,SAAS,GAAG,WAAW,CAAC;kBACtD,IAAI,EAAE,GAAG,CAAC,WAAW;kBACrB,UAAU,EAAE,KAAK;kBACjB,UAAU,EAAE,CAAC;kBACb,GAAG,EAAE,iBAAiB,CAAC,cAAc,EAAE,WAAW,EAAE,IAAI,CAAC;kBACzD,GAAG,EAAE,iBAAiB,CAAC,cAAc,EAAE,WAAW,EAAE,KAAK,CAAC;eAC3D,CAAC,CAAC;cACH,MAAM,MAAM,GAAG,GAAG,CAAC,SAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;cAChD,YAAY,CAAC,IAAI,EAAE,GAAG,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;cAErC,IAAI,UAAU,GAAG,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;cAChC,IAAI,UAAU,KAAK,SAAS,EAAE;kBAC5B,UAAU,GAAG,UAAU,CAAC,QAAQ,CAAC;sBAC/B,UAAU,EAAE,CAAC;mBACd,CAAC,CAAA;kBACF,GAAG,CAAC,OAAO,CAAC,IAAI,CAAC,UAAU,CAAC,CAAA;eAC7B;cACD,IAAI,cAAc,GAChB,UAAU,CAAC,UAAU,KAAK,SAAS;oBAC/B,IAAI,WAAW,CAAC,CAAC,CAAC;oBAClB,UAAU,CAAC,UAAU,CAAC;cAC5B,UAAU,CAAC,UAAU,GAAG,OAAO,CAAC,cAAc,EAAE,GAAG,CAAC,IAAI,CAAC,CAAC;cAC1D,UAAU,CAAC,UAAU,IAAI,GAAG,CAAC,IAAI,CAAC,UAAU,CAAA;WAC7C,CAAC,CAAC;;UAGH,IAAI,IAAI,CAAC,SAAS,KAAK,SAAS,EAAE;;cAEhC,IAAI,GAAG,CAAC,SAAS,KAAK,SAAS,EAAE;kBAC/B,MAAM,OAAO,GAAG,GAAG,CAAC,SAAS,CAAC,OAAO,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;kBACtD,IAAI,OAAO,KAAK,CAAC,CAAC,EAAE;sBAClB,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC;mBACzB;uBAAM;sBACL,IAAI,CAAC,QAAQ,GAAG,GAAG,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;mBACxD;eACF;mBAAM;kBACL,GAAG,CAAC,SAAS,GAAG,EAAE,CAAC;kBACnB,IAAI,CAAC,QAAQ,GAAG,GAAG,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;eACxD;;WAGF;OACF;;;ECxRH,MAAM,cAAc;;;ECEpB,MAAM,sBAAuB,SAAQ,cAAc;MAAnD;;UACW,SAAI,GAAG,+BAA+B,CAAA;OAKhD;MAHC,IAAI;OAEH;;;ECLH,MAAM,YAAa,SAAQ,cAAc;MAAzC;;UACW,SAAI,GAAG,iCAAiC,CAAA;OAClD;;;ECFD,MAAM,cAAe,SAAQ,cAAc;MAA3C;;UACW,SAAI,GAAG,sBAAsB,CAAA;OACvC;;;ECFD,MAAM,iBAAkB,SAAQ,cAAc;MAA9C;;UACW,SAAI,GAAG,yBAAyB,CAAA;OAC1C;;;ECFD,MAAM,SAAU,SAAQ,cAAc;MAAtC;;UACW,SAAI,GAAG,gBAAgB,CAAA;OACjC;;;ECFD,MAAM,WAAY,SAAQ,cAAc;MAAxC;;UACW,SAAI,GAAG,kBAAkB,CAAA;OACnC;;;ECFD,MAAM,kBAAmB,SAAQ,cAAc;MAA/C;;UACW,SAAI,GAAG,2BAA2B,CAAA;OAC5C;;;ECED,MAAM,IAAI;MAAV;UAME,cAAS,GAAc,CAAC,CAAC,EAAC,CAAC,EAAC,CAAC,EAAC,CAAC,EAAC,CAAC,EAAC,CAAC,EAAC,CAAC,EAAC,CAAC,EAAC,CAAC,EAAC,CAAC,EAAC,CAAC,EAAC,CAAC,EAAC,CAAC,EAAC,CAAC,EAAC,CAAC,EAAC,CAAC,CAAC,CAAA;UAExD,eAAU,GAAyB,IAAI,GAAG,EAAE,CAAA;OAsB7C;MAnBC,QAAQ;UACN,OAAO,IAAI,CAAA;OACZ;;;;MAKD,MAAM;UACJ,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,EAAE;cACpB,MAAM,IAAI,KAAK,CAAC,0BAA0B,CAAC,CAAA;WAC5C;UACD,MAAM,GAAG,GAAG,EAAE,CAAA;UACd,IAAI,IAAI,CAAC,SAAS,KAAK,SAAS,EAAE;cAChC,MAAM,CAAC,cAAc,CAAC,GAAG,EAAE,WAAW,EAAE;kBACtC,KAAK,EAAE,IAAI,CAAC,SAAS;eACtB,CAAC,CAAA;WACH;OAEF;;;EC7BH,MAAM,OAAO;MAWX,YAAY,OAAkC;UAN9C,eAAU,GAAyB,IAAI,GAAG,EAAE,CAAA;UAE5C,mBAAc,GAAc,EAAE,CAAA;UAC9B,uBAAkB,GAAc,EAAE,CAAA;UAIhC,IAAI,CAAC,IAAI,GAAG,OAAO,CAAC,IAAI,CAAA;UACxB,IAAI,CAAC,cAAc,GAAG,OAAO,CAAC,cAAc,CAAA;UAC5C,IAAI,CAAC,GAAG,GAAG,OAAO,CAAC,GAAG,CAAA;OACvB;;;;MAKD,IAAI,GAAG;UACL,OAAO,IAAI,CAAC,GAAG,CAAA;OAChB;MACD,IAAI,GAAG,CAAC,KAAa;UACnB,IAAI,CAAC,GAAG,GAAG,KAAK,CAAA;OACjB;;;EC5BH,MAAM,kBAAkB;MAOtB,QAAQ;UACN,MAAM,QAAQ,GAAG,IAAI,CAAC,GAAG,KAAK,SAAS,GAAG,CAAC,GAAG,CAAC,CAAA;UAC/C,MAAM,WAAW,GAAG,IAAI,CAAC,MAAM,KAAK,SAAS,GAAG,CAAC,GAAG,CAAC,CAAA;UACrD,MAAM,WAAW,GAAG,IAAI,CAAC,MAAM,KAAK,SAAS,GAAG,CAAC,GAAG,CAAC,CAAA;;;;;UAKrD,IAAI,QAAQ,GAAG,WAAW,GAAG,WAAW,KAAK,CAAC,EAAE;cAC9C,OAAO,KAAK,CAAA;WACb;UAED,IAAe,IAAI,CAAC,GAAI,CAAC,MAAM,IAAI,EAAE;cACnC,OAAO,KAAK,CAAA;UACd,IAAe,IAAI,CAAC,MAAO,CAAC,MAAM,IAAI,CAAC;cACrC,OAAO,KAAK,CAAA;UACd,IAAe,IAAI,CAAC,MAAO,CAAC,MAAM,IAAI,CAAC;cACrC,OAAO,KAAK,CAAA;UAEd,OAAO,IAAI,CAAA;OACZ;;;EC3BH;EAEA,MAAM,WAAW;MAAjB;UAGE,eAAU,GAAyB,IAAI,GAAG,EAAE,CAAA;OAa7C;;;;MAPC,IAAI,GAAG;UACL,OAAO,IAAI,CAAC,GAAG,CAAA;OAChB;MAED,QAAQ;UACN,OAAO,IAAI,CAAA;OACZ;;;EClBH,MAAM,QAAQ;;;ECCd,MAAM,KAAK;MAMT,QAAQ;UACN,OAAO,IAAI,CAAA;OACZ;;;ECTH,MAAM,cAAc;MAKlB,QAAQ;UACN,OAAO,IAAI,CAAA;OACZ;;;ECPH,MAAM,UAAW,SAAQ,cAAc;MAMrC;UACE,KAAK,EAAE,CAAA;OACR;;;ECVH,IAAK,gBAKJ;EALD,WAAK,gBAAgB;MACnB,iCAAa,CAAA;MACb,iCAAa,CAAA;MACb,iCAAa,CAAA;MACb,iCAAa,CAAA;EACf,CAAC,EALI,gBAAgB,KAAhB,gBAAgB,QAKpB;AAED,2BAAe,gBAAgB;;ECH/B,MAAM,YAAY;MAShB,QAAQ;UACN,OAAO,KAAK,CAAA;OACb;;;ECTH,SAAS,sBAAsB,CAAC,KAAuB;MACrD,OAAO,KAAK,CAAC,WAAW,KAAK,SAAS,GAAG,KAAK,GAAG,IAAI,CAAA;EACvD,CAAC;EAED,SAASW,OAAK,CAAC,KAAuB;MACpC,MAAM,IAAI,GAAG,KAAK,CAAC,KAAoB,CAAA;MACvC,KAAK,CAAC,WAAW,GAAG,IAAI,CAAC,cAAc,CAAC,CAAA;MACxC,KAAK,CAAC,SAAS,GAAG,IAAI,CAAC,YAAY,CAAC,CAAA;MAEpC,IAAI,IAAI,CAAC,YAAY,CAAC,KAAK,SAAS,EAAE;UACpC,KAAK,CAAC,UAAU,GAAG,IAAI,GAAG,EAAE,CAAA;OAC7B;MACD,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAA;EAC/B,CAAC;EAED,MAAM,gBAAiB,SAAQ,YAAY;;;;MAQzC;UACE,KAAK,EAAE,CAAA;OACR;MAED,OAAO,cAAc,CAAC,IAAY,EAAE,MAAkB;UACpD,MAAM,EAAE,GAAG,IAAI,gBAAgB,EAAE,CAAA;UAEjC,EAAE,CAAC,KAAK,GAAG,IAAI,CAAA;UACf,EAAE,CAAC,OAAO,GAAG,MAAM,CAAA;UACnB,EAAE,CAAC,gBAAgB,GAAGC,kBAAgB,CAAC,IAAI,CAAA;UAE3CD,OAAK,CAAC,EAAE,CAAC,CAAA;UAET,OAAO,EAAE,CAAA;OACV;MAED,QAAQ;UACN,OAAO,sBAAsB,CAAC,IAAI,CAAC,CAAA;OACpC;;;ECzCH;;;;;;;;;;;;;;;;;;;;;;EAuBA,SAASA,OAAK,CAAC,KAAiB;MAC9B,KAAK,MAAM,CAAC,IAAI,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,EAAE;UACxC,KAAK,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,EAAE,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAA;OACvC;EACH,CAAC;EAED,MAAM,UAAU;MAAhB;UAKE,cAAS,GAA6B,IAAI,GAAG,EAAE,CAAA;OAkChD;MA9BC,OAAO,cAAc,CAAC,IAAa,EAAE,MAAkB;UACrD,MAAM,EAAE,GAAG,IAAI,UAAU,EAAE,CAAA;UAC3B,EAAE,CAAC,KAAK,GAAG,IAAI,CAAA;UACf,EAAE,CAAC,OAAO,GAAG,MAAM,CAAA;UAEnBA,OAAK,CAAC,EAAE,CAAC,CAAA;UAET,OAAO,EAAE,CAAA;OACV;MAED,QAAQ;UACN,OAAO,IAAI,CAAA;OACZ;MAED,IAAI,aAAa;UACf,OAAO,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAA;OAC/B;MAED,IAAI,cAAc;UAChB,OAAO,IAAI,CAAC,aAAa,CAAC,MAAM,CAAA;OACjC;MAED,WAAW,CAAC,IAAY;UACtB,IAAI,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE;cAC5B,MAAM,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,IAAI,CAAC,CAAA;cAClC,OAAO,CAAC,CAAA;WACT;UAED,MAAM,IAAI,KAAK,CAAC,oCAAoC,IAAI,GAAG,CAAC,CAAA;OAC7D;;;EChEH,SAASE,aAAW,CAAC,MAAkB,EAAE,EAAY;MACnD,EAAE,CAAC,MAAM,EAAE,CAAA;MACX,MAAM,CAAC,KAAK,GAAG,EAAE,CAAC,SAAS,CAAC,CAAC,CAAC,CAAA;MAC9B,MAAM,CAAC,OAAO,GAAG,EAAE,CAAC,UAAU,EAAE,CAAA;MAChC,MAAM,CAAC,UAAU,GAAG,EAAE,CAAC,UAAU,EAAE,CAAA;MACnC,MAAM,CAAC,0BAA0B,GAAG,EAAE,CAAC,UAAU,EAAE,CAAA;MACnD,MAAM,CAAC,4BAA4B,GAAG,EAAE,CAAC,UAAU,EAAE,CAAA;MACrD,MAAM,CAAC,wBAAwB,GAAG,EAAE,CAAC,UAAU,EAAE,CAAA;MACjD,MAAM,CAAC,0BAA0B,GAAG,EAAE,CAAC,UAAU,EAAE,CAAA;EACrD,CAAC;EAED,SAASF,OAAK,CAAC,IAAU,EAAE,MAAmB;MAC5C,MAAM,QAAQ,GAAG,IAAIJ,UAAQ,CAAC,MAAM,CAAC,CAAA;MACrCM,aAAW,CAAC,IAAI,CAAC,MAAM,EAAE,QAAQ,CAAC,CAAA;MAElC,IAAI,IAAI,CAAC,UAAU,GAAG,CAAC,IAAI,CAAC,EAAE;UAC5B,MAAM,IAAI,KAAK,CAAC,mCAAmC,CAAC,CAAA;OACrD;MAED,QAAQ,CAAC,MAAM,EAAE,CAAA;MACjB,QAAQ,CAAC,IAAI,CAAC,EAAE,CAAC,CAAA;MACjB,MAAM,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,SAAS,CAAC,IAAI,CAAC,0BAA0B,CAAC,CAAC,CAAA;MAC9E,MAAM,KAAK,GAAG,QAAQ,CAAC,SAAS,CAAC,IAAI,CAAC,4BAA4B,CAAC,CAAA;MACnE,IAAI,CAAC,YAAY,GAAG,gBAAgB,CAAC,cAAc,CAAC,MAAM,EAAE,KAAK,CAAC,CAAA;MAElE,IAAI,IAAI,CAAC,wBAAwB,KAAK,CAAC,EAAE;UACvC,MAAM,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,SAAS,CAAC,IAAI,CAAC,wBAAwB,CAAC,CAAC,CAAA;UAC5E,MAAM,KAAK,GAAG,QAAQ,CAAC,SAAS,CAAC,IAAI,CAAC,0BAA0B,CAAC,CAAA;UACjE,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC,cAAc,CAAC,MAAM,EAAE,KAAK,CAAC,CAAA;OAC3D;;EAGH,CAAC;EAED,MAAM,IAAI;MAOR,YAAY,MAAmB,EAAE,WAAW,GAAG,KAAK;UAClD,IAAI,CAAC,MAAM,GAAG,IAAI,UAAU,EAAE,CAAA;UAC9BF,OAAK,CAAC,IAAI,EAAE,MAAM,CAAC,CAAA;UAEnB,IAAI,WAAW,KAAK,IAAI,EAAE;cACxB,IAAI,CAAC,MAAM,GAAG,MAAM,CAAA;WACrB;OACF;MAED,QAAQ;UACN,OAAO,IAAI,CAAA;OACZ;MAED,IAAI,KAAK;UACP,OAAO,IAAI,CAAC,MAAM,CAAC,KAAK,CAAA;OACzB;MAED,IAAI,UAAU;UACZ,OAAO,IAAI,CAAC,MAAM,CAAC,UAAU,CAAA;OAC9B;MAED,IAAI,OAAO;UACT,OAAO,IAAI,CAAC,MAAM,CAAC,OAAO,CAAA;OAC3B;MAED,IAAI,0BAA0B;UAC5B,OAAO,IAAI,CAAC,MAAM,CAAC,0BAA0B,CAAA;OAC9C;MAED,IAAI,4BAA4B;UAC9B,OAAO,IAAI,CAAC,MAAM,CAAC,4BAA4B,CAAA;OAChD;MAED,IAAI,wBAAwB;UAC1B,OAAO,IAAI,CAAC,MAAM,CAAC,wBAAwB,CAAA;OAC5C;MAED,IAAI,0BAA0B;UAC5B,OAAO,IAAI,CAAC,MAAM,CAAC,0BAA0B,CAAA;OAC9C;MAED,IAAI,cAAc;UAChB,OAAO,EAAE;cACT,IAAI,CAAC,0BAA0B;cAC/B,IAAI,CAAC,4BAA4B;cACjC,IAAI,CAAC,wBAAwB;cAC7B,IAAI,CAAC,0BAA0B,CAAA;OAChC;;;EC9FH,MAAM,UAAW,SAAQ,cAAc;MAOrC;UACE,KAAK,EAAE,CAAA;OACR;MAED,QAAQ;UACN,IAAI,IAAI,CAAC,UAAU,KAAK,CAAC,IAAI,IAAI,CAAC,UAAU,KAAK,CAAC,EAAE;cAClD,OAAO,KAAK,CAAA;WACb;UAED,OAAO,IAAI,CAAA;OACZ;;;ECbH,SAAS,sBAAsB,CAAC,KAAuB;MACrD,IAAI,KAAK,CAAC,QAAQ,KAAK,SAAS,IAAI,KAAK,CAAC,iBAAiB,KAAK,SAAS,EAAE;UACzE,OAAO,KAAK,CAAA;OACb;MACD,IAAI,KAAK,CAAC,QAAQ,KAAK,SAAS,IAAI,KAAK,CAAC,iBAAiB,KAAK,SAAS,EAAE;UACzE,OAAO,KAAK,CAAA;OACb;MACD,IAAI,KAAK,CAAC,iBAAiB,KAAK,SAAS,EAAE;UACzC,IAAI,KAAK,CAAC,qBAAqB,KAAK,SAAS,IAAI,KAAK,CAAC,oBAAoB,KAAK,SAAS,EAAE;cACzF,OAAO,KAAK,CAAA;WACb;OACF;MACD,IACE,CAAC,KAAK,CAAC,QAAQ,KAAK,SAAS,IAAI,KAAK,CAAC,WAAW,KAAK,SAAS;WAC/D,KAAK,CAAC,WAAW,KAAK,SAAS,IAAI,KAAK,CAAC,QAAQ,KAAK,SAAS,CAAC,EACjE;UACA,OAAO,KAAK,CAAA;OACb;MACD,IACE,CAAC,KAAK,CAAC,cAAc,KAAK,SAAS,IAAI,KAAK,CAAC,iBAAiB,KAAK,SAAS;WAC3E,KAAK,CAAC,iBAAiB,KAAK,SAAS,IAAI,KAAK,CAAC,cAAc,KAAK,SAAS,CAAC,EAC7E;UACA,OAAO,KAAK,CAAA;OACb;MACD,OAAO,IAAI,CAAA;EACb,CAAC;EAED,SAASA,OAAK,CAAC,KAAuB;MACpC,MAAM,IAAI,GAAG,KAAK,CAAC,KAAoB,CAAA;MACvC,KAAK,CAAC,QAAQ,GAAG,IAAI,CAAC,UAAU,CAAC,CAAA;MACjC,KAAK,CAAC,iBAAiB,GAAG,IAAI,CAAC,oBAAoB,CAAC,CAAA;MACpD,KAAK,CAAC,QAAQ,GAAG,IAAI,CAAC,WAAW,CAAC,CAAA;MAClC,KAAK,CAAC,WAAW,GAAG,IAAI,CAAC,cAAc,CAAC,CAAA;MACxC,KAAK,CAAC,cAAc,GAAG,IAAI,CAAC,kBAAkB,CAAC,CAAA;MAC/C,KAAK,CAAC,iBAAiB,GAAG,IAAI,CAAC,qBAAqB,CAAC,CAAA;MACrD,KAAK,CAAC,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,CAAA;MAC3B,KAAK,CAAC,eAAe,GAAG,IAAI,CAAC,mBAAmB,CAAC,CAAA;MACjD,KAAK,CAAC,eAAe,GAAG,IAAI,CAAC,kBAAkB,CAAC,CAAA;MAChD,KAAK,CAAC,SAAS,GAAG,IAAI,CAAC,YAAY,CAAC,CAAA;MACpC,KAAK,CAAC,qBAAqB,GAAG,IAAI,CAAC,yBAAyB,CAAC,CAAA;MAC7D,KAAK,CAAC,oBAAoB,GAAG,IAAI,CAAC,wBAAwB,CAAC,CAAA;MAE3D,IAAI,IAAI,CAAC,YAAY,CAAC,KAAK,SAAS,EAAE;UACpC,KAAK,CAAC,UAAU,GAAG,IAAI,GAAG,EAAE,CAAA;;OAE7B;MACD,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAA;EAC/B,CAAC;EAED,MAAM,gBAAiB,SAAQ,YAAY;MAmBzC;UACE,KAAK,EAAE,CAAA;OACR;MAED,OAAO,cAAc,CAAC,IAAY,EAAE,MAAkB;UACpD,MAAM,EAAE,GAAG,IAAI,gBAAgB,EAAE,CAAA;UAEjC,EAAE,CAAC,KAAK,GAAG,IAAI,CAAA;UACf,EAAE,CAAC,OAAO,GAAG,MAAM,CAAA;UACnB,EAAE,CAAC,gBAAgB,GAAGC,kBAAgB,CAAC,IAAI,CAAA;UAE3CD,OAAK,CAAC,EAAE,CAAC,CAAA;UAET,OAAO,EAAE,CAAA;OACV;MAED,QAAQ;UACN,OAAO,sBAAsB,CAAC,IAAI,CAAC,CAAA;OACpC;;;ECpFH,SAASE,aAAW,CAAC,MAAkB,EAAE,EAAY;MACnD,EAAE,CAAC,MAAM,EAAE,CAAA;MACX,MAAM,CAAC,KAAK,GAAG,EAAE,CAAC,SAAS,CAAC,CAAC,CAAC,CAAA;MAC9B,MAAM,CAAC,OAAO,GAAG,EAAE,CAAC,UAAU,EAAE,CAAA;MAChC,MAAM,CAAC,UAAU,GAAG,EAAE,CAAC,UAAU,EAAE,CAAA;MACnC,MAAM,CAAC,0BAA0B,GAAG,EAAE,CAAC,UAAU,EAAE,CAAA;MACnD,MAAM,CAAC,4BAA4B,GAAG,EAAE,CAAC,UAAU,EAAE,CAAA;MACrD,MAAM,CAAC,wBAAwB,GAAG,EAAE,CAAC,UAAU,EAAE,CAAA;MACjD,MAAM,CAAC,0BAA0B,GAAG,EAAE,CAAC,UAAU,EAAE,CAAA;MACnD,MAAM,CAAC,UAAU,GAAG,EAAE,CAAC,UAAU,EAAE,CAAA;EACrC,CAAC;EAED,SAASF,OAAK,CAAC,IAAU,EAAE,MAAmB;MAC5C,MAAM,QAAQ,GAAG,IAAIJ,UAAQ,CAAC,MAAM,CAAC,CAAA;MACrCM,aAAW,CAAC,IAAI,CAAC,MAAM,EAAE,QAAQ,CAAC,CAAA;MAElC,IAAI,IAAI,CAAC,UAAU,GAAG,CAAC,IAAI,CAAC,EAAE;UAC5B,MAAM,IAAI,KAAK,CAAC,mCAAmC,CAAC,CAAA;OACrD;MAED,QAAQ,CAAC,MAAM,EAAE,CAAA;MACjB,QAAQ,CAAC,IAAI,CAAC,EAAE,CAAC,CAAA;MACjB,MAAM,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,SAAS,CAAC,IAAI,CAAC,0BAA0B,CAAC,CAAC,CAAA;MAC9E,MAAM,KAAK,GAAG,QAAQ,CAAC,SAAS,CAAC,IAAI,CAAC,4BAA4B,CAAC,CAAA;MACnE,IAAI,CAAC,YAAY,GAAG,gBAAgB,CAAC,cAAc,CAAC,MAAM,EAAE,KAAK,CAAC,CAAA;MAElE,IAAI,IAAI,CAAC,wBAAwB,KAAK,CAAC,EAAE;UACvC,MAAM,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,SAAS,CAAC,IAAI,CAAC,wBAAwB,CAAC,CAAC,CAAA;UAC5E,MAAM,KAAK,GAAG,QAAQ,CAAC,SAAS,CAAC,IAAI,CAAC,0BAA0B,CAAC,CAAA;UACjE,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC,cAAc,CAAC,MAAM,EAAE,KAAK,CAAC,CAAA;OAC3D;;EAGH,CAAC;EAED,MAAM,IAAI;;;;MAUR,YAAY,MAAmB,EAAE,WAAW,GAAG,KAAK;UAClD,IAAI,CAAC,MAAM,GAAG,IAAI,UAAU,EAAE,CAAA;UAC9BF,OAAK,CAAC,IAAI,EAAE,MAAM,CAAC,CAAA;UAEnB,IAAI,WAAW,KAAK,IAAI,EAAE;cACxB,IAAI,CAAC,MAAM,GAAG,MAAM,CAAA;WACrB;OACF;MAED,QAAQ;UACN,OAAO,IAAI,CAAA;OACZ;MAED,IAAI,KAAK;UACP,OAAO,IAAI,CAAC,MAAM,CAAC,KAAK,CAAA;OACzB;MAED,IAAI,UAAU;UACZ,OAAO,IAAI,CAAC,MAAM,CAAC,UAAU,CAAA;OAC9B;MAED,IAAI,OAAO;UACT,OAAO,IAAI,CAAC,MAAM,CAAC,OAAO,CAAA;OAC3B;MAED,IAAI,0BAA0B;UAC5B,OAAO,IAAI,CAAC,MAAM,CAAC,0BAA0B,CAAA;OAC9C;MAED,IAAI,4BAA4B;UAC9B,OAAO,IAAI,CAAC,MAAM,CAAC,4BAA4B,CAAA;OAChD;MAED,IAAI,wBAAwB;UAC1B,OAAO,IAAI,CAAC,MAAM,CAAC,wBAAwB,CAAA;OAC5C;MAED,IAAI,0BAA0B;UAC5B,OAAO,IAAI,CAAC,MAAM,CAAC,0BAA0B,CAAA;OAC9C;MAED,IAAI,UAAU;UACZ,OAAO,IAAI,CAAC,MAAM,CAAC,UAAU,CAAA;OAC9B;MAED,IAAI,uBAAuB;UACzB,OAAO,EAAE;cACT,IAAI,CAAC,0BAA0B;cAC/B,IAAI,CAAC,4BAA4B;cACjC,IAAI,CAAC,wBAAwB;cAC7B,IAAI,CAAC,0BAA0B,CAAA;OAChC;;;ECvGH,MAAM,UAAW,SAAQ,cAAc;MAMrC;UACE,KAAK,EAAE,CAAA;OACR;;;ECHH,SAAS,wBAAwB,CAAC,KAAuB;MACvD,IAAI,KAAK,CAAC,QAAQ,KAAK,SAAS,IAAI,KAAK,CAAC,iBAAiB,KAAK,SAAS,EAAE;UACzE,OAAO,KAAK,CAAA;OACb;MACD,IAAI,KAAK,CAAC,OAAO,KAAK,SAAS,IAAI,KAAK,CAAC,WAAW,KAAK,SAAS,EAAE;UAClE,OAAO,KAAK,CAAA;OACb;MACD,IAAI,KAAK,CAAC,iBAAiB,KAAK,SAAS,EAAE;UACzC,IAAI,KAAK,CAAC,qBAAqB,KAAK,SAAS,IAAI,KAAK,CAAC,oBAAoB,KAAK,SAAS,EAAE;cACzF,OAAO,KAAK,CAAA;WACb;OACF;MACD,OAAO,IAAI,CAAA;EACb,CAAC;EAED,SAASA,OAAK,CAAC,KAAuB;MACpC,MAAM,IAAI,GAAG,KAAK,CAAC,KAAoB,CAAA;MACvC,KAAK,CAAC,QAAQ,GAAG,IAAI,CAAC,UAAU,CAAC,CAAA;MACjC,KAAK,CAAC,iBAAiB,GAAG,IAAI,CAAC,oBAAoB,CAAC,CAAA;MACpD,KAAK,CAAC,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,CAAA;MACzB,KAAK,CAAC,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,CAAA;MACvB,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAA;MAC7B,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAA;MAC7B,KAAK,CAAC,YAAY,GAAG,IAAI,CAAC,eAAe,CAAC,CAAA;MAC1C,KAAK,CAAC,OAAO,GAAG,IAAI,CAAC,UAAU,CAAC,CAAA;MAChC,KAAK,CAAC,YAAY,GAAG,IAAI,CAAC,eAAe,CAAC,CAAA;MAC1C,KAAK,CAAC,qBAAqB,GAAG,IAAI,CAAC,yBAAyB,CAAC,CAAA;MAC7D,KAAK,CAAC,oBAAoB,GAAG,IAAI,CAAC,wBAAwB,CAAC,CAAA;MAC3D,KAAK,CAAC,YAAY,GAAG,IAAI,CAAC,eAAe,CAAC,CAAA;MAE1C,IAAI,IAAI,CAAC,YAAY,CAAC,KAAK,SAAS,EAAE;UACpC,KAAK,CAAC,UAAU,GAAG,IAAI,GAAG,EAAE,CAAA;;OAE7B;MACD,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAA;EAC/B,CAAC;EAED,MAAM,gBAAiB,SAAQ,YAAY;MAmBzC;UACE,KAAK,EAAE,CAAA;OACR;MAED,OAAO,cAAc,CAAC,IAAY,EAAE,MAAkB;UACpD,MAAM,EAAE,GAAG,IAAI,gBAAgB,EAAE,CAAA;UAEjC,EAAE,CAAC,KAAK,GAAG,IAAI,CAAA;UACf,EAAE,CAAC,OAAO,GAAG,MAAM,CAAA;UACnB,EAAE,CAAC,gBAAgB,GAAGC,kBAAgB,CAAC,IAAI,CAAA;UAE3CD,OAAK,CAAC,EAAE,CAAC,CAAA;UAET,OAAO,EAAE,CAAA;OACV;MAED,QAAQ;UACN,OAAO,wBAAwB,CAAC,IAAI,CAAC,CAAA;OACtC;;;ECxEH,SAAS,WAAW,CAAC,MAAkB,EAAE,EAAY;MACnD,EAAE,CAAC,MAAM,EAAE,CAAA;MACX,MAAM,CAAC,KAAK,GAAG,EAAE,CAAC,SAAS,CAAC,CAAC,CAAC,CAAA;MAC9B,MAAM,CAAC,OAAO,GAAG,EAAE,CAAC,UAAU,EAAE,CAAA;MAChC,MAAM,CAAC,UAAU,GAAG,EAAE,CAAC,UAAU,EAAE,CAAA;MACnC,MAAM,CAAC,0BAA0B,GAAG,EAAE,CAAC,UAAU,EAAE,CAAA;MACnD,MAAM,CAAC,4BAA4B,GAAG,EAAE,CAAC,UAAU,EAAE,CAAA;MACrD,MAAM,CAAC,wBAAwB,GAAG,EAAE,CAAC,UAAU,EAAE,CAAA;MACjD,MAAM,CAAC,0BAA0B,GAAG,EAAE,CAAC,UAAU,EAAE,CAAA;EACrD,CAAC;EAED,SAASA,OAAK,CAAC,IAAU,EAAE,MAAmB;MAC5C,MAAM,QAAQ,GAAG,IAAIJ,UAAQ,CAAC,MAAM,CAAC,CAAA;MACrC,WAAW,CAAC,IAAI,CAAC,MAAM,EAAE,QAAQ,CAAC,CAAA;MAElC,IAAI,IAAI,CAAC,UAAU,GAAG,CAAC,IAAI,CAAC,EAAE;UAC5B,MAAM,IAAI,KAAK,CAAC,mCAAmC,CAAC,CAAA;OACrD;MAED,QAAQ,CAAC,MAAM,EAAE,CAAA;MACjB,QAAQ,CAAC,IAAI,CAAC,EAAE,CAAC,CAAA;MACjB,MAAM,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,SAAS,CAAC,IAAI,CAAC,0BAA0B,CAAC,CAAC,CAAA;MAC9E,MAAM,KAAK,GAAG,QAAQ,CAAC,SAAS,CAAC,IAAI,CAAC,4BAA4B,CAAC,CAAA;MACnE,IAAI,CAAC,YAAY,GAAG,gBAAgB,CAAC,cAAc,CAAC,MAAM,EAAE,KAAK,CAAC,CAAA;MAElE,IAAI,IAAI,CAAC,wBAAwB,KAAK,CAAC,EAAE;UACvC,MAAM,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,SAAS,CAAC,IAAI,CAAC,wBAAwB,CAAC,CAAC,CAAA;UAC5E,MAAM,KAAK,GAAG,QAAQ,CAAC,SAAS,CAAC,IAAI,CAAC,0BAA0B,CAAC,CAAA;UACjE,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC,cAAc,CAAC,MAAM,EAAE,KAAK,CAAC,CAAA;OAC3D;EACH,CAAC;EAED,MAAM,IAAI;MAOR,YAAY,MAAmB,EAAE,WAAW,GAAG,KAAK;UAClD,IAAI,CAAC,MAAM,GAAG,IAAI,UAAU,EAAE,CAAA;UAC9BI,OAAK,CAAC,IAAI,EAAE,MAAM,CAAC,CAAA;UAEnB,IAAI,WAAW,KAAK,IAAI,EAAE;cACxB,IAAI,CAAC,MAAM,GAAG,MAAM,CAAA;WACrB;OACF;MAED,QAAQ;UACN,OAAO,IAAI,CAAA;OACZ;MAED,IAAI,KAAK;UACP,OAAO,IAAI,CAAC,MAAM,CAAC,KAAK,CAAA;OACzB;MAED,IAAI,UAAU;UACZ,OAAO,IAAI,CAAC,MAAM,CAAC,UAAU,CAAA;OAC9B;MAED,IAAI,OAAO;UACT,OAAO,IAAI,CAAC,MAAM,CAAC,OAAO,CAAA;OAC3B;MAED,IAAI,0BAA0B;UAC5B,OAAO,IAAI,CAAC,MAAM,CAAC,0BAA0B,CAAA;OAC9C;MAED,IAAI,4BAA4B;UAC9B,OAAO,IAAI,CAAC,MAAM,CAAC,4BAA4B,CAAA;OAChD;MAED,IAAI,wBAAwB;UAC1B,OAAO,IAAI,CAAC,MAAM,CAAC,wBAAwB,CAAA;OAC5C;MAED,IAAI,0BAA0B;UAC5B,OAAO,IAAI,CAAC,MAAM,CAAC,0BAA0B,CAAA;OAC9C;MAED,IAAI,cAAc;UAChB,OAAO,EAAE;cACT,IAAI,CAAC,0BAA0B;cAC/B,IAAI,CAAC,4BAA4B;cACjC,IAAI,CAAC,wBAAwB;cAC7B,IAAI,CAAC,0BAA0B,CAAA;OAChC;;;EC/FH,MAAM,IAAI;;;ECOV,SAAS,wBAAwB,CAAC,KAAuB;MACvD,IAAI,KAAK,CAAC,MAAM,CAAC,MAAM,KAAK,CAAC,EAAE;UAC7B,OAAO,KAAK,CAAA;OACb;MACD,IAAe,KAAK,CAAC,SAAU,CAAC,MAAM,KAAK,CAAC,EAAE;UAC5C,OAAO,KAAK,CAAA;OACb;MACD,IAAI,KAAK,CAAC,cAAc,KAAK,SAAS,EAAE;UACtC,IAAI,KAAK,CAAC,aAAa,KAAK,SAAS,IAAI,KAAK,CAAC,kBAAkB,KAAK,SAAS,EAAE;cAC/E,OAAO,KAAK,CAAA;WACb;OACF;MACD,IAAI,KAAK,CAAC,eAAe,KAAK,SAAS,EAAE;UACvC,IAAI,KAAK,CAAC,cAAc,KAAK,SAAS,EAAE;cACtC,OAAO,KAAK,CAAA;WACb;OACF;MACD,OAAO,IAAI,CAAA;EACb,CAAC;EAED,SAAS,KAAK,CAAC,KAAuB;MACpC,MAAM,IAAI,GAAG,KAAK,CAAC,KAAoB,CAAA;MACvC,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAA;MAC7B,KAAK,CAAC,SAAS,GAAG,IAAI,CAAC,YAAY,CAAC,CAAA;MACpC,KAAK,CAAC,cAAc,GAAG,IAAI,CAAC,iBAAiB,CAAC,CAAA;MAC9C,KAAK,CAAC,eAAe,GAAG,IAAI,CAAC,kBAAkB,CAAC,CAAA;MAChD,KAAK,CAAC,YAAY,GAAG,IAAI,CAAC,eAAe,CAAC,CAAA;MAE1C,KAAK,CAAC,aAAa,GAAG,IAAI,CAAC,gBAAgB,CAAC,CAAA;MAC5C,KAAK,CAAC,kBAAkB,GAAG,IAAI,CAAC,sBAAsB,CAAC,CAAA;MACvD,KAAK,CAAC,qBAAqB,GAAG,IAAI,CAAC,yBAAyB,CAAC,CAAA;MAC7D,KAAK,CAAC,qBAAqB,GAAG,IAAI,CAAC,yBAAyB,CAAC,CAAA;MAE7D,KAAK,CAAC,cAAc,GAAG,IAAI,CAAC,iBAAiB,CAAC,CAAA;MAC9C,KAAK,CAAC,gBAAgB,GAAG,IAAI,CAAC,oBAAoB,CAAC,CAAA;MACnD,KAAK,CAAC,aAAa,GAAG,IAAI,CAAC,iBAAiB,CAAC,CAAA;MAE7C,IAAI,IAAI,CAAC,YAAY,CAAC,KAAK,SAAS,EAAE;UACpC,KAAK,CAAC,UAAU,GAAG,IAAI,GAAG,EAAE,CAAA;;OAE7B;MACD,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAA;EAC/B,CAAC;EAED,MAAM,gBAAiB,SAAQ,YAAY;;;;MAsBzC;UACE,KAAK,EAAE,CAAA;OACR;MAED,OAAO,cAAc,CAAC,IAAY,EAAE,MAAkB;UACpD,MAAM,EAAE,GAAG,IAAI,gBAAgB,EAAE,CAAA;UAEjC,EAAE,CAAC,KAAK,GAAG,IAAI,CAAA;UACf,EAAE,CAAC,OAAO,GAAG,MAAM,CAAA;UACnB,EAAE,CAAC,gBAAgB,GAAGC,kBAAgB,CAAC,IAAI,CAAA;UAE3C,KAAK,CAAC,EAAE,CAAC,CAAA;UAET,OAAO,EAAE,CAAA;OACV;MAED,QAAQ;UACN,OAAO,wBAAwB,CAAC,IAAI,CAAC,CAAA;OACtC;;;EC3FH,IAAK,UAGJ;EAHD,WAAK,UAAU;MACb,yBAAW,CAAA;MACX,iCAAmB,CAAA;EACrB,CAAC,EAHI,UAAU,KAAV,UAAU,QAGd;AAED,qBAAe,UAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}